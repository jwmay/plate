(this.webpackJsonpplate=this.webpackJsonpplate||[]).push([[0],{12:function(e,t,n){"use strict";(function(e){var a=n(558),r=n.n(a),c=n(559),i=n.n(c),o=r()(i.a,e.Promise),l="https://my-plate-app.herokuapp.com/api",s=function(e){return e.body},u=null,d=function(e){u&&e.set("authorization","Token ".concat(u))},m=function(e,t){return o.del("".concat(l).concat(e),t).use(d).then(s)},p=function(e){return o.get("".concat(l).concat(e)).use(d).then(s)},E=function(e,t){return o.post("".concat(l).concat(e),t).use(d).then(s)},f=function(e,t){return o.put("".concat(l).concat(e),t).use(d).then(s)},b={current:function(){return p("/user")},login:function(e,t){return E("/users/login",{user:{username:e,password:t}})},register:function(e){return E("/users",{user:e})},save:function(e){return f("/user",{user:e})}},g={add:function(e){return E("/categories",{category:e})},delete:function(e){return m("/categories/".concat(e.slug))},deleteMany:function(e){return m("/categories/bulk",{categories:e})},getAll:function(){return p("/categories")},update:function(e){return f("/categories/".concat(e.slug),{category:e})}},O={add:function(e){return E("/ingredients",{ingredient:e})},delete:function(e){return m("/ingredients/".concat(e.slug))},deleteMany:function(e){return m("/ingredients/bulk",{ingredients:e})},getAll:function(){return p("/ingredients")},update:function(e){return f("/ingredients/".concat(e.slug),{ingredient:e})}},v={add:function(e){return E("/meals",{meal:e})},delete:function(e){return m("/meals/".concat(e.slug))},deleteMany:function(e){return m("/meals/bulk",{meals:e})},getAll:function(){return p("/meals")},update:function(e){return f("/meals/".concat(e.slug),{meal:e})}},y={add:function(e){return E("/plans",{plan:e})},delete:function(e){return m("/plans/".concat(e.slug))},deleteMany:function(e){return m("/plans/bulk",{plans:e})},getAll:function(){return p("/plans")},update:function(e){return f("/plans/".concat(e.slug),{plan:e})}},j={add:function(e){return E("/recipes",{recipe:e})},delete:function(e){return m("/recipes/".concat(e.slug))},deleteMany:function(e){return m("/recipes/bulk",{recipes:e})},getAll:function(){return p("/recipes")},update:function(e){return f("/recipes/".concat(e.slug),{recipe:e})}},h={update:function(e){return f("/user/settings",{settings:e})}},D={add:function(e){return E("/stores",{store:e})},delete:function(e){return m("/stores/".concat(e.slug))},getAll:function(){return p("/stores")},update:function(e){return f("/stores/".concat(e.slug),{store:e})}},A={getAll:function(){return p("/users?role=subscriber")},delete:function(e){return m("/users/subscriber/".concat(e.username))},update:function(e){return f("/users/".concat(e.username),{user:e})}};t.a={Auth:b,Categories:g,Ingredients:O,Meals:v,Plans:y,Recipes:j,Settings:h,Stores:D,Users:A,setToken:function(e){u=e}}}).call(this,n(108))},344:function(e,t,n){e.exports=n.p+"static/media/plate-background.c6d96dd4.png"},561:function(e,t,n){e.exports=n.p+"static/media/plate-logo.1dcb2d72.png"},564:function(e,t,n){e.exports=n.p+"static/media/doc-may-profile.f927335d.jpg"},578:function(e,t,n){e.exports=n(818)},811:function(e,t,n){},818:function(e,t,n){"use strict";n.r(t);var a=n(196),r=n(13),c=n(0),i=n.n(c),o=n(28),l=n.n(o),s=n(48),u=n(82),d=n(850),m=n(860),p=n(859),E=n(3),f=n(124),b=n(400),g=n(401),O=n(50),v=n.n(O),y=n(83),j=n(15),h=n(20),D=n(34),A=n(25),_=n(37),L=n(826),P=n(845),S=n(846),N=n(847),T=n(471),C=n(848),w=n(843),k=n(844),R=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),I=function(e){var t,n=R();return i.a.createElement(w.a,Object.assign({color:"primary",onClick:e.onClick,variant:"extended"},e),i.a.createElement(k.a,{className:n.icon}),null!==(t=e.prefix)&&void 0!==t?t:"Add"," ",e.item)},U=n(880),x=Object(b.a)((function(e){return{alert:{width:"100%","&:not(:last-of-type)":{marginBottom:e.spacing(1)}},alertList:{marginBottom:e.spacing(2)}}})),G=function(e){var t=e.errors,n=x();return t?i.a.createElement("div",{className:n.alertList},Object.keys(t).map((function(e){var a=e.replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase();return i.a.createElement(U.a,{className:n.alert,severity:"error",key:e},a," ",t[e])}))):null},M=n(12),V="ASYNC_START",F="LOGIN",W=Object(b.a)((function(e){return{addIcon:{marginRight:e.spacing(1)}}})),q=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onAdd:function(t){return e({type:"ADD_CATEGORY",payload:M.a.Categories.add(t),snackbar:{message:"Category added",variant:"success"}})},onExit:function(){return e({type:"CATEGORY_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_CATEGORY",payload:M.a.Categories.update(t),snackbar:{message:"Category updated",variant:"success"}})}}}))((function(e){var t=e.errors,n=e.category,a=e.inProgress,r=e.onAdd,o=e.onExit,l=e.onUpdate,s=Object(c.useState)(!1),u=Object(j.a)(s,2),d=u[0],m=u[1],p=Object(_.a)(),f=Object(L.a)(p.breakpoints.down("md")),b=(W(),function(){m(!1)}),O=function(e){r(Object(E.a)({},e))},w=function(e){l(Object(E.a)(Object(E.a)({},n),e))};return Object(c.useEffect)((function(){a||t||m(!1)}),[a]),i.a.createElement(i.a.Fragment,null,i.a.createElement(I,{item:"category",onClick:function(){m(!0)}}),i.a.createElement(P.a,{fullScreen:f,maxWidth:"lg",onClick:function(e){return e.stopPropagation()},onClose:b,onFocus:function(e){return e.stopPropagation()},open:d,TransitionProps:{onExit:o}},i.a.createElement(h.c,{initialValues:{name:(null===n||void 0===n?void 0:n.name)||"",notes:(null===n||void 0===n?void 0:n.notes)||""},validationSchema:A.d({name:A.e().required("Required"),notes:A.e()}),onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?w(t):O(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},i.a.createElement(h.b,null,i.a.createElement(S.a,null,n?"Edit category":"Add category"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:t}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{autoFocus:!0,color:"primary",component:D.b,disabled:a,label:"Category Name",name:"name",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{color:"primary",component:D.b,disabled:a,label:"Category Notes",name:"notes",type:"text",fullWidth:!0})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{disabled:a,color:"primary",type:"submit",variant:"contained"},n?a?"Updating...":"Update":a?"Adding...":"Add"),i.a.createElement(g.a,{disabled:a,onClick:b,variant:"contained"},"Cancel"))))))})),B=n(21),z=n(255),H=n(84),Y=n.n(H),J=function(e){return i.a.createElement(Y.a,Object.assign({components:{EditRow:function(e){return i.a.createElement(H.MTableEditRow,Object.assign({},e,{onKeyDown:function(t){27===t.keyCode&&e.onEditingCanceled(e.mode,e.data)}}))}}},e))},K=n(861),$=n(863),Q=n(477),Z=n(330),X=Object(b.a)((function(e){return{actionButton:{color:e.palette.text.disabled}}})),ee=function(e){var t=X(),n=e.className||"";return i.a.createElement(Q.a,{arrow:!0,enterTouchDelay:0,title:e.action},i.a.createElement(Z.a,{"aria-label":e.action,className:"".concat(t.actionButton," ").concat(n),onClick:function(t){t.stopPropagation(),e.onClick()},onFocus:function(e){return e.stopPropagation()},size:e.size},e.children))},te=function(e){var t=e.data,n=e.name,a=e.onDelete,r=Object(c.useState)(!1),o=Object(j.a)(r,2),l=o[0],s=o[1],u=function(){s(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ee,{action:"Delete selected "+n+"s",onClick:function(){s(!0)}},i.a.createElement($.a,null)),i.a.createElement(P.a,{open:l,onClick:function(e){return e.stopPropagation()},onClose:u,onFocus:function(e){return e.stopPropagation()}},i.a.createElement(S.a,null,"Delete selected ",n,"s?"),i.a.createElement(N.a,null,i.a.createElement(K.a,{component:"div"},"This action will permanently delete all of the selected ",n,"s.")),i.a.createElement(C.a,null,i.a.createElement(g.a,{onClick:function(){s(!1),a(t)},color:"secondary",variant:"contained",autoFocus:!0},"Delete ",n,"s"),i.a.createElement(g.a,{onClick:u,variant:"contained"},"Cancel"))))},ne=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onDelete:function(t){return e({type:"DELETE_CATEGORY",payload:M.a.Categories.delete(t),snackbar:{message:"Category deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_CATEGORIES",payload:M.a.Categories.deleteMany(t),snackbar:{message:"".concat(t.length," categor").concat(t.length>1?"ies":"y"," deleted"),variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_CATEGORY",payload:M.a.Categories.update(t),snackbar:{message:"Category updated",variant:"success"}})}}}))((function(e){var t=e.categories,n=e.onDelete,a=e.onDeleteMany,r=e.onUpdate,o=Object(c.useState)([]),l=Object(j.a)(o,2),s=l[0],u=l[1],d=Object(c.useState)([{title:"Name",field:"name"},{title:"Notes",field:"notes"}]),m=Object(j.a)(d,1)[0],p=function(e){var t=e.map((function(e){return e.slug}));a(t)};return Object(c.useEffect)((function(){u(t)}),[t]),i.a.createElement(J,{title:"Categories",columns:m,data:s,components:{Action:function(e){return"function"===typeof e.action.icon?e.action.icon(e.data):i.a.createElement(z.MTableAction,e)}},localization:{body:{emptyDataSourceMessage:"No categories found",editRow:{deleteText:"Delete category? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{icon:function(e){return i.a.createElement(te,{data:e,name:"categorie",onDelete:p})},position:"toolbarOnSelect",tooltip:"Delete selected categories"}],editable:{onRowUpdate:function(e,t){return new Promise((function(n,a){var c=Object(B.a)(s);c[t.tableData.id]=e,u(Object(B.a)(c)),r(e),n()}))},onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(s),c=e.tableData.id;r.splice(c,1),u(Object(B.a)(r)),n(e),t()}))}}})})),ae=n(129),re=Object(b.a)((function(e){return{headerLeft:{alignItems:"center",display:"flex"},headerRight:{alignItems:"center",display:"flex",justifyContent:"flex-end"},pageHeader:{marginBottom:e.spacing(4)}}})),ce=function(e){var t=e.children,n=e.title,a=re();return i.a.createElement(T.a,{container:!0,spacing:2,className:a.pageHeader},i.a.createElement(T.a,{item:!0,xs:12,md:6,className:a.headerLeft},i.a.createElement(ae.a,{variant:"h4"},n)),i.a.createElement(T.a,{item:!0,xs:12,md:6,className:a.headerRight},t))},ie=n(472),oe=Object(b.a)((function(e){return{message:{fontStyle:"italic"},root:{alignItems:"center",display:"flex",justifyContent:"center",minWidth:e.spacing(40)},spinner:{marginRight:e.spacing(2)}}})),le=function(e){var t=e.message,n=oe();return i.a.createElement("div",{className:n.root},i.a.createElement(ie.a,{className:n.spinner}),i.a.createElement(ae.a,{className:n.message},t||"Loading..."))},se=Object(b.a)((function(e){return{button:{marginRight:e.spacing(2),"& a":{color:"inherit",textDecoration:"none"}}}})),ue=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onLoad:function(){return e({type:"CATEGORIES_PAGE_LOADED",payload:M.a.Categories.getAll()})},onUnload:function(){return e({type:"CATEGORIES_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded,r=se();return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(ce,{title:"Manage Categories"},i.a.createElement(g.a,{className:r.button,color:"secondary"},i.a.createElement(f.a,{to:"/ingredients"},"Manage ingredients")),i.a.createElement(q,null)),a?i.a.createElement(ne,null):i.a.createElement(le,null))})),de=n(856),me=n(476),pe=n(561),Ee=n.n(pe),fe=function(e){return i.a.createElement("img",Object.assign({alt:"Chem Cash Logo",src:Ee.a},e))},be=Object(b.a)((function(e){return{title:{color:"white",flexGrow:1},logo:{height:65,marginTop:e.spacing(2),marginRight:e.spacing(3),marginBottom:e.spacing(2)}}})),ge=Object(r.c)((function(e){return{navTabValue:e.nav.navTabValue}}),(function(e){return{onClickLogout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=be(),n=e.navTabValue;return e.currentUser?i.a.createElement(de.a,{position:"static"},i.a.createElement(p.a,null,i.a.createElement(me.a,null,i.a.createElement(fe,{className:t.logo}),i.a.createElement(ae.a,{variant:"h5",align:"center",className:t.title},n&&n.charAt(0).toUpperCase()+n.slice(1)),i.a.createElement(g.a,{color:"inherit",onClick:e.onClickLogout},"Logout")))):null})),Oe=n(106),ve=n(475),ye=Object(b.a)((function(e){return{paper:Object(Oe.a)({},e.breakpoints.up("lg"),{maxWidth:"420px"})}})),je=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.ingredients),{},{categories:e.categories.categories})}),(function(e){return{onAdd:function(t){return e({type:"ADD_INGREDIENT",payload:M.a.Ingredients.add(t),snackbar:{message:"Ingredient added",variant:"success"}})},onExit:function(){return e({type:"INGREDIENT_DIALOG_UNLOADED"})}}}))((function(e){var t=e.categories,n=e.errors,a=e.hideButton,r=e.ingredient,o=e.inProgress,l=e.isOpen,s=e.onAdd,u=e.onClose,d=e.onExit,m=Object(c.useState)(!1),p=Object(j.a)(m,2),f=p[0],b=p[1],O=Object(_.a)(),w=Object(L.a)(O.breakpoints.down("md")),k=ye(),R=function(){b(!1)},U=function(e){s(Object(E.a)({},e))};return Object(c.useEffect)((function(){o||n||b(!1)}),[o]),Object(c.useEffect)((function(){b(!!l)}),[l]),i.a.createElement(i.a.Fragment,null,!a&&i.a.createElement(I,{item:"ingredient",onClick:function(){b(!0)}}),i.a.createElement(P.a,{classes:{paper:k.paper},fullScreen:w,fullWidth:!0,onClick:function(e){return e.stopPropagation()},onClose:R,onFocus:function(e){return e.stopPropagation()},open:f,TransitionProps:{onExit:function(){d(),u&&u()}}},i.a.createElement(h.c,{initialValues:{category:(null===r||void 0===r?void 0:r.category)||"",name:(null===r||void 0===r?void 0:r.name)||"",notes:(null===r||void 0===r?void 0:r.notes)||""},validationSchema:A.d({category:A.e().required("Required"),name:A.e().required("Required"),notes:A.e()}),onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},i.a.createElement(h.b,null,i.a.createElement(S.a,null,"Add ingredient"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:n}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{autoFocus:!0,color:"primary",component:D.b,disabled:o,id:"name",label:"Ingredient Name",name:"name",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{color:"primary",component:D.b,disabled:o,id:"category",label:"Ingredient Category",name:"category",type:"select",select:!0,fullWidth:!0},t.map((function(e){return i.a.createElement(ve.a,{key:e._id,value:e._id},e.name)})))),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{color:"primary",component:D.b,disabled:o,id:"notes",label:"Ingredient Notes",name:"notes",type:"text",fullWidth:!0})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{disabled:o,color:"primary",type:"submit",variant:"contained"},o?"Adding...":"Add"),i.a.createElement(g.a,{disabled:o,onClick:R,variant:"contained"},"Cancel"))))))})),he=Object(r.c)((function(e){return{categories:e.categories.categories,ingredients:e.ingredients.ingredients}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_INGREDIENT",payload:M.a.Ingredients.delete(t),snackbar:{message:"Ingredient deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_INGREDIENTS",payload:M.a.Ingredients.deleteMany(t),snackbar:{message:"".concat(t.length," ingredient").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_INGREDIENT",payload:M.a.Ingredients.update(t),snackbar:{message:"Ingredient updated",variant:"success"}})}}}))((function(e){var t=e.categories,n=e.ingredients,a=e.onDelete,r=e.onDeleteMany,o=e.onUpdate,l=Object(c.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],m=Object(c.useState)([{title:"Name",field:"name"},{title:"Category",field:"category",lookup:t.reduce((function(e,t){return e[t._id]=t.name,e}),{})},{title:"Notes",field:"notes"}]),p=Object(j.a)(m,1)[0],E=function(e){var t=e.map((function(e){return e.slug}));r(t)};return Object(c.useEffect)((function(){d(n)}),[n]),i.a.createElement(J,{title:"Ingredients",columns:p,data:u,components:{Action:function(e){return"function"===typeof e.action.icon?e.action.icon(e.data):i.a.createElement(z.MTableAction,e)}},localization:{body:{emptyDataSourceMessage:"No ingredients found",editRow:{deleteText:"Delete ingredient? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{icon:function(e){return i.a.createElement(te,{data:e,name:"ingredient",onDelete:E})},position:"toolbarOnSelect",tooltip:"Delete selected ingredients"}],editable:{onRowUpdate:function(e,t){return new Promise((function(n,a){var r=Object(B.a)(u);r[t.tableData.id]=e,d(Object(B.a)(r)),o(e),n()}))},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),a(e),t()}))}}})})),De=Object(b.a)((function(e){return{button:{marginRight:e.spacing(2),"& a":{color:"inherit",textDecoration:"none"}}}})),Ae=Object(r.c)((function(e){return Object(E.a)({},e.ingredients)}),(function(e){return{onLoad:function(){return e({type:"INGREDIENTS_PAGE_LOADED",payload:Promise.all([M.a.Ingredients.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"INGREDIENTS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded,r=De();return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(ce,{title:"Manage Ingredients"},i.a.createElement(g.a,{className:r.button,color:"secondary"},i.a.createElement(f.a,{to:"/ingredients/categories"},"Manage categories")),i.a.createElement(je,null)),a?i.a.createElement(he,null):i.a.createElement(le,null))})),_e=n(864),Le=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),Pe=Object(r.c)((function(e){return Object(E.a)({},e.users)}),(function(e){return{onAdd:function(t){return e({type:"ADD_USER",payload:M.a.Auth.register(t),snackbar:{message:"User added",variant:"success"}})},onExit:function(){return e({type:"USER_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_USER",payload:M.a.Users.update(t),snackbar:{message:"User updated",variant:"success"}})}}}))((function(e){var t=e.errors,n=e.inProgress,a=e.onAdd,r=e.onExit,o=e.onUpdate,l=e.user,s=Object(c.useState)(!1),u=Object(j.a)(s,2),d=u[0],m=u[1],p=Object(_.a)(),f=Object(L.a)(p.breakpoints.down("md")),b=Le(),O=function(){m(!0)},R=function(){m(!1)},I=function(e){a(Object(E.a)(Object(E.a)({},e),{},{role:"subscriber"}))},U=function(e){o(Object(E.a)(Object(E.a)({},l),e))};return Object(c.useEffect)((function(){n||t||m(!1)}),[n]),i.a.createElement(i.a.Fragment,null,l?i.a.createElement(ee,{action:"Edit user",onClick:O},i.a.createElement(_e.a,null)):i.a.createElement(w.a,{color:"primary",onClick:O,variant:"extended"},i.a.createElement(k.a,{className:b.icon}),"Add user"),i.a.createElement(P.a,{fullScreen:f,open:d,onClose:R,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},TransitionProps:{onExit:r}},i.a.createElement(h.c,{initialValues:{firstName:(null===l||void 0===l?void 0:l.firstName)||"",lastName:(null===l||void 0===l?void 0:l.lastName)||"",username:(null===l||void 0===l?void 0:l.username)||"",password:""},validationSchema:A.d({firstName:A.e().required("Required"),lastName:A.e().required("Required"),username:A.e().required("Required"),password:A.e().required(l?"":"Required")}),onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l?U(t):I(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},i.a.createElement(h.b,null,i.a.createElement(S.a,null,l?"Edit User":"Add User"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:t}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(h.a,{autoFocus:!l,color:"primary",component:D.b,disabled:n,label:"First Name",name:"firstName",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(h.a,{color:"primary",component:D.b,disabled:n,label:"Last Name",name:"lastName",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(h.a,{color:"primary",component:D.b,disabled:!!l||n,label:"Username",name:"username",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(h.a,{color:"primary",component:D.b,disabled:n,label:"Password",name:"password",type:"text",fullWidth:!0})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:n,type:"submit",variant:"contained"},l?n?"Updating...":"Update":n?"Adding...":"Add"),i.a.createElement(g.a,{disabled:n,onClick:R,variant:"contained"},"Cancel"))))))})),Se=n(853),Ne=n(855),Te=n(551),Ce=n(854),we=n(865),ke=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_USER",payload:M.a.Users.delete(t),snackbar:{message:"User deleted",variant:"success"}})}}}))((function(e){var t=e.onDelete,n=e.user,a=Object(c.useState)(!1),r=Object(j.a)(a,2),o=r[0],l=r[1],s=function(){l(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ee,{action:"Delete user",onClick:function(){l(!0)}},i.a.createElement($.a,null)),i.a.createElement(P.a,{open:o,onClick:function(e){return e.stopPropagation()},onClose:s,onFocus:function(e){return e.stopPropagation()}},i.a.createElement(S.a,null,"Delete User"),i.a.createElement(N.a,null,i.a.createElement(K.a,{component:"div"},"Are you sure you want to delete"," ",i.a.createElement("b",null,n.firstName," ",n.lastName),"? This action will permanently delete:",i.a.createElement("ul",null,i.a.createElement("li",null,"all categories"),i.a.createElement("li",null,"all ingredients"),i.a.createElement("li",null,"all meals"),i.a.createElement("li",null,"all plans"),i.a.createElement("li",null,"all recipes"),i.a.createElement("li",null,"all settings"),i.a.createElement("li",null,"all stores")),"associated with this user. This action ",i.a.createElement("b",null,"cannot be undone"),".")),i.a.createElement(C.a,null,i.a.createElement(g.a,{onClick:function(){l(!1),t(n)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),i.a.createElement(g.a,{onClick:s,variant:"contained"},"Cancel"))))})),Re=Object(b.a)((function(e){return{userDetails:{display:"block"},userHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},userUsername:{marginRight:e.spacing(2),minWidth:e.spacing(12)},userName:{flexGrow:"1"}}})),Ie=function(e){var t=e.users,n=Object(c.useState)(!1),a=Object(j.a)(n,2),r=a[0],o=a[1],l=Re();return i.a.createElement(i.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return i.a.createElement(Se.a,{expanded:r===e.username,key:e.username,onChange:(t=e.username,function(e,n){o(!!n&&t)})},i.a.createElement(Ne.a,{expandIcon:i.a.createElement(we.a,null)},i.a.createElement("div",{className:l.userHeader},i.a.createElement(Te.a,{color:"secondary",label:e.username,className:l.userUsername}),i.a.createElement(ae.a,{className:l.userName,variant:"h5"},e.firstName," ",e.lastName),i.a.createElement(Pe,{user:e}),i.a.createElement(ke,{user:e}))),i.a.createElement(Ce.a,{className:l.userDetails},i.a.createElement(ae.a,{variant:"h6"},"Account Details"),i.a.createElement(ae.a,null,i.a.createElement("em",null,"Coming soon!"))));var t})):i.a.createElement(ae.a,null,"No users found"))},Ue=Object(r.c)((function(e){return Object(E.a)({},e.users)}),(function(e){return{onLoad:function(){return e({type:"MANAGE_USERS_PAGE_LOADED",payload:M.a.Users.getAll()})},onUnload:function(){return e({type:"MANAGE_USERS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.users;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(ce,{title:"Manage Users"},i.a.createElement(Pe,null)),i.a.createElement(Ie,{users:a}))})),xe=n(883),Ge=n(394),Me=n(217),Ve=n.n(Me),Fe=n(218),We=n.n(Fe),qe=function(e){var t=e.name,n=e.onChange,a=e.recipes,r=e.values,o=Object(c.useState)([]),l=Object(j.a)(o,2),s=l[0],u=l[1],d=a.filter((function(e){return!1===e.isMeal})).map((function(e){var t=e.title[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)}));return Object(c.useEffect)((function(){u(d)}),[a]),i.a.createElement(xe.a,{autoHighlight:!0,autoSelect:!0,getOptionLabel:function(e){return e.title},getOptionSelected:function(e,t){return e._id===t._id},groupBy:function(e){return e.firstLetter},multiple:!0,noOptionsText:"No recipes have been created",onChange:function(e,a){n(t,a)},options:s,renderInput:function(e){return i.a.createElement(Ge.a,Object.assign({},e,{label:"Recipes",variant:"outlined"}))},renderOption:function(e,t){var n=t.inputValue,a=We()(e.title,n),r=Ve()(e.title,a);return i.a.createElement("div",null,r.map((function(e,t){return i.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))},value:r})},Be=["","Breakfast","Lunch","Dinner","Snack","Other"],ze=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.meals),{},{recipes:e.recipes.recipes})}),(function(e){return{onAdd:function(t){return e({type:"ADD_MEAL",payload:M.a.Meals.add(t),snackbar:{message:"Meal added",variant:"success"}})},onExit:function(){return e({type:"MEAL_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_MEAL",payload:M.a.Meals.update(t),snackbar:{message:"Meal updated",variant:"success"}})}}}))((function(e){var t,n,a,r,o=e.editor,l=e.errors,s=e.inProgress,u=e.onAdd,d=e.onExit,m=e.onUpdate,p=e.recipes,f=Object(_.a)(),b=Object(L.a)(f.breakpoints.down("md")),O=Object(c.useState)(!1),w=Object(j.a)(O,2),k=w[0],R=w[1],U=function(){R(!1)},x=function(e){u(Object(E.a)({},e))},M=function(e){m(Object(E.a)(Object(E.a)({},o.meal),e))};return Object(c.useEffect)((function(){s||l||R(!1)}),[s]),Object(c.useEffect)((function(){R(!!o.meal)}),[o.meal]),i.a.createElement(i.a.Fragment,null,i.a.createElement(I,{item:"meal",onClick:function(){R(!0)}}),i.a.createElement(P.a,{fullWidth:!0,fullScreen:b,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:U,onFocus:function(e){return e.stopPropagation()},open:k,TransitionProps:{onExit:d}},i.a.createElement(h.c,{initialValues:{title:(null===(t=o.meal)||void 0===t?void 0:t.title)||"",recipes:(null===(n=o.meal)||void 0===n?void 0:n.recipes)||[],mealType:(null===(a=o.meal)||void 0===a?void 0:a.mealType)||"",notes:(null===(r=o.meal)||void 0===r?void 0:r.notes)||""},validationSchema:A.d({title:A.e().required("Required"),recipes:A.a(),mealType:A.e().required("Required"),notes:A.e()}),onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.meal?M(t):x(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return i.a.createElement(h.b,null,i.a.createElement(S.a,null,o.meal?"Update meal":"Add meal"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:l}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{autoFocus:!o.meal,component:D.b,disabled:s,id:"title",label:"Meal Title",name:"title",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{component:D.b,disabled:s,id:"mealType",label:"Meal Type",name:"mealType",type:"select",select:!0,fullWidth:!0},Be.map((function(e){var t=e.toLowerCase();return i.a.createElement(ve.a,{key:t,value:t},e)})))),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{component:D.b,disabled:s,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(qe,{onChange:e.setFieldValue,name:"recipes",recipes:p.filter((function(e){return!e.archived})),values:e.values.recipes})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:s,type:"submit",variant:"contained"},o.meal?s?"Updating...":"Update":s?"Adding...":"Add"),i.a.createElement(g.a,{disabled:s,onClick:U,variant:"contained"},"Cancel")))}))))})),He=n(223),Ye=Object(r.c)((function(e){return{meals:e.meals.meals,recipes:e.recipes.recipes}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_MEAL",payload:M.a.Meals.delete(t),snackbar:{message:"Meal deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_MEALS",payload:M.a.Meals.deleteMany(t),snackbar:{message:"".concat(t.length," meal").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onLoadUpdate:function(t){return e({type:"MEAL_DIALOG_LOADED",meal:t})},onUpdateArchiveStatus:function(t,n){return e({type:"UPDATE_MEAL",payload:M.a.Meals.update(t),snackbar:{message:"Meal ".concat(n),variant:"success"}})}}}))((function(e){var t=e.filter,n=e.meals,a=e.onDelete,r=e.onDeleteMany,o=e.onLoadUpdate,l=e.onUpdateArchiveStatus,s=e.recipes,u=Object(c.useState)([]),d=Object(j.a)(u,2),m=d[0],p=d[1],f=Object(c.useState)([{title:"Title",field:"title"},{title:"Meal Type",field:"mealType",lookup:Be.reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{})}]),b=Object(j.a)(f,1)[0],g=function(e){var t=e.map((function(e){return e.slug}));r(t)};return Object(c.useEffect)((function(){var e=s.filter((function(e){return!0===e.isMeal})),a=[].concat(Object(B.a)(e),Object(B.a)(n)).sort((function(e,t){return e.title.localeCompare(t.title)})),r="archived"===t?a.filter((function(e){return!0===e.archived})):"unarchived"===t?a.filter((function(e){return!1===e.archived})):a;p(r)}),[n,s]),i.a.createElement(Y.a,{title:"Meals",columns:b,data:m,components:{Action:function(e){return"function"===typeof e.action.icon?e.action.icon(e.data):i.a.createElement(H.MTableAction,e)},Container:function(e){return i.a.createElement(He.a,Object.assign({},e,{elevation:"archived"===t?0:1}))}},localization:{body:{emptyDataSourceMessage:"No meals found",editRow:{deleteText:"Delete meal? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,selectionProps:function(e){return{disabled:!!e.isMeal}},toolbar:!0},actions:[{action:function(e){return{disabled:!!e.isMeal,icon:"edit",onClick:function(e,t){o(t)},tooltip:e.isMeal?"Cannot edit recipes here":"Update meal"}},position:"row"},{action:function(e){return{disabled:!!e.isMeal,icon:e.archived?"unarchive":"archive",onClick:function(e,t){return function(e){var t=e.archived?"unarchived":"archived";l(Object(E.a)(Object(E.a)({},e),{},{archived:!e.archived}),t)}(t)},tooltip:e.archived?"Unarchive meal":"Archive meal"}},position:"row"},{icon:function(e){return i.a.createElement(te,{data:e,name:"meal",onDelete:g})},position:"toolbarOnSelect",tooltip:"Delete selected meals"}],editable:{isDeletable:function(e){return!e.isMeal},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(B.a)(m),c=e.tableData.id;r.splice(c,1),p(Object(B.a)(r)),a(e),t()}))}}})})),Je=Object(r.c)((function(e){return{pageLoaded:e.meals.pageLoaded}}),(function(e){return{onLoad:function(){return e({type:"MEALS_PAGE_LOADED",payload:Promise.all([M.a.Meals.getAll(),M.a.Recipes.getAll()])})},onUnload:function(){return e({type:"MEALS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded,r=Object(c.useState)(!1),o=Object(j.a)(r,2),l=o[0],s=o[1];return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(ce,{title:"Manage Meals"},i.a.createElement(ze,null)),a?i.a.createElement(T.a,{container:!0,spacing:4},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(Ye,{filter:"unarchived"})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h5",gutterBottom:!0},"Archived Meals"),i.a.createElement(Se.a,{onChange:function(e,t){return s(t)}},i.a.createElement(Ne.a,{expandIcon:i.a.createElement(we.a,null)},"Click to ",l?"hide":"show"," archived meals"),i.a.createElement(Ce.a,{style:{display:"block"}},i.a.createElement(Ye,{filter:"archived"}))))):i.a.createElement(le,null))})),Ke=n(857),$e=n(858),Qe=n(473),Ze=n(867),Xe=n(868),et=n(562),tt=Object(b.a)({nav:{position:"fixed",bottom:0,width:"100%",zIndex:"1000"}}),nt=Object(r.c)((function(e){return{currentUser:e.common.currentUser,navTabValue:e.nav.navTabValue,path:e.router.location.pathname}}),(function(e){return{onLoad:function(t,n){return e({type:"NAV_LOADED",value:t,redirectTo:n})},onTabChange:function(t,n){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:n})},onUnload:function(){return e({type:"NAV_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.navTabValue,a=e.onLoad,r=e.onTabChange,o=e.onUnload,l=e.path,s=tt(),u=t.role,d=function(e){r(e,"/".concat(e))};return Object(c.useEffect)((function(){var e=l.split("/")[1];if(e&&""!==e)a(e,"/".concat(e));else{var t="admin"===u?"users":"plans";a(t,"/".concat(t))}return function(){o()}}),[]),Object(c.useEffect)((function(){var e=Object(et.loadCSS)("https://use.fontawesome.com/releases/v5.15.3/css/all.css",document.querySelector("#font-awesome-css"));return function(){e.parentNode.removeChild(e)}})),"admin"===u?i.a.createElement(Ke.a,{className:s.nav,onChange:function(e,t){d(t)},showLabels:!0,value:n},i.a.createElement($e.a,{label:"Users",icon:i.a.createElement(Ze.a,null),value:"users"}),i.a.createElement($e.a,{label:"Settings",icon:i.a.createElement(Xe.a,null),value:"settings"})):i.a.createElement(Ke.a,{className:s.nav,onChange:function(e,t){d(t)},showLabels:!0,value:n},i.a.createElement($e.a,{label:"Plans",icon:i.a.createElement(Qe.a,{className:"fa fa-calendar-week"}),value:"plans"}),i.a.createElement($e.a,{label:"Meals",icon:i.a.createElement(Qe.a,{className:"fa fa-utensils"}),value:"meals"}),i.a.createElement($e.a,{label:"Recipes",icon:i.a.createElement(Qe.a,{className:"fa fa-hamburger"}),value:"recipes"}),i.a.createElement($e.a,{label:"Ingredients",icon:i.a.createElement(Qe.a,{className:"fa fa-carrot"}),value:"ingredients"}),i.a.createElement($e.a,{label:"Settings",icon:i.a.createElement(Xe.a,null),value:"settings"}))})),at=Object(b.a)((function(e){return{wrapper:{marginTop:e.spacing(4),marginBottom:e.spacing(11)}}})),rt=function(e){var t=at();return i.a.createElement("div",{className:t.wrapper},e.children)},ct=function(e){return i.a.createElement(rt,null,i.a.createElement(p.a,null,i.a.createElement(ae.a,{variant:"h2"},"Error 404: Page Not Found")))},it=n(399),ot=n(397),lt=n(347),st=n(869),ut=Object(b.a)((function(e){return{checked:{"& + span":{color:e.palette.primary.light,textDecoration:"line-through","& svg":{opacity:.5}}},icon:{marginLeft:e.spacing(1)},listItem:{alignItems:"center",display:"flex"}}})),dt=function(e){var t=e.list,n=ut(),a=Object(c.useState)({}),r=Object(j.a)(a,2),o=r[0],l=r[1],s=function(e){l(Object(E.a)(Object(E.a)({},o),{},Object(Oe.a)({},e.target.name,e.target.checked)))};return Array.isArray(t)&&t.length>0?i.a.createElement(it.a,null,t.map((function(e){var t;return i.a.createElement(ot.a,{control:i.a.createElement(lt.a,{checked:null!==(t=o["".concat(e.name,"-").concat(e.unit)])&&void 0!==t&&t,classes:{checked:n.checked},onChange:s,name:"".concat(e.name,"-").concat(e.unit)}),key:"".concat(e.id,"-").concat(e.unit),label:i.a.createElement("span",{className:n.listItem},e.quantity&&e.unit?"".concat(e.name," (").concat(e.quantity," ").concat(e.unit,")"):"".concat(e.name),i.a.createElement(Q.a,{arrow:!0,enterTouchDelay:0,title:"Needed for: ".concat(e.recipes.join(", "))},i.a.createElement(st.a,{className:n.icon,color:"secondary"})))})}))):i.a.createElement(ae.a,null,t)},mt=n(324),pt=n(325),Et=n(349),ft=function(e){var t=e.defaultStore,n=e.onChange,a=e.stores,r=Object(c.useState)(null!==t&&void 0!==t?t:""),o=Object(j.a)(r,2),l=o[0],s=o[1];return i.a.createElement(mt.a,{fullWidth:!0},i.a.createElement(pt.a,{id:"store-selector-label"},"Select a Store"),i.a.createElement(Et.a,{id:"store-selector",labelId:"store-selector-label",onChange:function(e){var t=e.target.value;n(t),s(t)},value:l},!l&&i.a.createElement(ve.a,{key:"blank",value:""}),a.map((function(e){return i.a.createElement(ve.a,{key:e._id,value:e._id},e.name)}))))},bt=Object(r.c)((function(e){return{categories:e.categories.categories,defaultStore:e.common.settings.defaultStore,ingredients:e.ingredients.ingredients,meals:e.meals.meals,recipes:e.recipes.recipes,stores:e.stores.stores,viewer:e.plans.viewer}}),(function(e){return{onCopy:function(){return e({type:"PLAN_LIST_COPIED",snackbar:{message:"List copied",variant:"success"}})},onExit:function(){return e({type:"PLAN_LIST_DIALOG_UNLOADED"})}}}))((function(e){var t,n=e.categories,a=e.defaultStore,r=e.ingredients,o=e.meals,l=e.onCopy,s=e.onExit,u=e.recipes,d=e.stores,m=e.viewer,p=Object(c.useState)([]),f=Object(j.a)(p,2),b=f[0],O=f[1],v=Object(c.useState)(!1),y=Object(j.a)(v,2),h=y[0],D=y[1],A=Object(c.useState)(a),w=Object(j.a)(A,2),k=w[0],R=w[1],I=Object(_.a)(),U=Object(L.a)(I.breakpoints.down("md")),x=function(){if(m.plan){var e;if(0===n.length)return"No categories found";for(var t=[],a=0,c=Object.entries(m.plan.meals);a<c.length;a++){var i=Object(j.a)(c[a],2),l=(i[0],i[1].map((function(e){var t;return null!==(t=o.find((function(t){return t._id===e})))&&void 0!==t?t:u.find((function(t){return t._id===e}))})));t=[].concat(Object(B.a)(t),Object(B.a)(l))}if(0===t.length)return"No meals found";var s=t.flatMap((function(e){return e.hasOwnProperty("recipes")?e.recipes:e}));if(0===s.length)return"No recipes found";var p=s.flatMap((function(e){return e.ingredients.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{recipe:e.title})}))})).map((function(e){var t=r.find((function(t){return t._id===e.id})),a=n.find((function(e){return e._id===t.category}));return Object(E.a)(Object(E.a)({},e),{},{category:a._id,name:t.name})}));if(0===p.length)return"No ingredients found";var f=p.reduce((function(e,t){var n={id:t.id,name:t.name,quantity:t.quantity,recipes:[t.recipe],unit:t.unit};return e.hasOwnProperty(t.category)?e[t.category].push(n):e[t.category]=[n],e}),{}),b=[],g=d.find((function(e){return e._id===k}));return(null!==(e=null===g||void 0===g?void 0:g.categories)&&void 0!==e?e:n).forEach((function(e){var t,n=(null!==(t=f[e._id])&&void 0!==t?t:[]).reduce((function(e,t){var n=function(e){return e.id===t.id&&e.unit===t.unit};if(e.find((function(e){return n(e)}))){var a=e.findIndex((function(e){return n(e)}));e[a]=Object(E.a)(Object(E.a)({},e[a]),{},{quantity:e[a].quantity+t.quantity,recipes:e[a].recipes.concat(t.recipes.filter((function(t){return e[a].recipes.indexOf(t)<0})))})}else e.push(t);return e}),[]);b.push(n)})),b.flat()}return"No plan found"},G=function(){D(!1)};return Object(c.useEffect)((function(){h&&O(x())}),[h]),Object(c.useEffect)((function(){"list"===m.type&&D(!!m.plan)}),[m.plan]),Object(c.useEffect)((function(){O(x())}),[k]),i.a.createElement(P.a,{fullScreen:U,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:G,onFocus:function(e){return e.stopPropagation()},open:h,TransitionProps:{onExit:function(){R(a),O([]),s()}}},i.a.createElement(S.a,null,"Shopping List for ",null===(t=m.plan)||void 0===t?void 0:t.title),i.a.createElement(N.a,null,i.a.createElement(T.a,{container:!0,spacing:2},d.length>0&&i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ft,{defaultStore:a,onChange:function(e){R(e)},stores:d})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(dt,{list:b})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:!Array.isArray(b),onClick:function(){var e=b.map((function(e){return"".concat(e.name," (").concat(e.quantity," ").concat(e.unit,")")})).join("\n");navigator.clipboard.writeText(e).then((function(){l()}),(function(e){console.error("error",e)}))},variant:"contained"},"Copy list"),i.a.createElement(g.a,{onClick:G,variant:"contained"},"Close")))})),gt=n(90),Ot=n(870),vt=function(e){var t=e.index,n=e.meal,a=e.onRemove,r=e.uniqueId,c=Object(_.a)();return i.a.createElement(gt.Draggable,{key:r,draggableId:r,index:t},(function(e,t){return i.a.createElement(He.a,Object.assign({elevation:3,ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(o=t.isDragging,l=e.draggableProps.style,Object(E.a)({alignItems:"center",background:o?c.palette.secondary.light:"white",display:"flex",justifyContent:"space-between",marginBottom:c.spacing(1),padding:c.spacing(1),userSelect:"none"},l))}),n.title,i.a.createElement(Z.a,{id:r,onClick:a,size:"small"},i.a.createElement(Ot.a,null)));var o,l}))},yt=function(e){var t=e.meals,n=e.name,a=e.onChange,r=Object(c.useState)([]),o=Object(j.a)(r,2),l=o[0],s=o[1],u=t.map((function(e){var t=e.title[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)}));return Object(c.useEffect)((function(){s(u)}),[t]),i.a.createElement(xe.a,{autoHighlight:!0,autoSelect:!0,getOptionLabel:function(e){return e.title},groupBy:function(e){return e.firstLetter},noOptionsText:"No meals have been created",onChange:function(e,t){a(n,null===t||void 0===t?void 0:t._id)},options:l,renderInput:function(e){return i.a.createElement(Ge.a,Object.assign({},e,{autoFocus:!0,label:"Meals",variant:"outlined"}))},renderOption:function(e,t){var n=t.inputValue,a=We()(e.title,n),r=Ve()(e.title,a);return i.a.createElement("div",null,r.map((function(e,t){return i.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}})},jt=function(e){var t=e.day,n=e.meals,a=e.onAdd,r=Object(c.useState)(!1),o=Object(j.a)(r,2),l=o[0],s=o[1],u=Object(_.a)(),d=Object(L.a)(u.breakpoints.down("md")),m=function(){s(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Q.a,{arrow:!0,title:"Add meal to ".concat(t)},i.a.createElement(w.a,{color:"secondary",onClick:function(){s(!0)},size:"small"},i.a.createElement(k.a,null))),i.a.createElement(P.a,{fullScreen:d,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:m,onFocus:function(e){return e.stopPropagation()},open:l,TransitionProps:{onExit:function(){}}},i.a.createElement(h.c,{initialValues:{meal:""},onSubmit:function(e){!function(e){var n={day:t,mealId:e.meal};a(n),m()}(e)}},(function(e){return i.a.createElement(h.b,null,i.a.createElement(S.a,null,"Add meal to ",t),i.a.createElement(N.a,null,i.a.createElement(yt,{meals:n,name:"meal",onChange:e.setFieldValue})),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:!e.values.meal,type:"submit",variant:"contained"},"Add"),i.a.createElement(g.a,{onClick:m,variant:"contained"},"Cancel")))}))))},ht=Object(b.a)((function(e){var t;return{dayHeader:(t={alignItems:"center",borderBottom:"2px solid ".concat(e.palette.secondary.light),display:"flex",justifyContent:"space-between",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(1),"px ").concat(e.spacing(1),"px"),width:"100%"},Object(Oe.a)(t,e.breakpoints.up("lg"),{width:"50%"}),Object(Oe.a)(t,"& > button",{visibility:"hidden"}),Object(Oe.a)(t,"&:hover > button",{visibility:"visible"}),t)}})),Dt=function(e){var t=e.day,n=e.mealPlan,a=e.meals,r=e.onAdd,c=e.onRemove,o=Object(_.a)(),l=Object(L.a)(o.breakpoints.down("md")),s=ht(),u=n.map((function(e){return a.find((function(t){return t._id===e}))}));return i.a.createElement("div",null,i.a.createElement("div",{className:s.dayHeader},i.a.createElement(ae.a,{color:"primary",variant:"h6"},i.a.createElement("em",null,t)),i.a.createElement(jt,{day:t,meals:a.filter((function(e){return!e.archived})),onAdd:r})),i.a.createElement(gt.Droppable,{droppableId:t},(function(e,n){return i.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(a=n.isDraggingOver,{border:a?"2px dashed ".concat(o.palette.primary.light):"2px dashed white",minHeight:"120px",padding:o.spacing(1),width:l?"100%":"50%"})}),u.map((function(e,n){var a="".concat(t,"-").concat(e._id,"-").concat(n);return i.a.createElement(vt,{index:n,key:a,meal:e,onRemove:c,uniqueId:a})})),e.placeholder);var a})))},At=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_t=function(e){var t=e.meals,n=e.mealPlan,a=e.name,r=e.onChange,o=Object(c.useState)(n),l=Object(j.a)(o,2),s=l[0],u=l[1],d=function(e){var t=e.day,c=e.mealId,i=Object(E.a)({},n);i[t].push(c),u(i),r(a,i)},m=function(e){var t=e.currentTarget.getAttribute("id").split("-"),c=Object(j.a)(t,2),i=c[0],o=c[1],l=Object(E.a)({},n),s=l[i].indexOf(o);l[i].splice(s,1),u(l),r(a,l)};return i.a.createElement(gt.DragDropContext,{onDragEnd:function(e){var t=e.destination,c=e.source,i=e.draggableId;if(t&&(t.droppableId!==c.droppableId||t.index!==c.index)){var o=c.droppableId,l=t.droppableId,s=i.split("-")[1],d=Object(E.a)({},n);d[o].splice(c.index,1),d[l].splice(t.index,0,s),u(d),r(a,d)}}},At.map((function(e){return i.a.createElement(Dt,{day:e,key:e,meals:t,mealPlan:s[e],onAdd:d,onRemove:m})})))},Lt=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.plans),{},{meals:e.meals.meals,recipes:e.recipes.recipes})}),(function(e){return{onAdd:function(t){return e({type:"ADD_PLAN",payload:M.a.Plans.add(t),snackbar:{message:"Plan added",variant:"success"}})},onExit:function(){return e({type:"PLAN_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_PLAN",payload:M.a.Plans.update(t),snackbar:{message:"Plan updated",variant:"success"}})}}}))((function(e){var t,n,a,r,o,l=e.editor,s=e.errors,u=e.inProgress,d=e.meals,m=e.onAdd,f=e.onExit,b=e.onUpdate,O=function(e,t){var n=Object(B.a)(e),a=t.filter((function(e){return e.isMeal})).map((function(e){return{mealType:e.mealType,notes:e.notes,recipes:[e],slug:e.slug,title:e.title,archived:e.archived,_id:e._id}}));return[].concat(Object(B.a)(n),Object(B.a)(a)).sort((function(e,t){return e.title.localeCompare(t.title)}))}(d,e.recipes),_=At.reduce((function(e,t){return e[t]=[],e}),{}),L=Object(c.useState)(!1),w=Object(j.a)(L,2),k=w[0],R=w[1],U=function(){R(!1)},x=function(e){m(Object(E.a)({},e))},M=function(e){b(Object(E.a)(Object(E.a)({},l.plan),e))};return Object(c.useEffect)((function(){u||s||R(!1)}),[u]),Object(c.useEffect)((function(){R(!!l.plan)}),[l.plan]),i.a.createElement(i.a.Fragment,null,i.a.createElement(I,{item:"plan",onClick:function(){R(!0)}}),i.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:U,onFocus:function(e){return e.stopPropagation()},open:k,scroll:"body",TransitionProps:{onExit:f}},i.a.createElement(h.c,{initialValues:{meals:(null===(t=l.plan)||void 0===t?void 0:t.meals)||_,notes:(null===(n=l.plan)||void 0===n?void 0:n.notes)||"",order:(null===(a=l.plan)||void 0===a?void 0:a.order)||0,skip:(null===(r=l.plan)||void 0===r?void 0:r.skip)||!1,title:(null===(o=l.plan)||void 0===o?void 0:o.title)||""},validationSchema:A.d({meals:A.d(),notes:A.e(),order:A.c(),skip:A.b(),title:A.e().required("Required")}),onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.plan?M(t):x(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return i.a.createElement(p.a,{disableGutters:!0},i.a.createElement(h.b,null,i.a.createElement(S.a,null,l.plan?"Update plan":"Add plan"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:s}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{autoFocus:!l.plan,component:D.b,disabled:u,id:"title",label:"Plan Title",name:"title",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{component:D.b,disabled:u,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h6"},"Meals"),i.a.createElement(_t,{meals:O,mealPlan:e.values.meals,name:"meals",onChange:e.setFieldValue})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:u,type:"submit",variant:"contained"},l.plan?u?"Updating...":"Update":u?"Adding...":"Add"),i.a.createElement(g.a,{disabled:u,onClick:U,variant:"contained"},"Cancel"))))}))))})),Pt=n(871),St=function(e){return i.a.createElement(Q.a,{title:"archived",arrow:!0},i.a.createElement(Pt.a,Object.assign({color:"primary",size:"small",style:{marginLeft:"8px"}},e)))},Nt=n(872),Tt=function(e){return i.a.createElement(Q.a,{title:"requires defrost",arrow:!0},i.a.createElement(Nt.a,Object.assign({color:"primary",size:"small",style:{marginLeft:"8px"}},e)))},Ct=n(873),wt=function(e){return i.a.createElement(Q.a,{title:"long prep time",arrow:!0},i.a.createElement(Ct.a,Object.assign({color:"primary",size:"small",style:{marginLeft:"8px"}},e)))},kt=Object(b.a)((function(e){return{dayList:{listStyle:"none",paddingLeft:e.spacing(1)},mealHeader:{padding:e.spacing(1)},mealLink:{border:"1px solid",borderColor:"white",borderRadius:e.spacing(1),padding:e.spacing(1),"&:hover":{borderColor:e.palette.secondary.light},"& a":{color:e.palette.text.primary,height:"100%",textDecoration:"none",width:"100%"}},paper:{padding:e.spacing(2)},recipeList:{listStyle:"none",paddingLeft:e.spacing(2)},verticalCenter:{alignItems:"center",display:"flex"}}})),Rt=Object(r.c)((function(e){return{meals:e.meals.meals,plan:e.plans.viewer.plan,recipes:e.recipes.recipes}}),(function(e){return{onLoadView:function(t){return e({type:"RECIPE_VIEW_LOADED",recipe:t})}}}))((function(e){var t=e.meals,n=e.onLoadView,a=e.plan,r=e.recipes,c=kt(),o=Object.keys(a.meals),l=function(e){var n=t.find((function(t){return t._id===e}));return n||r.find((function(t){return t._id===e}))},s=function(e){n(e)};return a&&i.a.createElement(He.a,{className:c.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h5"},a.title)),a.notes&&i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h6"},"Notes"),i.a.createElement(ae.a,null,a.notes)),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h5"},"Meals"),i.a.createElement("hr",null),i.a.createElement(T.a,{container:!0,item:!0,xs:12,spacing:2},o.map((function(e){var t=a.meals[e];return i.a.createElement(T.a,{item:!0,xs:12,key:e},i.a.createElement(ae.a,{variant:"h6"},e),i.a.createElement("ul",{className:c.dayList},t.map((function(e){var t=l(e);return(null===t||void 0===t?void 0:t.recipes)?i.a.createElement("li",{key:e},i.a.createElement(ae.a,{className:"".concat(c.mealHeader," ").concat(c.verticalCenter)},i.a.createElement("em",null,null===t||void 0===t?void 0:t.title),(null===t||void 0===t?void 0:t.archived)&&i.a.createElement(St,null)),i.a.createElement("ul",{className:c.recipeList},t.recipes.map((function(e){return i.a.createElement("li",{className:c.mealLink,key:e._id},i.a.createElement("a",{href:"#",onClick:function(){return s(e)}},i.a.createElement(ae.a,{className:c.verticalCenter},e.title," ",e.archived&&i.a.createElement(St,null),e.prepTime>30&&i.a.createElement(wt,null),e.defrost&&i.a.createElement(Tt,null))))})))):i.a.createElement("li",{className:c.mealLink,key:t._id},i.a.createElement("a",{href:"#",onClick:function(){return s(t)}},i.a.createElement(ae.a,{className:c.verticalCenter},null===t||void 0===t?void 0:t.title," ",(null===t||void 0===t?void 0:t.archived)&&i.a.createElement(St,null),(null===t||void 0===t?void 0:t.prepTime)>30&&i.a.createElement(wt,null),(null===t||void 0===t?void 0:t.defrost)&&i.a.createElement(Tt,null))))}))))}))))))})),It=n(874),Ut=Object(r.c)((function(e){return{plans:e.plans.plans,starredPlan:e.common.settings.starredPlan}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_PLAN",payload:M.a.Plans.delete(t),snackbar:{message:"Plan deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_PLANS",payload:M.a.Plans.deleteMany(t),snackbar:{message:"".concat(t.length," plan").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onLoadUpdate:function(t){return e({type:"PLAN_DIALOG_LOADED",plan:t})},onLoadView:function(t){return e({type:"PLAN_VIEW_LOADED",plan:t})},onSetStarred:function(t){return e({type:"SET_STARRED_PLAN",payload:M.a.Settings.update(t),snackbar:{message:"Starred plan saved",variant:"success"}})},onUpdateArchiveStatus:function(t,n){return e({type:"UPDATE_PLAN",payload:M.a.Plans.update(t),snackbar:{message:"Plan ".concat(n),variant:"success"}})},onViewShoppingList:function(t){return e({type:"PLAN_LIST_DIALOG_LOADED",plan:t})}}}))((function(e){var t=e.filter,n=e.onDelete,a=e.onDeleteMany,r=e.onLoadUpdate,o=e.onLoadView,l=e.onSetStarred,s=e.onUpdateArchiveStatus,u=e.onViewShoppingList,d=e.plans,m=e.starredPlan,p=Object(c.useState)([]),f=Object(j.a)(p,2),b=f[0],g=f[1],O=Object(c.useState)([{title:"Title",field:"title"},{title:"Notes",field:"notes"}]),v=Object(j.a)(O,1)[0],y=function(e){var t=e.map((function(e){return e.slug}));a(t)};return Object(c.useEffect)((function(){var e=Object(B.a)(d).sort((function(e,t){return e._id===m?-1:t._id===m?1:0})),n="archived"===t?e.filter((function(e){return!0===e.archived})):"unarchived"===t?e.filter((function(e){return!1===e.archived})):e;g(n)}),[d,m]),i.a.createElement(Y.a,{title:"Plans",columns:v,data:b,components:{Action:function(e){return"function"===typeof e.action.icon?e.action.icon(e.data):i.a.createElement(H.MTableAction,e)},Container:function(e){return i.a.createElement(He.a,Object.assign({},e,{elevation:"archived"===t?0:1}))}},localization:{body:{emptyDataSourceMessage:"No plans found",editRow:{deleteText:"Delete plan? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{action:function(e){return{disabled:e.archived,icon:e._id===m?"star":function(){return i.a.createElement(It.a,null)},onClick:function(e,t){return function(e){var t={starredPlan:m!==e._id?e:null};l(t)}(t)},tooltip:e._id===m?"Unstar plan":"Star plan"}},position:"row"},{icon:"list",onClick:function(e,t){u(t)},tooltip:"View shopping list",position:"row"},{icon:"visibility",onClick:function(e,t){o(t)},position:"row",tooltip:"View plan"},{icon:"edit",onClick:function(e,t){r(t)},tooltip:"Update plan",position:"row"},{action:function(e){return{icon:e.archived?"unarchive":"archive",onClick:function(e,t){return function(e){var t=e.archived?"unarchived":"archived";s(Object(E.a)(Object(E.a)({},e),{},{archived:!e.archived}),t)}(t)},tooltip:e.archived?"Unarchive plan":"Archive plan"}},position:"row"},{icon:function(e){return i.a.createElement(te,{data:e,name:"plan",onDelete:y})},position:"toolbarOnSelect",tooltip:"Delete selected plans"}],editable:{onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(b),c=e.tableData.id;r.splice(c,1),g(Object(B.a)(r)),n(e),t()}))}}})})),xt=n(563),Gt=n.n(xt),Mt=n(403),Vt=Object(b.a)((function(e){return{error:{color:"#f44336",fontSize:"0.75rem",fontWeight:400,letterSpacing:"0.03333em",lineHeight:1.66,margin:0,marginTop:"3px",textAlign:"left"}}})),Ft=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,1)[0],a=Vt();return i.a.createElement(i.a.Fragment,null,i.a.createElement(Gt.a,Object.assign({controls:["numberList","bold","italic","underline","undo","redo"],defaultValue:e.initialValue,error:n&&e.touched,label:e.placeholder,onBlur:function(){!e.readOnly&&e.onEditorBlur(e.name,!0,!1)},onChange:function(t){!e.readOnly&&e.onEditorChange(e.name,JSON.stringify(Object(Mt.convertToRaw)(t.getCurrentContent())),!1)}},e)),n&&e.touched&&i.a.createElement("div",{className:a.error},n))},Wt=Object(b.a)((function(e){return{ingredients:{backgroundColor:"#eee"},ingredientsList:{listStyle:"none",paddingLeft:e.spacing(2),"& li":{marginBottom:e.spacing(2)}},ingredientName:{fontSize:e.typography.subtitle1.fontSize,fontWeight:"bold"},ingredientDetails:{color:e.palette.text.secondary},paper:{padding:e.spacing(2)},verticalCenter:{alignItems:"center",display:"flex"}}})),qt=function(e){var t=e.ingredients,n=e.recipe,a=Wt();return n&&i.a.createElement(He.a,{className:a.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h5",className:a.verticalCenter},n.title," ",n.archived&&i.a.createElement(St,null)," ",n.prepTime>30&&i.a.createElement(wt,null)," ",n.defrost&&i.a.createElement(Tt,null)),i.a.createElement(ae.a,{variant:"subtitle2"},function(e){var t=[];return e.servings&&t.push(i.a.createElement(i.a.Fragment,{key:1},i.a.createElement("em",null,"Servings: "),i.a.createElement("u",null,e.servings))),t.push(" | "),e.prepTime&&t.push(i.a.createElement(i.a.Fragment,{key:2},i.a.createElement("em",null,"Prep Time: "),i.a.createElement("u",null,e.prepTime))),e.wwPoints&&(t.push(" | "),t.push(i.a.createElement(i.a.Fragment,{key:3},i.a.createElement("em",null,"WW Points: "),i.a.createElement("u",null,e.wwPoints)))),e.isMeal&&(t.push(" | "),t.push(i.a.createElement(i.a.Fragment,{key:4},i.a.createElement("em",null,"Meal Type: "),i.a.createElement("u",null,e.mealType)))),t}(n))),i.a.createElement(T.a,{item:!0,xs:12,className:a.ingredients},i.a.createElement(ae.a,{variant:"h6"},"Ingredients"),i.a.createElement("ul",{className:a.ingredientsList},n.ingredients.map((function(e){var n,r=(n=e.id,t.find((function(e){return e._id===n})));return e.id?i.a.createElement("li",{key:e.id},i.a.createElement("span",{className:a.ingredientName},null===r||void 0===r?void 0:r.name),i.a.createElement("br",null),i.a.createElement("span",{className:a.ingredientDetails},"".concat(e.quantity||""," ").concat(e.unit||""),e.notes&&", ".concat(e.notes))):null})))),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h6"},"Directions"),i.a.createElement(Ft,{initialValue:null===n||void 0===n?void 0:n.directions,toolbar:!1,readOnly:!0})),n.notes&&i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h6"},"Notes"),i.a.createElement(ae.a,null,n.notes))))},Bt=Object(r.c)((function(e){return{ingredients:e.ingredients.ingredients,pageLoaded:e.plans.pageLoaded,planViewer:e.plans.viewer,recipeViewer:e.recipes.viewer}}),(function(e){return{onLoad:function(){return e({type:"PLANS_PAGE_LOADED",payload:Promise.all([M.a.Plans.getAll(),M.a.Meals.getAll(),M.a.Recipes.getAll(),M.a.Ingredients.getAll(),M.a.Categories.getAll(),M.a.Stores.getAll()])})},onUnload:function(){return e({type:"PLANS_PAGE_UNLOADED"})},onUnloadPlanView:function(){return e({type:"PLAN_VIEW_UNLOADED"})},onUnloadRecipeView:function(){return e({type:"RECIPE_VIEW_UNLOADED"})}}}))((function(e){var t=e.ingredients,n=e.onLoad,a=e.onUnload,r=e.onUnloadPlanView,o=e.onUnloadRecipeView,l=e.pageLoaded,s=e.planViewer,u=e.recipeViewer,d=Object(c.useState)(!1),m=Object(j.a)(d,2),p=m[0],E=m[1],f=s.plan&&"plan"===s.type,b=!!u.recipe;return Object(c.useEffect)((function(){return n(),function(){a()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(ce,{title:b?"View Recipe":f?"View Plan":"Manage Plans"},b?i.a.createElement(g.a,{color:"secondary",onClick:o},"Back to Plan"):f?i.a.createElement(g.a,{color:"secondary",onClick:r},"Manage Plans"):i.a.createElement(Lt,null)),l?b?i.a.createElement(qt,{ingredients:t,recipe:u.recipe}):f?i.a.createElement(Rt,null):i.a.createElement(T.a,{container:!0,spacing:4},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(Ut,{filter:"unarchived"})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h5",gutterBottom:!0},"Archived Plans"),i.a.createElement(Se.a,{onChange:function(e,t){return E(t)}},i.a.createElement(Ne.a,{expandIcon:i.a.createElement(we.a,null),"aria-controls":"archived-content",id:"archived-header"},i.a.createElement(ae.a,{variant:"body1"},"Click to ",p?"hide":"show"," archived plans")),i.a.createElement(Ce.a,{style:{display:"block"}},i.a.createElement(Ut,{filter:"archived"}))))):i.a.createElement(le,null),i.a.createElement(bt,null))})),zt=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){return e.currentUser?i.a.createElement(s.b,{exact:!0,path:e.path,component:e.component}):i.a.createElement(s.a,{to:"/"})})),Ht=n(866),Yt=Object(Ht.a)(),Jt=Object(r.c)((function(e){return{editor:e.recipes.editor,ingredients:e.ingredients.ingredients}}),(function(e){return{onBlur:function(){return e({type:"RECIPE_INGREDIENT_ONBLUR"})}}}))((function(e){var t=e.editor,n=e.ingredients,a=e.onBlur,r=e.onChange,o=e.value,l=Object(c.useState)(null),s=Object(j.a)(l,2),u=s[0],d=s[1],m=Object(c.useState)([]),p=Object(j.a)(m,2),f=p[0],b=p[1],g=Object(c.useState)(null!==o&&void 0!==o?o:null),O=Object(j.a)(g,2),v=O[0],y=O[1],h=n.map((function(e){var t=e.name[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)})),D=function(e,t){"string"!==typeof t&&(y(t),r(e,t)),a()};Object(c.useEffect)((function(){b(h)}),[n]),Object(c.useEffect)((function(){t.ingredient&&(y(t.ingredient),r({},t.ingredient),a())}),[t.ingredient]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(xe.a,{autoHighlight:!0,autoSelect:!0,freeSolo:!0,options:f,value:v,filterOptions:function(e,t){var n=Yt(e,t);return""!==t.inputValue&&n.push({inputValue:t.inputValue,name:'Add "'.concat(t.inputValue,'"')}),n},getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.name},getOptionSelected:function(e,t){return e._id===(null===t||void 0===t?void 0:t._id)},groupBy:function(e){return e.firstLetter},onKeyDown:function(e){return function(e){"Enter"===e.key&&e.stopPropagation()}(e)},renderInput:function(e){return i.a.createElement(Ge.a,Object.assign({},e,{autoFocus:!0,label:"Ingredient name",variant:"outlined"}))},onBlur:a,onChange:function(e,t){t&&t.inputValue&&d({name:t.inputValue}),D(e,t)},renderOption:function(e,t){var n=t.inputValue,a=We()(e.name,n),r=Ve()(e.name,a);return i.a.createElement("div",null,r.map((function(e,t){return i.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}}),i.a.createElement(je,{hideButton:!0,ingredient:u,isOpen:!!u,onClose:function(){d(null)}}))})),Kt=(n(811),function(e){return i.a.createElement(Y.a,e)}),$t=function(e,t,n){return{name:e,abbr:t,conv:n}},Qt=[["count","ct",0],["cup","c",0],["dash","dsh",0],["fluid ounce","fl oz",0],["gram","g",0],["milliliter","mL",0],["ounce","oz",0],["package","pkg",0],["piece","piece",0],["pinch","pnch",0],["pint","pt",0],["pound","lb",0],["quart","qt",0],["slice","slc",0],["spray","spray",0],["tablespoon","tbsp",0],["teaspoon","tsp",0]].map((function(e){return $t.apply(void 0,Object(B.a)(e))})),Zt=function(e){var t=e.ingredients,n=e.ingredientsList,a=e.onChange,r=Object(c.useState)([]),o=Object(j.a)(r,2),l=o[0],s=o[1],u=Object(c.useState)([]),d=Object(j.a)(u,2),m=d[0],p=d[1];return Object(c.useEffect)((function(){s([{title:"Name",field:"id",lookup:n.reduce((function(e,t){return e[t._id]=t.name,e}),{}),editComponent:function(e){return i.a.createElement(Jt,{onChange:function(t,n){return e.onChange(null===n||void 0===n?void 0:n._id)},value:n.find((function(t){return t._id===e.value}))})}},{title:"Quantity",field:"quantity"},{title:"Unit",field:"unit",lookup:Qt.reduce((function(e,t){return e[t.abbr]="".concat(t.name,"s (").concat(t.abbr,")"),e}),{})},{title:"Notes",field:"notes"}])}),[n]),Object(c.useEffect)((function(){p(t)}),[t]),i.a.createElement(Kt,{title:"Ingredients",columns:l,data:m,localization:{body:{emptyDataSourceMessage:"No ingredients have been added",editRow:{deleteText:"Remove ingredient from this recipe?"}}},options:{actionsColumnIndex:-1,paging:!1,search:!1},editable:{onRowAdd:function(e){return new Promise((function(t,n){p([].concat(Object(B.a)(m),[e])),a([].concat(Object(B.a)(m),[e])),t()}))},onRowUpdate:function(e,t){return new Promise((function(n,r){var c=Object(B.a)(m);c[t.tableData.id]=e,p(Object(B.a)(c)),a(Object(B.a)(c)),n()}))},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(B.a)(m),c=e.tableData.id;r.splice(c,1),p(Object(B.a)(r)),a(Object(B.a)(r)),t()}))}}})},Xt=function(){var e=Object(h.e)(),t=e.values,n=e.setFieldValue;return Object(c.useEffect)((function(){t.isMeal||n("mealType","")}),[t]),null},en=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.recipes),{},{ingredients:e.ingredients.ingredients})}),(function(e){return{onAdd:function(t){return e({type:"ADD_RECIPE",payload:M.a.Recipes.add(t),snackbar:{message:"Recipe added",variant:"success"}})},onExit:function(){return e({type:"RECIPE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_RECIPE",payload:M.a.Recipes.update(t),snackbar:{message:"Recipe updated",variant:"success"}})}}}))((function(e){var t,n,a,r,o,l,s,u,d,m,f,b,O,_=e.editor,L=e.errors,w=e.ingredients,k=e.inProgress,R=e.onAdd,U=e.onExit,x=e.onUpdate,M=Object(c.useState)(!1),V=Object(j.a)(M,2),F=V[0],W=V[1],q=function(){W(!1)},B=function(e){R(Object(E.a)({},e))},z=function(e){x(Object(E.a)(Object(E.a)({},_.recipe),e))};return Object(c.useEffect)((function(){k||L||W(!1)}),[k]),Object(c.useEffect)((function(){W(!!_.recipe)}),[_.recipe]),i.a.createElement(i.a.Fragment,null,i.a.createElement(I,{item:"recipe",onClick:function(){W(!0)}}),i.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:q,onFocus:function(e){return e.stopPropagation()},open:F,TransitionProps:{onExit:U}},i.a.createElement(h.c,{initialValues:{defrost:(null===(t=_.recipe)||void 0===t?void 0:t.defrost)||!1,directions:(null===(n=_.recipe)||void 0===n?void 0:n.directions)||"",ingredients:(null===(a=_.recipe)||void 0===a?void 0:a.ingredients)||[],isMeal:(null===(r=_.recipe)||void 0===r?void 0:r.isMeal)||!1,mealType:(null===(o=_.recipe)||void 0===o?void 0:o.mealType)||"",notes:(null===(l=_.recipe)||void 0===l?void 0:l.notes)||"",prepTime:(null===(s=_.recipe)||void 0===s?void 0:s.prepTime)||"",servings:(null===(u=_.recipe)||void 0===u?void 0:u.servings)||"",title:!(null===(d=_.recipe)||void 0===d?void 0:d._id)&&(null===(m=_.recipe)||void 0===m?void 0:m.title)?"Copy of ".concat(null===(f=_.recipe)||void 0===f?void 0:f.title):(null===(b=_.recipe)||void 0===b?void 0:b.title)||"",wwPoints:(null===(O=_.recipe)||void 0===O?void 0:O.wwPoints)||""},validationSchema:A.d({defrost:A.b(),directions:A.e().required("Required"),ingredients:A.a(),isMeal:A.b(),mealType:A.e(),notes:A.e(),prepTime:A.c().required("Required"),servings:A.c().required("Required"),title:A.e().required("Required"),wwPoints:A.c()}),onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===(n=_.recipe)||void 0===n?void 0:n._id)?z(t):B(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t,n,a;return i.a.createElement(p.a,{disableGutters:!0},i.a.createElement(h.b,null,i.a.createElement(S.a,null,(null===(t=_.recipe)||void 0===t?void 0:t._id)?"Update recipe":"Add recipe"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:L}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(h.a,{autoFocus:!_.recipe,component:D.b,disabled:k,id:"title",label:"Recipe Title",name:"title",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:6,md:3},i.a.createElement(h.a,{component:D.a,disabled:k,type:"checkbox",name:"isMeal",Label:{label:"This recipe is a meal"}}),i.a.createElement(Xt,null)),i.a.createElement(T.a,{item:!0,xs:6,md:3},e.values.isMeal&&i.a.createElement(h.a,{component:D.b,disabled:k,id:"mealType",label:"Meal Type",name:"mealType",type:"select",select:!0,fullWidth:!0},Be.map((function(e){var t=e.toLowerCase();return i.a.createElement(ve.a,{key:t,value:t},e)})))),i.a.createElement(T.a,{item:!0,xs:12,md:3},i.a.createElement(h.a,{component:D.b,disabled:k,id:"servings",label:"Servings",name:"servings",type:"number",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:3},i.a.createElement(h.a,{component:D.b,disabled:k,id:"prepTime",label:"Prep Time (minutes)",name:"prepTime",type:"number",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:3},i.a.createElement(h.a,{component:D.b,disabled:k,id:"wwPoints",label:"WW Points",name:"wwPoints",type:"number",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:3},i.a.createElement(h.a,{component:D.a,disabled:k,type:"checkbox",name:"defrost",Label:{label:"Requires defrost"}})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{component:D.b,disabled:k,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(Zt,{ingredients:e.values.ingredients,ingredientsList:w,onChange:function(t){e.setFieldValue("ingredients",t)}})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h6"},"Directions"),i.a.createElement(Ft,{errors:e.errors.directions,initialValue:null===(n=_.recipe)||void 0===n?void 0:n.directions,name:"directions",onEditorBlur:e.setFieldTouched,onEditorChange:e.setFieldValue,placeholder:"Enter recipe directions here...",touched:e.touched.directions})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:k,type:"submit",variant:"contained"},(null===(a=_.recipe)||void 0===a?void 0:a._id)?k?"Updating...":"Update":k?"Adding...":"Add"),i.a.createElement(g.a,{disabled:k,onClick:q,variant:"contained"},"Cancel"))))}))))})),tn=Object(r.c)((function(e){return{recipes:e.recipes.recipes}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_RECIPE",payload:M.a.Recipes.delete(t),snackbar:{message:"Recipe deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_RECIPES",payload:M.a.Recipes.deleteMany(t),snackbar:{message:"".concat(t.length," recipe").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onLoadUpdate:function(t){return e({type:"RECIPE_DIALOG_LOADED",recipe:t})},onLoadView:function(t){return e({type:"RECIPE_VIEW_LOADED",recipe:t})},onUpdateArchiveStatus:function(t,n){return e({type:"UPDATE_RECIPE",payload:M.a.Recipes.update(t),snackbar:{message:"Recipe ".concat(n),variant:"success"}})}}}))((function(e){var t=e.filter,n=e.onDelete,a=e.onDeleteMany,r=e.onLoadUpdate,o=e.onLoadView,l=e.onUpdateArchiveStatus,s=e.recipes,u=Object(c.useState)([]),d=Object(j.a)(u,2),m=d[0],p=d[1],f=Object(c.useState)([{title:"Title",field:"title"},{title:"Prep Time (min)",field:"prepTime"},{title:"Servings",field:"servings"},{title:"WW Points",field:"wwPoints"},{title:"Meal Type",field:"mealType"}]),b=Object(j.a)(f,1)[0],g=function(e){var t=e.map((function(e){return e.slug}));a(t)};return Object(c.useEffect)((function(){var e="archived"===t?s.filter((function(e){return!0===e.archived})):"unarchived"===t?s.filter((function(e){return!1===e.archived})):s;p(e)}),[s]),i.a.createElement(Y.a,{title:"Recipes",columns:b,data:m,components:{Action:function(e){return"function"===typeof e.action.icon?e.action.icon(e.data):i.a.createElement(H.MTableAction,e)},Container:function(e){return i.a.createElement(He.a,Object.assign({},e,{elevation:"archived"===t?0:1}))}},localization:{body:{emptyDataSourceMessage:"No recipes found",editRow:{deleteText:"Delete recipe? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{icon:"visibility",onClick:function(e,t){o(t)},position:"row",tooltip:"View recipe"},{icon:"edit",onClick:function(e,t){r(t)},position:"row",tooltip:"Update recipe"},{icon:"library_add",onClick:function(e,t){return(n=t)._id="",void r(n);var n},position:"row",tooltip:"Copy recipe"},{action:function(e){return{icon:e.archived?"unarchive":"archive",onClick:function(e,t){return function(e){var t=e.archived?"unarchived":"archived";l(Object(E.a)(Object(E.a)({},e),{},{archived:!e.archived}),t)}(t)},tooltip:e.archived?"Unarchive recipe":"Archive recipe"}},position:"row"},{icon:function(e){return i.a.createElement(te,{data:e,name:"recipe",onDelete:g})},position:"toolbarOnSelect",tooltip:"Delete selected recipes"}],editable:{onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(m),c=e.tableData.id;r.splice(c,1),p(Object(B.a)(r)),n(e),t()}))}}})})),nn=Object(r.c)((function(e){return{ingredients:e.ingredients.ingredients,pageLoaded:e.recipes.pageLoaded,viewer:e.recipes.viewer}}),(function(e){return{onLoad:function(){return e({type:"RECIPES_PAGE_LOADED",payload:Promise.all([M.a.Recipes.getAll(),M.a.Ingredients.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"RECIPES_PAGE_UNLOADED"})},onUnloadView:function(){return e({type:"RECIPE_VIEW_UNLOADED"})}}}))((function(e){var t=e.ingredients,n=e.onLoad,a=e.onUnload,r=e.onUnloadView,o=e.pageLoaded,l=e.viewer,s=Object(c.useState)(!1),u=Object(j.a)(s,2),d=u[0],m=u[1];return Object(c.useEffect)((function(){return n(),function(){a()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(ce,{title:l.recipe?"View Recipe":"Manage Recipes"},l.recipe?i.a.createElement(g.a,{color:"secondary",onClick:r},"Manage recipes"):i.a.createElement(en,null)),o?l.recipe?i.a.createElement(qt,{ingredients:t,recipe:l.recipe}):i.a.createElement(T.a,{container:!0,spacing:4},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(tn,{filter:"unarchived"})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h5",gutterBottom:!0},"Archived Recipes"),i.a.createElement(Se.a,{onChange:function(e,t){return m(t)}},i.a.createElement(Ne.a,{expandIcon:i.a.createElement(we.a,null)},i.a.createElement(ae.a,{variant:"body1"},"Click to ",d?"hide":"show"," archived recipes")),i.a.createElement(Ce.a,{style:{display:"block"}},i.a.createElement(tn,{filter:"archived"}))))):i.a.createElement(le,null))})),an=n(876),rn=n(875),cn=function(e){var t=e.category,n=e.index,a=Object(_.a)();return i.a.createElement(gt.Draggable,{draggableId:t.slug,index:n,key:t.slug},(function(e,n){return i.a.createElement(He.a,Object.assign({elevation:3,ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(r=n.isDragging,c=e.draggableProps.style,Object(E.a)({background:r?a.palette.secondary.light:"white",marginBottom:a.spacing(1),padding:a.spacing(2),userSelect:"none"},c))}),t.name," ",t.isNew&&i.a.createElement(Te.a,{color:"secondary",label:"new",size:"small",style:{color:"white",fontStyle:"italic"}}));var r,c}))},on=function(e){var t=e.categories,n=Object(_.a)(),a=Object(L.a)(n.breakpoints.down("md"));return i.a.createElement(gt.Droppable,{droppableId:"categories"},(function(e,r){return i.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(c=r.isDraggingOver,{border:c?"2px dashed ".concat(n.palette.primary.light):"2px solid white",minHeight:"120px",padding:n.spacing(1),width:a?"100%":"50%"})}),t.map((function(e,t){return i.a.createElement(cn,{category:e,index:t,key:e.slug})})),e.placeholder);var c}))},ln=function(e){var t=e.categories,n=e.name,a=e.onChange,r=Object(c.useState)(t),o=Object(j.a)(r,2),l=o[0],s=o[1];return i.a.createElement(gt.DragDropContext,{onDragEnd:function(e){var r=e.destination,c=e.source,i=e.draggableId;if(r&&r.index!==c.index){var o=t.find((function(e){return e.slug===i})),u=Object(B.a)(l);u.splice(c.index,1),u.splice(r.index,0,o),s(u),a(n,u)}}},i.a.createElement(on,{categories:l}))},sn=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.stores),{},{categories:e.categories.categories})}),(function(e){return{onAdd:function(t){return e({type:"ADD_STORE",payload:M.a.Stores.add(t),snackbar:{message:"Store added",variant:"success"}})},onExit:function(){return e({type:"STORE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_STORE",payload:M.a.Stores.update(t),snackbar:{message:"Store updated",variant:"success"}})}}}))((function(e){var t,n,a,r=e.categories,o=e.editor,l=e.errors,s=e.inProgress,u=e.onAdd,d=e.onExit,m=e.onUpdate,f=Object(c.useState)(!1),b=Object(j.a)(f,2),O=b[0],_=b[1],L=!!(null===(t=o.store)||void 0===t?void 0:t.name),w=function(){_(!1)},k=function(e){u(Object(E.a)({},e))},R=function(e){m(Object(E.a)(Object(E.a)({},o.store),e))};return Object(c.useEffect)((function(){s||l||_(!1)}),[s]),Object(c.useEffect)((function(){_(!!o.store)}),[o.store]),i.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:w,onFocus:function(e){return e.stopPropagation()},open:O,TransitionProps:{onExit:d}},i.a.createElement(h.c,{initialValues:{categories:function(){var e;if(!(null===(e=o.store)||void 0===e?void 0:e.categories))return r;var t=Object(B.a)(o.store.categories);return r.forEach((function(e){t.find((function(t){return t._id===e._id}))||t.push(Object(E.a)(Object(E.a)({},e),{},{isNew:!0}))})),t}(),name:(null===(n=o.store)||void 0===n?void 0:n.name)||"",notes:(null===(a=o.store)||void 0===a?void 0:a.notes)||""},validationSchema:A.d({categories:A.a(),name:A.e().required("Required"),notes:A.e()}),onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L?R(t):k(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return i.a.createElement(p.a,{disableGutters:!0},i.a.createElement(h.b,null,i.a.createElement(S.a,null,L?"Update store":"Add store"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:l}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{autoFocus:!L,component:D.b,disabled:s,id:"name",label:"Store Name",name:"name",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{component:D.b,disabled:s,id:"notes",label:"Store Notes",name:"notes",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h6"},"Categories"),i.a.createElement(ln,{categories:e.values.categories,name:"categories",onChange:e.setFieldValue})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:s,type:"submit",variant:"contained"},L?s?"Updating...":"Update":s?"Adding...":"Add"),i.a.createElement(g.a,{disabled:s,onClick:w,variant:"contained"},"Cancel"))))})))})),un=Object(r.c)((function(e){return{defaultStore:e.common.settings.defaultStore,stores:e.stores.stores}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_STORE",payload:M.a.Stores.delete(t),snackbar:{message:"Store deleted",variant:"success"}})},onLoadUpdate:function(t){return e({type:"STORE_DIALOG_LOADED",store:t})},onSetDefault:function(t){return e({type:"SET_DEFAULT_STORE",payload:M.a.Settings.update(t),snackbar:{message:"Default store saved",variant:"success"}})}}}))((function(e){var t=e.defaultStore,n=e.onDelete,a=e.onLoadUpdate,r=e.onSetDefault,o=e.stores,l=Object(c.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1],m=Object(c.useState)([{title:"Name",field:"name"},{title:"Notes",field:"notes"}]),p=Object(j.a)(m,1)[0],E=function(e){a(e)};return Object(c.useEffect)((function(){d(o)}),[o]),i.a.createElement(i.a.Fragment,null,i.a.createElement(sn,null),i.a.createElement(Y.a,{title:"Manage Stores",columns:p,data:u,localization:{body:{emptyDataSourceMessage:"No stores found",editRow:{deleteText:"Delete store? This action cannot be undone."}}},actions:[{action:function(e){return{icon:e._id===t?"star":function(){return i.a.createElement(It.a,null)},onClick:function(e,t){r({defaultStore:t})},position:"row",tooltip:e._id===t?"Default store":"Set as default store"}}},{action:function(e){return{icon:"edit",onClick:function(e,t){return E(t)},position:"row",tooltip:"Update store"}}},{icon:function(){return i.a.createElement(rn.a,null)},isFreeAction:!0,onClick:function(){return E({})},position:"toolbar",tooltip:"Add store"}],options:{actionsColumnIndex:-1,paging:!1,toolbar:!0},editable:{onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),n(e),t()}))}},style:{boxShadow:"none"}}))})),dn=Object(r.c)((function(e){return Object(E.a)({},e.stores)}),(function(e){return{onLoad:function(){return e({type:"STORES_PAGE_LOADED",payload:Promise.all([M.a.Stores.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"STORES_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,a?i.a.createElement(un,null):i.a.createElement(le,null))})),mn=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)},paper:{padding:e.spacing(2),marginBottom:e.spacing(4)}}})),pn=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.settings),{},{currentUser:e.common.currentUser,settings:e.common.settings})}),(function(e){return{onSubmitForm:function(t){return e({type:"SETTINGS_SAVED",payload:Promise.all([M.a.Auth.save(t),M.a.Settings.update(t)]),snackbar:{message:"Settings saved",variant:"success"}})},onUnload:function(){return e({type:"SETTINGS_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.errors,a=e.inProgress,r=e.onSubmitForm,o=e.onUnload,l=(e.settings,mn());return Object(c.useEffect)((function(){return function(){o()}}),[]),i.a.createElement(h.c,{enableReinitialize:!0,initialValues:{firstName:t.firstName,lastName:t.lastName,password:""},validationSchema:A.d({firstName:A.e(),lastName:A.e(),password:A.e()}),onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object(E.a)({},t)).password||delete a.password,r(a),n.resetForm({values:Object(E.a)(Object(E.a)({},a),{},{password:""})});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},i.a.createElement(h.b,null,i.a.createElement(ce,{title:"Manage Account"},i.a.createElement(w.a,{color:"primary",disabled:a,type:"sumbit",variant:"extended"},i.a.createElement(an.a,{className:l.icon}),a?"Saving...":"Save settings")),i.a.createElement(G,{errors:n}),"admin"!==t.role&&i.a.createElement(He.a,{className:l.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(dn,null)))),i.a.createElement(He.a,{className:l.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h5",gutterBottom:!0},"Account Details")),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(h.a,{component:D.b,label:"First name",name:"firstName",type:"text",variant:"outlined",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(h.a,{component:D.b,label:"Last name",name:"lastName",type:"text",variant:"outlined",fullWidth:!0})))),i.a.createElement(He.a,{className:l.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{variant:"h5",gutterBottom:!0},"Account Security")),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(h.a,{component:D.b,label:"New password",name:"password",type:"password",variant:"outlined",fullWidth:!0}))))))})),En=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),null)((function(e){var t=e.currentUser;return t?i.a.createElement(i.a.Fragment,null,i.a.createElement(ge,{currentUser:t}),i.a.createElement(rt,null,i.a.createElement(p.a,null,i.a.createElement(s.d,null,i.a.createElement(zt,{component:Bt,path:"/plans"}),i.a.createElement(zt,{component:Je,path:"/meals"}),i.a.createElement(zt,{component:nn,path:"/recipes"}),i.a.createElement(zt,{component:ue,path:"/ingredients/categories"}),i.a.createElement(zt,{component:Ae,path:"/ingredients"}),i.a.createElement(zt,{component:pn,path:"/settings"}),i.a.createElement(zt,{component:Ue,path:"/users"}),i.a.createElement(s.b,{component:ct}))),i.a.createElement(nt,null))):i.a.createElement(s.a,{to:"/login"})})),fn=n(343),bn=n.n(fn),gn=n(344),On=n.n(gn),vn=Object(b.a)((function(e){return{background:{alignItems:"center",backgroundImage:"url(".concat(On.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},logo:{marginBottom:e.spacing(4),width:160},panel:{alignItems:"center",borderRadius:"1rem",display:"flex",flexFlow:"column nowrap",overflowY:"scroll",padding:"2rem 4rem",position:"relative"},text:{color:e.palette.primary.main,fontStyle:"italic"}}})),yn=function(e){var t=vn();return i.a.createElement(bn.a,{className:t.background},i.a.createElement(He.a,{elevation:12,className:t.panel},i.a.createElement(fe,{className:t.logo}),i.a.createElement(ae.a,{className:t.text,variant:"h4"},"Loading...")))},jn=n(492),hn=n(877),Dn=n(878),An=n(493),_n=n(564),Ln=n.n(_n),Pn=Object(b.a)((function(e){return{page:{"& p:not(:last-of-type)":{marginBottom:e.spacing(2)}},profile:{borderRadius:"100%",boxShadow:e.shadows[10],float:"right",marginBottom:e.spacing(2),marginLeft:e.spacing(2),width:"120px"}}})),Sn=function(){var e=Pn();return i.a.createElement(T.a,{className:e.page,container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(ae.a,{align:"center",gutterBottom:!0,variant:"h5"},"What is Plate?"),i.a.createElement("img",{className:e.profile,src:Ln.a}),i.a.createElement(ae.a,{variant:"body2"},"Hello, I'm Joseph May, a high school chemistry teacher from Las Vegas. While I love teaching chemistry, I also love programming for the web, so why not combine the two."),i.a.createElement(ae.a,{variant:"body2"},"Plate is a web-based app I created to help my wife and I manage our meals and shopping list for each week. It allows you to create weekly meal plans from recipes you input into the system. It can then generate and push a shopping list to your iPhone or Android device."),i.a.createElement(ae.a,{variant:"body2"},"While this app can support multiple users, I am running it on no-cost servers, so it was not intended to be a public program. Although, if you are interested in learning more, please reach out to me"," ",i.a.createElement(An.a,{href:"mailto:jwmay87+plate@gmail.com"},"here"),".")))},Nn=Object(r.c)((function(e){return Object(E.a)({},e.auth)}),(function(e){return{onSubmit:function(t,n){return e({type:F,payload:M.a.Auth.login(t,n)})}}}))((function(e){return i.a.createElement(h.c,{initialValues:{username:"",password:""},validationSchema:A.d({username:A.e().required("Required"),password:A.e().required("Required")}),onSubmit:function(t){!function(t,n){e.onSubmit(t,n)}(t.username,t.password)}},i.a.createElement(h.b,null,i.a.createElement(T.a,{container:!0,spacing:4},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(G,{errors:e.errors}),i.a.createElement(h.a,{component:D.b,disabled:e.inProgress,fullWidth:!0,label:"Username",name:"username",type:"text",variant:"outlined"})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(h.a,{component:D.b,disabled:e.inProgress,fullWidth:!0,label:"Password",name:"password",type:"password",variant:"outlined"})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(g.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},e.inProgress?"Loading...":"Login")))))})),Tn=Object(b.a)((function(e){return{aboutLink:{bottom:e.spacing(2),position:"absolute",right:e.spacing(4)},loginLink:{marginBottom:e.spacing(2),"& > a":{textDecoration:"none"}},logo:{display:"block",margin:"0 auto",width:120},page:Object(Oe.a)({alignItems:"center",backgroundImage:"url(".concat(On.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},e.breakpoints.up("lg"),{backgroundSize:"initial",justifyContent:"flex-end"}),panel:Object(Oe.a)({borderRadius:"1rem",maxHeight:"90%",overflowY:"scroll",padding:"4rem 2rem",position:"relative",width:"80%"},e.breakpoints.up("lg"),{borderRadius:"0",height:"100%",maxHeight:"100%",width:"40%"}),progress:{height:10,left:"0",position:"absolute",top:"0",width:"100%"}}})),Cn=function(){var e=Tn();return i.a.createElement("span",{className:e.aboutLink},i.a.createElement(Q.a,{arrow:!0,enterTouchDelay:0,title:"Learn more"},i.a.createElement(f.a,{to:"/about"},i.a.createElement(hn.a,{color:"secondary",fontSize:"small"}))))},wn=function(){var e=Tn();return i.a.createElement("div",{className:e.loginLink},i.a.createElement(f.a,{to:"/login"},i.a.createElement(g.a,{color:"secondary",startIcon:i.a.createElement(Dn.a,null)},"Login")))},kn=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.auth),{},{currentUser:e.common.currentUser,pathname:e.router.location.pathname})}),(function(e){return{onUnload:function(){return e({type:"LOGIN_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.inProgress,a=e.onUnload,r=e.pathname,o=Tn();return Object(c.useEffect)((function(){return function(){return a()}}),[]),t?i.a.createElement(s.a,{to:"/"}):i.a.createElement(bn.a,null,i.a.createElement("div",{className:o.page},i.a.createElement(He.a,{elevation:12,className:o.panel},n&&i.a.createElement(jn.a,{className:o.progress}),i.a.createElement(T.a,{container:!0,spacing:4},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(fe,{className:o.logo})),i.a.createElement(T.a,{item:!0,xs:12},r.includes("about")?i.a.createElement(i.a.Fragment,null,i.a.createElement(wn,null),i.a.createElement(Sn,null)):i.a.createElement(i.a.Fragment,null,i.a.createElement(Cn,null),i.a.createElement(Nn,null)))))))})),Rn=n(409),In=function(e){var t=e.snackbar,n=Object(Rn.b)().enqueueSnackbar;return Object(c.useEffect)((function(){t&&n(t.message,{variant:t.variant})}),[t]),e.children},Un=Object(r.c)((function(e){return{snackbar:e.notifier.snackbar}}),(function(e){return{onSnackbarClose:function(){return e({type:"SNACKBAR_CLOSED"})}}}))((function(e){return i.a.createElement(Rn.a,{maxSnack:1,onClose:function(){e.onSnackbarClose()}},i.a.createElement(In,{snackbar:e.snackbar},e.children))})),xn=n(176),Gn=n(490),Mn=n(207),Vn=Object(xn.b)({breakpoints:{values:{md:768,lg:1024}},palette:{primary:{main:Gn.a[400]},secondary:{main:Mn.a[200]}},overrides:{MuiDialogActions:{root:{padding:"16px 24px"}},MUIRichTextEditor:{placeHolder:{position:"relative"},toolbar:{"& button.MuiIconButton-colorPrimary":{color:Mn.a[200]}},editor:{"& li":{borderBottom:"1px solid #ccc",marginBottom:"32px",paddingBottom:"16px"}}}}}),Fn=n(57),Wn=n(565),qn=n(103),Bn=(n(817),n(544)),zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:if(t.subtype===F||"REGISTER"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0});break;case F:case"REGISTER":return Object(E.a)(Object(E.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return{};default:return e}return e},Hn={errors:null,categories:[],inProgress:!1,pageLoaded:!1},Yn=function(e,t){return e.name.localeCompare(t.name)},Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:[].concat(Object(B.a)(e.categories),[t.payload.category]).sort((function(e,t){return Yn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_CATEGORY"===t.subtype||"UPDATE_CATEGORY"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("CATEGORIES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.filter((function(e){return e.slug!==t.payload.category.slug}))});case"DELETE_CATEGORIES":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.filter((function(e){return!t.payload.categories.includes(e.slug)}))});case"CATEGORY_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"CATEGORIES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,categories:t.error?[]:t.payload.categories,inProgress:!1,pageLoaded:!0});case"CATEGORIES_PAGE_UNLOADED":case"INGREDIENTS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":case"STORES_PAGE_UNLOADED":return Hn;case"INGREDIENTS_PAGE_LOADED":case"STORES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[1].categories});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[4].categories});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[2].categories});case"UPDATE_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.map((function(e){return e._id===t.payload.category._id?t.payload.category:e})).sort((function(e,t){return Yn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},Kn={token:null,viewChangeCounter:0},$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOAD":return Object(E.a)(Object(E.a)({},e),{},{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null,settings:t.payload?t.payload.settings:null});case"LOGOUT":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:"/login",token:null,currentUser:null});case F:case"REGISTER":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:t.error?null:"admin"===t.payload.user.role?"/users":"/plans",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user,settings:t.error?null:t.payload.settings});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":case"SETTINGS_PAGE_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewChangeCounter:e.viewChangeCounter+1});case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:t.redirectTo});case"REDIRECT":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:null});case"SET_DEFAULT_STORE":case"SET_STARRED_PLAN":return Object(E.a)(Object(E.a)({},e),{},{settings:t.error?e.settings:t.payload.settings});case"SETTINGS_SAVED":return Object(E.a)(Object(E.a)({},e),{},{currentUser:t.error?e.currentUser:t.payload[0].user,settings:t.error?e.settings:t.payload[1].settings});default:return e}},Qn={errors:null,ingredients:[],inProgress:!1,pageLoaded:!1},Zn=function(e,t){return e.name.localeCompare(t.name)},Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:[].concat(Object(B.a)(e.ingredients),[t.payload.ingredient]).sort((function(e,t){return Zn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_INGREDIENT"===t.subtype||"UPDATE_INGREDIENT"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("INGREDIENTS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.filter((function(e){return e.slug!==t.payload.ingredient.slug}))});case"DELETE_INGREDIENTS":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.filter((function(e){return!t.payload.ingredients.includes(e.slug)}))});case"INGREDIENT_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"INGREDIENTS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,ingredients:t.error?[]:t.payload[0].ingredients,inProgress:!1,pageLoaded:!0});case"INGREDIENTS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return Qn;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?[]:t.payload[3].ingredients});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?[]:t.payload[1].ingredients});case"UPDATE_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.map((function(e){return e._id===t.payload.ingredient._id?t.payload.ingredient:e})).sort((function(e,t){return Zn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},ea={editor:{meal:null},errors:null,inProgress:!1,meals:[],pageLoaded:!1},ta=function(e,t){return e.title.localeCompare(t.title)},na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MEAL":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?e.meals:[].concat(Object(B.a)(e.meals),[t.payload.meal]).sort((function(e,t){return ta(e,t)}))});case V:if("ADD_MEAL"===t.subtype||"UPDATE_MEAL"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("MEALS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_MEAL":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?e.meals:e.meals.filter((function(e){return e.slug!==t.payload.meal.slug}))});case"DELETE_MEALS":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?e.meals:e.meals.filter((function(e){return!t.payload.meals.includes(e.slug)}))});case"MEAL_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{meal:t.meal})});case"MEAL_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{meal:null}),errors:null});case"MEALS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?[]:t.payload[0].meals,pageLoaded:!0});case"MEALS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return ea;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?[]:t.payload[1].meals});case"UPDATE_MEAL":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?e.meals:e.meals.map((function(e){return e._id===t.payload.meal._id?t.payload.meal:e})).sort((function(e,t){return ta(e,t)}))});default:return e}return e},aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(E.a)(Object(E.a)({},e),{},{navTabValue:t.value});case"NAV_UNLOADED":return{};default:return e}},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY":case"ADD_INGREDIENT":case"ADD_MEAL":case"ADD_PLAN":case"ADD_RECIPE":case"ADD_STORE":case"ADD_USER":case"DELETE_CATEGORY":case"DELETE_CATEGORIES":case"DELETE_INGREDIENT":case"DELETE_INGREDIENTS":case"DELETE_MEAL":case"DELETE_MEALS":case"DELETE_PLAN":case"DELETE_PLANS":case"DELETE_RECIPE":case"DELETE_RECIPES":case"DELETE_STORE":case"DELETE_USER":case"PLAN_LIST_COPIED":case"SET_DEFAULT_STORE":case"SET_STARRED_PLAN":case"SETTINGS_SAVED":case"UPDATE_CATEGORY":case"UPDATE_INGREDIENT":case"UPDATE_MEAL":case"UPDATE_PLAN":case"UPDATE_RECIPE":case"UPDATE_STORE":case"UPDATE_USER":return Object(E.a)(Object(E.a)({},e),{},{snackbar:t.error?null:t.snackbar});case"SNACKBAR_CLOSED":return Object(E.a)(Object(E.a)({},e),{},{snackbar:null});default:return e}},ca={editor:{plan:null},errors:null,inProgress:!1,pageLoaded:!1,plans:[],viewer:{plan:null,type:null}},ia=function(e,t){return e.title.localeCompare(t.title)},oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:[].concat(Object(B.a)(e.plans),[t.payload.plan]).sort((function(e,t){return ia(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_PLAN"===t.subtype||"UPDATE_PLAN"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("PLANS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.filter((function(e){return e.slug!==t.payload.plan.slug}))});case"DELETE_PLANS":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.filter((function(e){return!t.payload.plans.includes(e.slug)}))});case"PLAN_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{plan:t.plan})});case"PLAN_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{plan:null}),errors:null});case"PLAN_LIST_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:t.plan,type:"list"})});case"PLAN_LIST_DIALOG_UNLOADED":case"PLAN_VIEW_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:null,type:null})});case"PLAN_VIEW_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:t.plan,type:"plan"})});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{pageLoaded:!0,plans:t.payload[0].plans});case"PLANS_PAGE_UNLOADED":return ca;case"UPDATE_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.map((function(e){return e._id===t.payload.plan._id?t.payload.plan:e})).sort((function(e,t){return ia(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},la={editor:{recipe:null,ingredient:null},errors:null,recipes:[],inProgress:!1,pageLoaded:!1,viewer:{recipe:null}},sa=function(e,t){return e.title.localeCompare(t.title)},ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{ingredient:t.payload.ingredient})});case"ADD_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:[].concat(Object(B.a)(e.recipes),[t.payload.recipe]).sort((function(e,t){return sa(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_RECIPE"===t.subtype||"UPDATE_RECIPE"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("RECIPES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:e.recipes.filter((function(e){return e.slug!==t.payload.recipe.slug}))});case"DELETE_RECIPES":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:e.recipes.filter((function(e){return!t.payload.recipes.includes(e.slug)}))});case"MEALS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?[]:t.payload[1].recipes});case"MEALS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":return la;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?[]:t.payload[2].recipes});case"RECIPE_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:t.recipe})});case"RECIPE_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:null,ingredient:null}),errors:null});case"RECIPE_INGREDIENT_ONBLUR":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{ingredient:null})});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,recipes:t.error?[]:t.payload[0].recipes,inProgress:!1,pageLoaded:!0});case"RECIPE_VIEW_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{recipe:t.recipe})});case"RECIPE_VIEW_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{recipe:null})});case"UPDATE_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:null}),errors:t.error?t.payload.errors:null,inProgress:!1,recipes:t.error?e.recipes:e.recipes.map((function(e){return e._id===t.payload.recipe._id?t.payload.recipe:e})).sort((function(e,t){return sa(e,t)}))});default:return e}return e},da={errors:null,inProgress:!1},ma=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:if("SETTINGS_SAVED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0});break;case"SETTINGS_PAGE_UNLOADED":return da;case"SETTINGS_SAVED":return Object(E.a)(Object(E.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});default:return e}return e},pa={editor:{store:null},errors:null,inProgress:!1,pageLoaded:!1,stores:[]},Ea=function(e,t){return e.name.localeCompare(t.name)},fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:[].concat(Object(B.a)(e.stores),[t.payload.store]).sort((function(e,t){return Ea(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_STORE"===t.subtype||"UPDATE_STORE"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("STORES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:e.stores.filter((function(e){return e.slug!==t.payload.store.slug}))});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?[]:t.payload[5].stores});case"STORE_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{store:t.store})});case"STORE_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{store:null}),errors:null});case"STORES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{pageLoaded:!0,stores:t.payload[0].stores});case"STORES_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return pa;case"UPDATE_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:e.stores.map((function(e){return e._id===t.payload.store._id?t.payload.store:e})).sort((function(e,t){return Ea(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},ba={errors:null,inProgress:!1,users:[]},ga=function(e,t){return e.lastName.localeCompare(t.lastName)},Oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,users:t.error?e.users:[].concat(Object(B.a)(e.users),[t.payload.user]).sort((function(e,t){return ga(e,t)}))});case V:if("ADD_USER"===t.subtype||"UPDATE_USER"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0,errors:null});break;case"DELETE_USER":return Object(E.a)(Object(E.a)({},e),{},{users:t.error?e.users:e.users.filter((function(e){return e.username!==t.payload.user.username}))});case"MANAGE_USERS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{users:t.payload.users});case"MANAGE_USERS_PAGE_UNLOADED":return ba;case"USER_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"UPDATE_USER":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,users:t.error?e.users:e.users.map((function(e){return e.username===t.payload.user.username?t.payload.user:e})).sort((function(e,t){return ga(e,t)}))});default:return e}return e},va=function(e){return function(t){return function(n){if((c=n.payload)&&"function"===typeof c.then){e.dispatch({type:V,subtype:n.type});var a=e.getState().viewChangeCounter,r=n.skipTracking;n.payload.then((function(t){var c=e.getState();(r||c.viewChangeCounter===a)&&(n.payload=t,e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}),(function(t){var c=e.getState();(r||c.viewChangeCounter===a)&&(n.error=!0,n.payload=t.response.body,n.skipTracking||e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}))}else{var c;t(n)}}}},ya=function(e){return function(e){return function(t){"REGISTER"===t.type||t.type===F?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),M.a.setToken(t.payload.user.token)):"LOGOUT"===t.type&&(window.localStorage.setItem("jwt",""),M.a.setToken(null)),e(t)}}};var ja,ha=Object(qn.a)(),Da=Object(Bn.a)(ha),Aa=Object(Fn.createStore)((ja=ha,Object(Fn.combineReducers)({auth:zn,categories:Jn,common:$n,ingredients:Xn,meals:na,nav:aa,notifier:ra,plans:oa,recipes:ua,settings:ma,stores:fa,users:Oa,router:Object(a.b)(ja)})),Object(Wn.composeWithDevTools)(Object(Fn.applyMiddleware)(Da,va,ya))),_a=Object(r.c)((function(e){return{appLoaded:e.common.appLoaded,redirectTo:e.common.redirectTo}}),(function(e){return{onLoad:function(t,n){return e({type:"APP_LOAD",payload:t,token:n,skipTracking:!0})},onRedirect:function(){return e({type:"REDIRECT"})}}}))((function(e){var t=e.appLoaded,n=e.redirectTo;return Object(c.useEffect)((function(){n&&(Aa.dispatch(Object(u.d)(n)),e.onRedirect())}),[n]),Object(c.useEffect)((function(){var t=window.localStorage.getItem("jwt");t&&M.a.setToken(t),e.onLoad(t?M.a.Auth.current():null,t)}),[]),t?i.a.createElement(d.a,{theme:Vn},i.a.createElement(m.a,null),i.a.createElement(Un,null,i.a.createElement(c.Suspense,{fallback:i.a.createElement("p",null,"Loading...")},i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/login",component:kn}),i.a.createElement(s.b,{exact:!0,path:"/about",component:kn}),i.a.createElement(s.b,{path:"/",component:En}))))):i.a.createElement(d.a,{theme:Vn},i.a.createElement(m.a,null),i.a.createElement(yn,null))}));l.a.render(i.a.createElement(r.a,{store:Aa},i.a.createElement(a.a,{history:ha},i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"/",component:_a})))),document.getElementById("root"))}},[[578,1,2]]]);
//# sourceMappingURL=main.eb6f6258.chunk.js.map