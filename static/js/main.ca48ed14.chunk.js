(this.webpackJsonpplate=this.webpackJsonpplate||[]).push([[0],{10:function(e,t,n){"use strict";(function(e){var a=n(472),r=n.n(a),c=n(473),o=n.n(c),i=r()(o.a,e.Promise),l="https://chem-cash.herokuapp.com/api",s=function(e){return e.body},u=null,d=function(e){u&&e.set("authorization","Token ".concat(u))},m=function(e,t){return i.del("".concat(l).concat(e),t).use(d).then(s)},p=function(e){return i.get("".concat(l).concat(e)).use(d).then(s)},E=function(e,t){return i.post("".concat(l).concat(e),t).use(d).then(s)},f=function(e,t){return i.put("".concat(l).concat(e),t).use(d).then(s)},b={current:function(){return p("/user")},login:function(e,t){return E("/users/login",{user:{username:e,password:t}})},register:function(e){return E("/users",{user:e})},save:function(e){return f("/user",{user:e})}},g={add:function(e){return E("/categories",{category:e})},delete:function(e){return m("/categories/".concat(e.slug))},deleteMany:function(e){return m("/categories/bulk",{categories:e})},getAll:function(){return p("/categories")},update:function(e){return f("/categories/".concat(e.slug),{category:e})}},O={add:function(e){return E("/ingredients",{ingredient:e})},delete:function(e){return m("/ingredients/".concat(e.slug))},deleteMany:function(e){return m("/ingredients/bulk",{ingredients:e})},getAll:function(){return p("/ingredients")},update:function(e){return f("/ingredients/".concat(e.slug),{ingredient:e})}},j={add:function(e){return E("/meals",{meal:e})},delete:function(e){return m("/meals/".concat(e.slug))},deleteMany:function(e){return m("/meals/bulk",{meals:e})},getAll:function(){return p("/meals")},update:function(e){return f("/meals/".concat(e.slug),{meal:e})}},y={add:function(e){return E("/plans",{plan:e})},delete:function(e){return m("/plans/".concat(e.slug))},getAll:function(){return p("/plans")},update:function(e){return f("/plans/".concat(e.slug),{plan:e})}},v={add:function(e){return E("/recipes",{recipe:e})},delete:function(e){return m("/recipes/".concat(e.slug))},deleteMany:function(e){return m("/recipes/bulk",{recipes:e})},getAll:function(){return p("/recipes")},update:function(e){return f("/recipes/".concat(e.slug),{recipe:e})}},D={update:function(e){return f("/user/settings",{settings:e})}},A={add:function(e){return E("/stores",{store:e})},delete:function(e){return m("/stores/".concat(e.slug))},getAll:function(){return p("/stores")},update:function(e){return f("/stores/".concat(e.slug),{store:e})}},h={getAll:function(){return p("/users?role=subscriber")},delete:function(e){return m("/users/subscriber/".concat(e.username))},update:function(e){return f("/users/".concat(e.username),{user:e})}};t.a={Auth:b,Categories:g,Ingredients:O,Meals:j,Plans:y,Recipes:v,Settings:D,Stores:A,Users:h,setToken:function(e){u=e}}}).call(this,n(92))},283:function(e,t,n){e.exports=n.p+"static/media/plate-background.c6d96dd4.png"},475:function(e,t,n){e.exports=n.p+"static/media/plate-logo.1dcb2d72.png"},478:function(e,t,n){e.exports=n.p+"static/media/doc-may-profile.f927335d.jpg"},493:function(e,t,n){e.exports=n(682)},682:function(e,t,n){"use strict";n.r(t);var a=n(160),r=n(11),c=n(0),o=n.n(c),i=n(23),l=n.n(i),s=n(38),u=n(61),d=n(712),m=n(720),p=n(719),E=n(3),f=n(94),b=n(331),g=n(332),O=n(40),j=n.n(O),y=n(62),v=n(14),D=n(16),A=n(25),h=n(21),_=n(26),L=n(690),P=n(708),S=n(709),N=n(710),T=n(400),C=n(711),I=n(706),R=n(707),U=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),w=function(e){var t,n=U();return o.a.createElement(I.a,Object.assign({color:"primary",onClick:e.onClick,variant:"extended"},e),o.a.createElement(R.a,{className:n.icon}),null!==(t=e.prefix)&&void 0!==t?t:"Add"," ",e.item)},k=n(739),x=Object(b.a)((function(e){return{alert:{width:"100%","&:not(:last-of-type)":{marginBottom:e.spacing(1)}},alertList:{marginBottom:e.spacing(2)}}})),G=function(e){var t=e.errors,n=x();return t?o.a.createElement("div",{className:n.alertList},Object.keys(t).map((function(e){var a=e.replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase();return o.a.createElement(k.a,{className:n.alert,severity:"error",key:e},a," ",t[e])}))):null},M=n(10),F="ASYNC_START",V="LOGIN",W=Object(b.a)((function(e){return{addIcon:{marginRight:e.spacing(1)}}})),q=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onAdd:function(t){return e({type:"ADD_CATEGORY",payload:M.a.Categories.add(t),snackbar:{message:"Category added",variant:"success"}})},onExit:function(){return e({type:"CATEGORY_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_CATEGORY",payload:M.a.Categories.update(t),snackbar:{message:"Category updated",variant:"success"}})}}}))((function(e){var t=e.errors,n=e.category,a=e.inProgress,r=e.onAdd,i=e.onExit,l=e.onUpdate,s=Object(c.useState)(!1),u=Object(v.a)(s,2),d=u[0],m=u[1],p=Object(_.a)(),f=Object(L.a)(p.breakpoints.down("md")),b=(W(),function(){m(!1)}),O=function(e){r(Object(E.a)({},e))},I=function(e){l(Object(E.a)(Object(E.a)({},n),e))};return Object(c.useEffect)((function(){a||t||m(!1)}),[a]),o.a.createElement(o.a.Fragment,null,o.a.createElement(w,{item:"category",onClick:function(){m(!0)}}),o.a.createElement(P.a,{fullScreen:f,maxWidth:"lg",onClick:function(e){return e.stopPropagation()},onClose:b,onFocus:function(e){return e.stopPropagation()},open:d,TransitionProps:{onExit:i}},o.a.createElement(D.c,{initialValues:{name:(null===n||void 0===n?void 0:n.name)||"",notes:(null===n||void 0===n?void 0:n.notes)||""},validationSchema:h.d({name:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?I(t):O(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(D.b,null,o.a.createElement(S.a,null,n?"Edit category":"Add category"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:t}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!0,color:"primary",component:A.b,disabled:a,label:"Category Name",name:"name",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:a,label:"Category Notes",name:"notes",type:"text",fullWidth:!0})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{disabled:a,color:"primary",type:"submit",variant:"contained"},n?a?"Updating...":"Update":a?"Adding...":"Add"),o.a.createElement(g.a,{disabled:a,onClick:b,variant:"contained"},"Cancel"))))))})),B=n(17),z=n(76),H=n.n(z),Y=function(e){return o.a.createElement(H.a,Object.assign({components:{EditRow:function(e){return o.a.createElement(z.MTableEditRow,Object.assign({},e,{onKeyDown:function(t){27===t.keyCode&&e.onEditingCanceled(e.mode,e.data)}}))}}},e))},J=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onDelete:function(t){return e({type:"DELETE_CATEGORY",payload:M.a.Categories.delete(t),snackbar:{message:"Category deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_CATEGORIES",payload:M.a.Categories.deleteMany(t),snackbar:{message:"".concat(t.length," categor").concat(t.length>1?"ies":"y"," deleted"),variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_CATEGORY",payload:M.a.Categories.update(t),snackbar:{message:"Category updated",variant:"success"}})}}}))((function(e){var t=e.categories,n=e.onDelete,a=e.onDeleteMany,r=e.onUpdate,i=Object(c.useState)([]),l=Object(v.a)(i,2),s=l[0],u=l[1],d=Object(c.useState)([{title:"Name",field:"name"},{title:"Notes",field:"notes"}]),m=Object(v.a)(d,1)[0];return Object(c.useEffect)((function(){u(t)}),[t]),o.a.createElement(Y,{title:"Categories",columns:m,data:s,localization:{body:{emptyDataSourceMessage:"No categories found",editRow:{deleteText:"Delete category? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{tooltip:"Delete all selected categories",icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));a(t)}(t)}}],editable:{onRowUpdate:function(e,t){return new Promise((function(n,a){var c=Object(B.a)(s);c[t.tableData.id]=e,u(Object(B.a)(c)),r(e),n()}))},onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(s),c=e.tableData.id;r.splice(c,1),u(Object(B.a)(r)),n(e),t()}))}}})})),K=n(150),$=Object(b.a)((function(e){return{headerLeft:{alignItems:"center",display:"flex"},headerRight:{alignItems:"center",display:"flex",justifyContent:"flex-end"},pageHeader:{marginBottom:e.spacing(4)}}})),Q=function(e){var t=e.children,n=e.title,a=$();return o.a.createElement(T.a,{container:!0,spacing:2,className:a.pageHeader},o.a.createElement(T.a,{item:!0,xs:12,md:6,className:a.headerLeft},o.a.createElement(K.a,{variant:"h4"},n)),o.a.createElement(T.a,{item:!0,xs:12,md:6,className:a.headerRight},t))},Z=n(403),X=Object(b.a)((function(e){return{message:{fontStyle:"italic"},root:{alignItems:"center",display:"flex",justifyContent:"center",minWidth:e.spacing(40)},spinner:{marginRight:e.spacing(2)}}})),ee=function(e){var t=e.message,n=X();return o.a.createElement("div",{className:n.root},o.a.createElement(Z.a,{className:n.spinner}),o.a.createElement(K.a,{className:n.message},t||"Loading..."))},te=Object(b.a)((function(e){return{button:{marginRight:e.spacing(2),"& a":{color:"inherit",textDecoration:"none"}}}})),ne=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onLoad:function(){return e({type:"CATEGORIES_PAGE_LOADED",payload:M.a.Categories.getAll()})},onUnload:function(){return e({type:"CATEGORIES_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded,r=te();return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:"Manage Categories"},o.a.createElement(g.a,{className:r.button,color:"secondary"},o.a.createElement(f.a,{to:"/ingredients"},"Manage ingredients")),o.a.createElement(q,null)),a?o.a.createElement(J,null):o.a.createElement(ee,null))})),ae=n(716),re=n(413),ce=n(475),oe=n.n(ce),ie=function(e){return o.a.createElement("img",Object.assign({alt:"Chem Cash Logo",src:oe.a},e))},le=Object(b.a)((function(e){return{title:{color:"white",flexGrow:1},logo:{height:65,marginTop:e.spacing(2),marginRight:e.spacing(3),marginBottom:e.spacing(2)}}})),se=Object(r.c)((function(e){return{navTabValue:e.nav.navTabValue}}),(function(e){return{onClickLogout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=le(),n=e.navTabValue;return e.currentUser?o.a.createElement(ae.a,{position:"static"},o.a.createElement(p.a,null,o.a.createElement(re.a,null,o.a.createElement(ie,{className:t.logo}),o.a.createElement(K.a,{variant:"h5",align:"center",className:t.title},n&&n.charAt(0).toUpperCase()+n.slice(1)),o.a.createElement(g.a,{color:"inherit",onClick:e.onClickLogout},"Logout")))):null})),ue=n(77),de=n(408),me=Object(b.a)((function(e){return{paper:Object(ue.a)({},e.breakpoints.up("lg"),{maxWidth:"420px"})}})),pe=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.ingredients),{},{categories:e.categories.categories})}),(function(e){return{onAdd:function(t){return e({type:"ADD_INGREDIENT",payload:M.a.Ingredients.add(t),snackbar:{message:"Ingredient added",variant:"success"}})},onExit:function(){return e({type:"INGREDIENT_DIALOG_UNLOADED"})}}}))((function(e){var t=e.categories,n=e.errors,a=e.hideButton,r=e.ingredient,i=e.inProgress,l=e.isOpen,s=e.onAdd,u=e.onClose,d=e.onExit,m=Object(c.useState)(!1),p=Object(v.a)(m,2),f=p[0],b=p[1],O=Object(_.a)(),I=Object(L.a)(O.breakpoints.down("md")),R=me(),U=function(){b(!1)},k=function(e){s(Object(E.a)({},e))};return Object(c.useEffect)((function(){i||n||b(!1)}),[i]),Object(c.useEffect)((function(){b(!!l)}),[l]),o.a.createElement(o.a.Fragment,null,!a&&o.a.createElement(w,{item:"ingredient",onClick:function(){b(!0)}}),o.a.createElement(P.a,{classes:{paper:R.paper},fullScreen:I,fullWidth:!0,onClick:function(e){return e.stopPropagation()},onClose:U,onFocus:function(e){return e.stopPropagation()},open:f,TransitionProps:{onExit:function(){d(),u&&u()}}},o.a.createElement(D.c,{initialValues:{category:(null===r||void 0===r?void 0:r.category)||"",name:(null===r||void 0===r?void 0:r.name)||"",notes:(null===r||void 0===r?void 0:r.notes)||""},validationSchema:h.d({category:h.e().required("Required"),name:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(D.b,null,o.a.createElement(S.a,null,"Add ingredient"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:n}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!0,color:"primary",component:A.b,disabled:i,id:"name",label:"Ingredient Name",name:"name",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:i,id:"category",label:"Ingredient Category",name:"category",type:"select",select:!0,fullWidth:!0},t.map((function(e){return o.a.createElement(de.a,{key:e._id,value:e._id},e.name)})))),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:i,id:"notes",label:"Ingredient Notes",name:"notes",type:"text",fullWidth:!0})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{disabled:i,color:"primary",type:"submit",variant:"contained"},i?"Adding...":"Add"),o.a.createElement(g.a,{disabled:i,onClick:U,variant:"contained"},"Cancel"))))))})),Ee=Object(r.c)((function(e){return{categories:e.categories.categories,ingredients:e.ingredients.ingredients}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_INGREDIENT",payload:M.a.Ingredients.delete(t),snackbar:{message:"Ingredient deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_INGREDIENTS",payload:M.a.Ingredients.deleteMany(t),snackbar:{message:"".concat(t.length," ingredient").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_INGREDIENT",payload:M.a.Ingredients.update(t),snackbar:{message:"Ingredient updated",variant:"success"}})}}}))((function(e){var t=e.categories,n=e.ingredients,a=e.onDelete,r=e.onDeleteMany,i=e.onUpdate,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],m=Object(c.useState)([{title:"Name",field:"name"},{title:"Category",field:"category",lookup:t.reduce((function(e,t){return e[t._id]=t.name,e}),{})},{title:"Notes",field:"notes"}]),p=Object(v.a)(m,1)[0];return Object(c.useEffect)((function(){d(n)}),[n]),o.a.createElement(Y,{title:"Ingredients",columns:p,data:u,localization:{body:{emptyDataSourceMessage:"No ingredients found",editRow:{deleteText:"Delete ingredient? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{tooltip:"Delete all selected ingredients",icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));r(t)}(t)}}],editable:{onRowUpdate:function(e,t){return new Promise((function(n,a){var r=Object(B.a)(u);r[t.tableData.id]=e,d(Object(B.a)(r)),i(e),n()}))},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),a(e),t()}))}}})})),fe=Object(b.a)((function(e){return{button:{marginRight:e.spacing(2),"& a":{color:"inherit",textDecoration:"none"}}}})),be=Object(r.c)((function(e){return Object(E.a)({},e.ingredients)}),(function(e){return{onLoad:function(){return e({type:"INGREDIENTS_PAGE_LOADED",payload:Promise.all([M.a.Ingredients.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"INGREDIENTS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded,r=fe();return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:"Manage Ingredients"},o.a.createElement(g.a,{className:r.button,color:"secondary"},o.a.createElement(f.a,{to:"/ingredients/categories"},"Manage categories")),o.a.createElement(pe,null)),a?o.a.createElement(Ee,null):o.a.createElement(ee,null))})),ge=n(725),Oe=n(415),je=n(272),ye=Object(b.a)((function(e){return{actionButton:{color:e.palette.text.disabled}}})),ve=function(e){var t=ye(),n=e.className||"";return o.a.createElement(Oe.a,{arrow:!0,enterTouchDelay:0,title:e.action},o.a.createElement(je.a,{"aria-label":e.action,className:"".concat(t.actionButton," ").concat(n),onClick:function(t){t.stopPropagation(),e.onClick()},onFocus:function(e){return e.stopPropagation()},size:e.size},e.children))},De=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),Ae=Object(r.c)((function(e){return Object(E.a)({},e.users)}),(function(e){return{onAdd:function(t){return e({type:"ADD_USER",payload:M.a.Auth.register(t),snackbar:{message:"User added",variant:"success"}})},onExit:function(){return e({type:"USER_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_USER",payload:M.a.Users.update(t),snackbar:{message:"User updated",variant:"success"}})}}}))((function(e){var t=e.errors,n=e.inProgress,a=e.onAdd,r=e.onExit,i=e.onUpdate,l=e.user,s=Object(c.useState)(!1),u=Object(v.a)(s,2),d=u[0],m=u[1],p=Object(_.a)(),f=Object(L.a)(p.breakpoints.down("md")),b=De(),O=function(){m(!0)},U=function(){m(!1)},w=function(e){a(Object(E.a)(Object(E.a)({},e),{},{role:"subscriber"}))},k=function(e){i(Object(E.a)(Object(E.a)({},l),e))};return Object(c.useEffect)((function(){n||t||m(!1)}),[n]),o.a.createElement(o.a.Fragment,null,l?o.a.createElement(ve,{action:"Edit user",onClick:O},o.a.createElement(ge.a,null)):o.a.createElement(I.a,{color:"primary",onClick:O,variant:"extended"},o.a.createElement(R.a,{className:b.icon}),"Add user"),o.a.createElement(P.a,{fullScreen:f,open:d,onClose:U,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},TransitionProps:{onExit:r}},o.a.createElement(D.c,{initialValues:{firstName:(null===l||void 0===l?void 0:l.firstName)||"",lastName:(null===l||void 0===l?void 0:l.lastName)||"",username:(null===l||void 0===l?void 0:l.username)||"",password:""},validationSchema:h.d({firstName:h.e().required("Required"),lastName:h.e().required("Required"),username:h.e().required("Required"),password:h.e().required(l?"":"Required")}),onSubmit:function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l?k(t):w(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(D.b,null,o.a.createElement(S.a,null,l?"Edit User":"Add User"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:t}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{autoFocus:!l,color:"primary",component:A.b,disabled:n,label:"First Name",name:"firstName",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:n,label:"Last Name",name:"lastName",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:!!l||n,label:"Username",name:"username",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:n,label:"Password",name:"password",type:"text",fullWidth:!0})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:n,type:"submit",variant:"contained"},l?n?"Updating...":"Update":n?"Adding...":"Add"),o.a.createElement(g.a,{disabled:n,onClick:U,variant:"contained"},"Cancel"))))))})),he=n(713),_e=n(715),Le=n(465),Pe=n(714),Se=n(727),Ne=n(721),Te=n(726),Ce=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_USER",payload:M.a.Users.delete(t),snackbar:{message:"User deleted",variant:"success"}})}}}))((function(e){var t=e.onDelete,n=e.user,a=Object(c.useState)(!1),r=Object(v.a)(a,2),i=r[0],l=r[1],s=function(){l(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ve,{action:"Delete user",onClick:function(){l(!0)}},o.a.createElement(Te.a,null)),o.a.createElement(P.a,{open:i,onClick:function(e){return e.stopPropagation()},onClose:s,onFocus:function(e){return e.stopPropagation()}},o.a.createElement(S.a,null,"Delete User"),o.a.createElement(N.a,null,o.a.createElement(Ne.a,{component:"div"},"Are you sure you want to delete"," ",o.a.createElement("b",null,n.firstName," ",n.lastName),"? This action will permanently delete:",o.a.createElement("ul",null,o.a.createElement("li",null,"all categories"),o.a.createElement("li",null,"all ingredients"),o.a.createElement("li",null,"all meals"),o.a.createElement("li",null,"all plans"),o.a.createElement("li",null,"all recipes"),o.a.createElement("li",null,"all settings"),o.a.createElement("li",null,"all stores")),"associated with this user. This action ",o.a.createElement("b",null,"cannot be undone"),".")),o.a.createElement(C.a,null,o.a.createElement(g.a,{onClick:function(){l(!1),t(n)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),o.a.createElement(g.a,{onClick:s,variant:"contained"},"Cancel"))))})),Ie=Object(b.a)((function(e){return{userDetails:{display:"block"},userHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},userUsername:{marginRight:e.spacing(2),minWidth:e.spacing(12)},userName:{flexGrow:"1"}}})),Re=function(e){var t=e.users,n=Object(c.useState)(!1),a=Object(v.a)(n,2),r=a[0],i=a[1],l=Ie();return o.a.createElement(o.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return o.a.createElement(he.a,{expanded:r===e.username,key:e.username,onChange:(t=e.username,function(e,n){i(!!n&&t)})},o.a.createElement(_e.a,{expandIcon:o.a.createElement(Se.a,null)},o.a.createElement("div",{className:l.userHeader},o.a.createElement(Le.a,{color:"secondary",label:e.username,className:l.userUsername}),o.a.createElement(K.a,{className:l.userName,variant:"h5"},e.firstName," ",e.lastName),o.a.createElement(Ae,{user:e}),o.a.createElement(Ce,{user:e}))),o.a.createElement(Pe.a,{className:l.userDetails},o.a.createElement(K.a,{variant:"h6"},"Courses"),e.courses&&e.courses.length>0?e.courses.map((function(e){return o.a.createElement("div",{key:e._id},o.a.createElement(K.a,null,"Period ",e.period," | ",e.name," |"," ",e.students.length," students"))})):o.a.createElement("div",null,o.a.createElement(K.a,null,"No courses have been created"))));var t})):o.a.createElement(K.a,null,"No users found"))},Ue=Object(r.c)((function(e){return Object(E.a)({},e.users)}),(function(e){return{onLoad:function(){return e({type:"MANAGE_USERS_PAGE_LOADED",payload:M.a.Users.getAll()})},onUnload:function(){return e({type:"MANAGE_USERS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.users;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:"Manage Users"},o.a.createElement(Ae,null)),o.a.createElement(Re,{users:a}))})),we=n(742),ke=n(325),xe=n(181),Ge=n.n(xe),Me=n(182),Fe=n.n(Me),Ve=function(e){var t=e.name,n=e.onChange,a=e.recipes,r=e.values,i=Object(c.useState)([]),l=Object(v.a)(i,2),s=l[0],u=l[1],d=a.filter((function(e){return!1===e.isMeal})).map((function(e){var t=e.title[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)}));return Object(c.useEffect)((function(){u(d)}),[a]),o.a.createElement(we.a,{autoHighlight:!0,autoSelect:!0,getOptionLabel:function(e){return e.title},getOptionSelected:function(e,t){return e._id===t._id},groupBy:function(e){return e.firstLetter},multiple:!0,onChange:function(e,a){n(t,a)},options:s,renderInput:function(e){return o.a.createElement(ke.a,Object.assign({},e,{label:"Recipes",variant:"outlined"}))},renderOption:function(e,t){var n=t.inputValue,a=Fe()(e.title,n),r=Ge()(e.title,a);return o.a.createElement("div",null,r.map((function(e,t){return o.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))},value:r})},We=["","Breakfast","Lunch","Dinner","Snack","Other"],qe=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.meals),{},{recipes:e.recipes.recipes})}),(function(e){return{onAdd:function(t){return e({type:"ADD_MEAL",payload:M.a.Meals.add(t),snackbar:{message:"Meal added",variant:"success"}})},onExit:function(){return e({type:"MEAL_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_MEAL",payload:M.a.Meals.update(t),snackbar:{message:"Meal updated",variant:"success"}})}}}))((function(e){var t,n,a,r,i=e.editor,l=e.errors,s=e.inProgress,u=e.onAdd,d=e.onExit,m=e.onUpdate,p=e.recipes,f=Object(_.a)(),b=Object(L.a)(f.breakpoints.down("md")),O=Object(c.useState)(!1),I=Object(v.a)(O,2),R=I[0],U=I[1],k=function(){U(!1)},x=function(e){u(Object(E.a)({},e))},M=function(e){m(Object(E.a)(Object(E.a)({},i.meal),e))};return Object(c.useEffect)((function(){s||l||U(!1)}),[s]),Object(c.useEffect)((function(){U(!!i.meal)}),[i.meal]),o.a.createElement(o.a.Fragment,null,o.a.createElement(w,{item:"meal",onClick:function(){U(!0)}}),o.a.createElement(P.a,{fullWidth:!0,fullScreen:b,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:k,onFocus:function(e){return e.stopPropagation()},open:R,TransitionProps:{onExit:d}},o.a.createElement(D.c,{initialValues:{title:(null===(t=i.meal)||void 0===t?void 0:t.title)||"",recipes:(null===(n=i.meal)||void 0===n?void 0:n.recipes)||[],mealType:(null===(a=i.meal)||void 0===a?void 0:a.mealType)||"",notes:(null===(r=i.meal)||void 0===r?void 0:r.notes)||""},validationSchema:h.d({title:h.e().required("Required"),recipes:h.a(),mealType:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.meal?M(t):x(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return o.a.createElement(D.b,null,o.a.createElement(S.a,null,i.meal?"Update meal":"Add meal"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:l}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!i.meal,component:A.b,disabled:s,id:"title",label:"Meal Title",name:"title",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:s,id:"mealType",label:"Meal Type",name:"mealType",type:"select",select:!0,fullWidth:!0},We.map((function(e){var t=e.toLowerCase();return o.a.createElement(de.a,{key:t,value:t},e)})))),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:s,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(Ve,{onChange:e.setFieldValue,name:"recipes",recipes:p,values:e.values.recipes})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:s,type:"submit",variant:"contained"},i.meal?s?"Updating...":"Update":s?"Adding...":"Add"),o.a.createElement(g.a,{disabled:s,onClick:k,variant:"contained"},"Cancel")))}))))})),Be=Object(r.c)((function(e){return{meals:e.meals.meals,recipes:e.recipes.recipes}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_MEAL",payload:M.a.Meals.delete(t),snackbar:{message:"Meal deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_MEALS",payload:M.a.Meals.deleteMany(t),snackbar:{message:"".concat(t.length," meal").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onLoadUpdate:function(t){return e({type:"MEAL_DIALOG_LOADED",meal:t})}}}))((function(e){var t=e.meals,n=e.onDelete,a=e.onDeleteMany,r=e.onLoadUpdate,i=e.recipes,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],m=Object(c.useState)([{title:"Title",field:"title"},{title:"Meal Type",field:"mealType",lookup:We.reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{})},{title:"Notes",field:"notes"}]),p=Object(v.a)(m,1)[0];return Object(c.useEffect)((function(){var e=i.filter((function(e){return!0===e.isMeal})),n=[].concat(Object(B.a)(e),Object(B.a)(t)).sort((function(e,t){return e.title.localeCompare(t.title)}));d(n)}),[t,i]),o.a.createElement(H.a,{title:"Meals",columns:p,data:u,localization:{body:{emptyDataSourceMessage:"No meals found",editRow:{deleteText:"Delete meal? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,selectionProps:function(e){return{disabled:!!e.isMeal}},toolbar:!0},actions:[{action:function(e){return{disabled:!!e.isMeal,icon:"edit",onClick:function(e,t){r(t)},tooltip:e.isMeal?"Cannot edit recipes here":"Update meal"}},position:"row"},{icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));a(t)}(t)},position:"toolbarOnSelect",tooltip:"Delete all selected meals"}],editable:{isDeletable:function(e){return!e.isMeal},onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),n(e),t()}))}}})})),ze=Object(r.c)((function(e){return{pageLoaded:e.meals.pageLoaded}}),(function(e){return{onLoad:function(){return e({type:"MEALS_PAGE_LOADED",payload:Promise.all([M.a.Meals.getAll(),M.a.Recipes.getAll()])})},onUnload:function(){return e({type:"MEALS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:"Manage Meals"},o.a.createElement(qe,null)),a?o.a.createElement(Be,null):o.a.createElement(ee,null))})),He=n(717),Ye=n(718),Je=n(404),Ke=n(729),$e=n(730),Qe=n(476),Ze=Object(b.a)({nav:{position:"fixed",bottom:0,width:"100%",zIndex:"1000"}}),Xe=Object(r.c)((function(e){return{currentUser:e.common.currentUser,navTabValue:e.nav.navTabValue,path:e.router.location.pathname}}),(function(e){return{onLoad:function(t,n){return e({type:"NAV_LOADED",value:t,redirectTo:n})},onTabChange:function(t,n){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:n})},onUnload:function(){return e({type:"NAV_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.navTabValue,a=e.onLoad,r=e.onTabChange,i=e.onUnload,l=e.path,s=Ze(),u=t.role,d=function(e){r(e,"/".concat(e))};return Object(c.useEffect)((function(){var e=l.split("/")[1];if(e&&""!==e)a(e,e);else{var t="admin"===u?"users":"plans";a(t,t)}return function(){i()}}),[]),Object(c.useEffect)((function(){var e=Object(Qe.loadCSS)("https://use.fontawesome.com/releases/v5.15.3/css/all.css",document.querySelector("#font-awesome-css"));return function(){e.parentNode.removeChild(e)}})),"admin"===u?o.a.createElement(He.a,{className:s.nav,onChange:function(e,t){d(t)},showLabels:!0,value:n},o.a.createElement(Ye.a,{label:"Users",icon:o.a.createElement(Ke.a,null),value:"users"}),o.a.createElement(Ye.a,{label:"Settings",icon:o.a.createElement($e.a,null),value:"settings"})):o.a.createElement(He.a,{className:s.nav,onChange:function(e,t){d(t)},showLabels:!0,value:n},o.a.createElement(Ye.a,{label:"Plans",icon:o.a.createElement(Je.a,{className:"fa fa-calendar-week"}),value:"plans"}),o.a.createElement(Ye.a,{label:"Meals",icon:o.a.createElement(Je.a,{className:"fa fa-utensils"}),value:"meals"}),o.a.createElement(Ye.a,{label:"Recipes",icon:o.a.createElement(Je.a,{className:"fa fa-hamburger"}),value:"recipes"}),o.a.createElement(Ye.a,{label:"Ingredients",icon:o.a.createElement(Je.a,{className:"fa fa-carrot"}),value:"ingredients"}),o.a.createElement(Ye.a,{label:"Settings",icon:o.a.createElement($e.a,null),value:"settings"}))})),et=Object(b.a)((function(e){return{wrapper:{marginTop:e.spacing(4),marginBottom:e.spacing(11)}}})),tt=function(e){var t=et();return o.a.createElement("div",{className:t.wrapper},e.children)},nt=function(e){return o.a.createElement(tt,null,o.a.createElement(p.a,null,o.a.createElement(K.a,{variant:"h2"},"Error 404: Page Not Found")))},at=n(330),rt=n(328),ct=n(285),ot=n(731),it=Object(b.a)((function(e){return{checked:{"& + span":{color:e.palette.primary.light,textDecoration:"line-through","& svg":{opacity:.5}}},icon:{marginLeft:e.spacing(1)},listItem:{alignItems:"center",display:"flex"}}})),lt=function(e){var t=e.list,n=it(),a=Object(c.useState)({}),r=Object(v.a)(a,2),i=r[0],l=r[1],s=function(e){l(Object(E.a)(Object(E.a)({},i),{},Object(ue.a)({},e.target.name,e.target.checked)))};return t.length>0?o.a.createElement(at.a,null,t.map((function(e){var t;return o.a.createElement(rt.a,{control:o.a.createElement(ct.a,{checked:null!==(t=i["".concat(e.name,"-").concat(e.unit)])&&void 0!==t&&t,classes:{checked:n.checked},onChange:s,name:"".concat(e.name,"-").concat(e.unit)}),key:"".concat(e.id,"-").concat(e.unit),label:o.a.createElement("span",{className:n.listItem},"".concat(e.name," (").concat(e.quantity," ").concat(e.unit,")"),o.a.createElement(Oe.a,{arrow:!0,title:"Needed for: ".concat(e.recipes.join(", "))},o.a.createElement(ot.a,{className:n.icon,color:"secondary"})))})}))):o.a.createElement(K.a,null,"No ingredients found")},st=n(267),ut=n(482),dt=n(287),mt=function(e){var t=e.defaultStore,n=e.onChange,a=e.stores,r=Object(c.useState)(t),i=Object(v.a)(r,2),l=i[0],s=i[1];return o.a.createElement(st.a,{fullWidth:!0},o.a.createElement(ut.a,{id:"store-selector-label"},"Select a Store"),o.a.createElement(dt.a,{id:"store-selector",labelId:"store-selector-label",onChange:function(e){var t=e.target.value;n(t),s(t)},value:l},a.map((function(e){return o.a.createElement(de.a,{key:e._id,value:e._id},e.name)}))))},pt=Object(r.c)((function(e){return{categories:e.categories.categories,defaultStore:e.common.settings.defaultStore,ingredients:e.ingredients.ingredients,meals:e.meals.meals,plan:e.plans.viewer.plan,recipes:e.recipes.recipes,stores:e.stores.stores}}),(function(e){return{onCopy:function(){return e({type:"PLAN_LIST_COPIED",snackbar:{message:"List copied",variant:"success"}})},onExit:function(){return e({type:"PLAN_LIST_DIALOG_UNLOADED"})}}}))((function(e){var t=e.categories,n=e.defaultStore,a=e.ingredients,r=e.meals,i=e.onCopy,l=e.onExit,s=e.plan,u=e.recipes,d=e.stores,m=Object(c.useState)([]),p=Object(v.a)(m,2),f=p[0],b=p[1],O=Object(c.useState)(!1),j=Object(v.a)(O,2),y=j[0],D=j[1],A=Object(c.useState)(n),h=Object(v.a)(A,2),I=h[0],R=h[1],U=Object(_.a)(),w=Object(L.a)(U.breakpoints.down("md")),k=function(){if(s){for(var e=[],n=0,c=Object.entries(s.meals);n<c.length;n++){var o=Object(v.a)(c[n],2),i=(o[0],o[1].map((function(e){var t;return null!==(t=r.find((function(t){return t._id===e})))&&void 0!==t?t:u.find((function(t){return t._id===e}))})));e=[].concat(Object(B.a)(e),Object(B.a)(i))}var l=e.flatMap((function(e){return e.hasOwnProperty("recipes")?e.recipes:e})).flatMap((function(e){return e.ingredients.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{recipe:e.title})}))})).map((function(e){var n=a.find((function(t){return t._id===e.id})),r=t.find((function(e){return e._id===n.category}));return Object(E.a)(Object(E.a)({},e),{},{category:r._id,name:n.name})})).reduce((function(e,t){var n={id:t.id,name:t.name,quantity:t.quantity,recipes:[t.recipe],unit:t.unit};return e.hasOwnProperty(t.category)?e[t.category].push(n):e[t.category]=[n],e}),{}),m=[];return d.find((function(e){return e._id===I})).categories.forEach((function(e){var t,n=(null!==(t=l[e._id])&&void 0!==t?t:[]).reduce((function(e,t){var n=function(e){return e.id===t.id&&e.unit===t.unit};if(e.find((function(e){return n(e)}))){var a=e.findIndex((function(e){return n(e)}));e[a]=Object(E.a)(Object(E.a)({},e[a]),{},{quantity:e[a].quantity+t.quantity,recipes:e[a].recipes.concat(t.recipes.filter((function(t){return e[a].recipes.indexOf(t)<0})))})}else e.push(t);return e}),[]);m.push(n)})),m.flat()}return[]},x=function(){D(!1)};return Object(c.useEffect)((function(){y&&b(k())}),[y]),Object(c.useEffect)((function(){D(!!s)}),[s]),Object(c.useEffect)((function(){b(k())}),[I]),o.a.createElement(P.a,{fullScreen:w,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:x,onFocus:function(e){return e.stopPropagation()},open:y,TransitionProps:{onExit:function(){R(n),b([]),l()}}},o.a.createElement(S.a,null,"Shopping List for ",null===s||void 0===s?void 0:s.title),o.a.createElement(N.a,null,o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(mt,{defaultStore:n,onChange:function(e){R(e)},stores:d})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(lt,{list:f})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",onClick:function(){var e=f.map((function(e){return"".concat(e.name," (").concat(e.quantity," ").concat(e.unit,")")})).join("\n");navigator.clipboard.writeText(e).then((function(){i()}),(function(e){console.error("error",e)}))},variant:"contained"},"Copy list"),o.a.createElement(g.a,{onClick:x,variant:"contained"},"Close")))})),Et=n(64),ft=n(187),bt=n(732),gt=function(e){var t=e.index,n=e.meal,a=e.onRemove,r=e.uniqueId,c=Object(_.a)();return o.a.createElement(Et.Draggable,{key:r,draggableId:r,index:t},(function(e,t){return o.a.createElement(ft.a,Object.assign({elevation:3,ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(i=t.isDragging,l=e.draggableProps.style,Object(E.a)({alignItems:"center",background:i?c.palette.secondary.light:"white",display:"flex",justifyContent:"space-between",marginBottom:c.spacing(1),padding:c.spacing(1),userSelect:"none"},l))}),n.title,o.a.createElement(je.a,{id:r,onClick:a,size:"small"},o.a.createElement(bt.a,null)));var i,l}))},Ot=function(e){var t=e.meals,n=e.name,a=e.onChange,r=Object(c.useState)([]),i=Object(v.a)(r,2),l=i[0],s=i[1],u=t.map((function(e){var t=e.title[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)}));return Object(c.useEffect)((function(){s(u)}),[t]),o.a.createElement(we.a,{autoHighlight:!0,autoSelect:!0,getOptionLabel:function(e){return e.title},groupBy:function(e){return e.firstLetter},onChange:function(e,t){a(n,null===t||void 0===t?void 0:t._id)},options:l,renderInput:function(e){return o.a.createElement(ke.a,Object.assign({},e,{autoFocus:!0,label:"Meals",variant:"outlined"}))},renderOption:function(e,t){var n=t.inputValue,a=Fe()(e.title,n),r=Ge()(e.title,a);return o.a.createElement("div",null,r.map((function(e,t){return o.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}})},jt=function(e){var t=e.day,n=e.meals,a=e.onAdd,r=Object(c.useState)(!1),i=Object(v.a)(r,2),l=i[0],s=i[1],u=Object(_.a)(),d=Object(L.a)(u.breakpoints.down("md")),m=function(){s(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Oe.a,{arrow:!0,title:"Add meal to ".concat(t)},o.a.createElement(I.a,{color:"secondary",onClick:function(){s(!0)},size:"small"},o.a.createElement(R.a,null))),o.a.createElement(P.a,{fullScreen:d,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:m,onFocus:function(e){return e.stopPropagation()},open:l,TransitionProps:{onExit:function(){}}},o.a.createElement(D.c,{initialValues:{meal:""},onSubmit:function(e){!function(e){var n={day:t,mealId:e.meal};a(n),m()}(e)}},(function(e){return o.a.createElement(D.b,null,o.a.createElement(S.a,null,"Add meal to ",t),o.a.createElement(N.a,null,o.a.createElement(Ot,{meals:n,name:"meal",onChange:e.setFieldValue})),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:!e.values.meal,type:"submit",variant:"contained"},"Add"),o.a.createElement(g.a,{onClick:m,variant:"contained"},"Cancel")))}))))},yt=Object(b.a)((function(e){var t;return{dayHeader:(t={alignItems:"center",borderBottom:"2px solid ".concat(e.palette.secondary.light),display:"flex",justifyContent:"space-between",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(1),"px ").concat(e.spacing(1),"px"),width:"100%"},Object(ue.a)(t,e.breakpoints.up("lg"),{width:"50%"}),Object(ue.a)(t,"& > button",{visibility:"hidden"}),Object(ue.a)(t,"&:hover > button",{visibility:"visible"}),t)}})),vt=function(e){var t=e.day,n=e.mealPlan,a=e.meals,r=e.onAdd,c=e.onRemove,i=Object(_.a)(),l=Object(L.a)(i.breakpoints.down("md")),s=yt(),u=n.map((function(e){return a.find((function(t){return t._id===e}))}));return o.a.createElement("div",null,o.a.createElement("div",{className:s.dayHeader},o.a.createElement(K.a,{color:"primary",variant:"h6"},o.a.createElement("em",null,t)),o.a.createElement(jt,{day:t,meals:a,onAdd:r})),o.a.createElement(Et.Droppable,{droppableId:t},(function(e,n){return o.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(a=n.isDraggingOver,{border:a?"2px dashed ".concat(i.palette.primary.light):"2px dashed white",minHeight:"120px",padding:i.spacing(1),width:l?"100%":"50%"})}),u.map((function(e,n){var a="".concat(t,"-").concat(e._id,"-").concat(n);return o.a.createElement(gt,{index:n,key:a,meal:e,onRemove:c,uniqueId:a})})),e.placeholder);var a})))},Dt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],At=function(e){var t=e.meals,n=e.mealPlan,a=e.name,r=e.onChange,i=Object(c.useState)(n),l=Object(v.a)(i,2),s=l[0],u=l[1],d=function(e){var t=e.day,c=e.mealId,o=Object(E.a)({},n);o[t].push(c),u(o),r(a,o)},m=function(e){var t=e.currentTarget.getAttribute("id").split("-"),c=Object(v.a)(t,2),o=c[0],i=c[1],l=Object(E.a)({},n),s=l[o].indexOf(i);l[o].splice(s,1),u(l),r(a,l)};return o.a.createElement(Et.DragDropContext,{onDragEnd:function(e){var t=e.destination,c=e.source,o=e.draggableId;if(t&&(t.droppableId!==c.droppableId||t.index!==c.index)){var i=c.droppableId,l=t.droppableId,s=o.split("-")[1],d=Object(E.a)({},n);d[i].splice(c.index,1),d[l].splice(t.index,0,s),u(d),r(a,d)}}},Dt.map((function(e){return o.a.createElement(vt,{day:e,key:e,meals:t,mealPlan:s[e],onAdd:d,onRemove:m})})))},ht=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.plans),{},{meals:e.meals.meals,recipes:e.recipes.recipes})}),(function(e){return{onAdd:function(t){return e({type:"ADD_PLAN",payload:M.a.Plans.add(t),snackbar:{message:"Plan added",variant:"success"}})},onExit:function(){return e({type:"PLAN_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_PLAN",payload:M.a.Plans.update(t),snackbar:{message:"Plan updated",variant:"success"}})}}}))((function(e){var t,n,a,r,i,l=e.editor,s=e.errors,u=e.inProgress,d=e.meals,m=e.onAdd,p=e.onExit,f=e.onUpdate,b=function(e,t){var n=Object(B.a)(e),a=t.filter((function(e){return e.isMeal})).map((function(e){return{mealType:e.mealType,notes:e.notes,recipes:[e],slug:e.slug,title:e.title,_id:e._id}}));return[].concat(Object(B.a)(n),Object(B.a)(a)).sort((function(e,t){return e.title.localeCompare(t.title)}))}(d,e.recipes),O=Dt.reduce((function(e,t){return e[t]=[],e}),{}),_=Object(c.useState)(!1),L=Object(v.a)(_,2),I=L[0],R=L[1],U=function(){R(!1)},k=function(e){m(Object(E.a)({},e))},x=function(e){f(Object(E.a)(Object(E.a)({},l.plan),e))};return Object(c.useEffect)((function(){u||s||R(!1)}),[u]),Object(c.useEffect)((function(){R(!!l.plan)}),[l.plan]),o.a.createElement(o.a.Fragment,null,o.a.createElement(w,{item:"plan",onClick:function(){R(!0)}}),o.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:U,onFocus:function(e){return e.stopPropagation()},open:I,scroll:"body",TransitionProps:{onExit:p}},o.a.createElement(D.c,{initialValues:{meals:(null===(t=l.plan)||void 0===t?void 0:t.meals)||O,notes:(null===(n=l.plan)||void 0===n?void 0:n.notes)||"",order:(null===(a=l.plan)||void 0===a?void 0:a.order)||0,skip:(null===(r=l.plan)||void 0===r?void 0:r.skip)||!1,title:(null===(i=l.plan)||void 0===i?void 0:i.title)||""},validationSchema:h.d({meals:h.d(),notes:h.e(),order:h.c(),skip:h.b(),title:h.e().required("Required")}),onSubmit:function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.plan?x(t):k(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return o.a.createElement(D.b,null,o.a.createElement(S.a,null,l.plan?"Update plan":"Add plan"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:s}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!l.plan,component:A.b,disabled:u,id:"title",label:"Plan Title",name:"title",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:u,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Meals"),o.a.createElement(At,{meals:b,mealPlan:e.values.meals,name:"meals",onChange:e.setFieldValue})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:u,type:"submit",variant:"contained"},l.plan?u?"Updating...":"Update":u?"Adding...":"Add"),o.a.createElement(g.a,{disabled:u,onClick:U,variant:"contained"},"Cancel")))}))))})),_t=Object(r.c)((function(e){return{plans:e.plans.plans}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_PLAN",payload:M.a.Plans.delete(t),snackbar:{message:"Plan deleted",variant:"success"}})},onLoadUpdate:function(t){return e({type:"PLAN_DIALOG_LOADED",plan:t})},onViewShoppingList:function(t){return e({type:"PLAN_LIST_DIALOG_LOADED",plan:t})}}}))((function(e){var t=e.onDelete,n=e.onLoadUpdate,a=e.onViewShoppingList,r=e.plans,i=Object(c.useState)([]),l=Object(v.a)(i,2),s=l[0],u=l[1],d=Object(c.useState)([{title:"Title",field:"title"},{title:"Notes",field:"notes"}]),m=Object(v.a)(d,1)[0];return Object(c.useEffect)((function(){u(r)}),[r]),o.a.createElement(H.a,{title:"Plans",columns:m,data:s,localization:{body:{emptyDataSourceMessage:"No plans found",editRow:{deleteText:"Delete plan? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,toolbar:!0},actions:[{action:function(e){return{icon:"list",onClick:function(e,t){a(t)},tooltip:"View shopping list",position:"row"}}},{action:function(e){return{icon:"edit",onClick:function(e,t){n(t)},tooltip:"Update plan",position:"row"}}}],editable:{onRowDelete:function(e){return new Promise((function(n,a){var r=Object(B.a)(s),c=e.tableData.id;r.splice(c,1),u(Object(B.a)(r)),t(e),n()}))}}})})),Lt=Object(r.c)((function(e){return{pageLoaded:e.plans.pageLoaded}}),(function(e){return{onLoad:function(){return e({type:"PLANS_PAGE_LOADED",payload:Promise.all([M.a.Plans.getAll(),M.a.Meals.getAll(),M.a.Recipes.getAll(),M.a.Ingredients.getAll(),M.a.Categories.getAll(),M.a.Stores.getAll()])})},onUnload:function(){return e({type:"PLANS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:"Manage Plans"},o.a.createElement(ht,null)),a?o.a.createElement(_t,null):o.a.createElement(ee,null),o.a.createElement(pt,null))})),Pt=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){return e.currentUser?o.a.createElement(s.b,{exact:!0,path:e.path,component:e.component}):o.a.createElement(s.a,{to:"/"})})),St=n(728),Nt=Object(St.a)(),Tt=Object(r.c)((function(e){return{editor:e.recipes.editor,ingredients:e.ingredients.ingredients}}),(function(e){return{onBlur:function(){return e({type:"RECIPE_INGREDIENT_ONBLUR"})}}}))((function(e){var t=e.editor,n=e.ingredients,a=e.onBlur,r=e.onChange,i=e.value,l=Object(c.useState)(null),s=Object(v.a)(l,2),u=s[0],d=s[1],m=Object(c.useState)([]),p=Object(v.a)(m,2),f=p[0],b=p[1],g=Object(c.useState)(null!==i&&void 0!==i?i:null),O=Object(v.a)(g,2),j=O[0],y=O[1],D=n.map((function(e){var t=e.name[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)})),A=function(e,t){"string"!==typeof t&&(y(t),r(e,t)),a()};Object(c.useEffect)((function(){b(D)}),[n]),Object(c.useEffect)((function(){t.ingredient&&(y(t.ingredient),r({},t.ingredient),a())}),[t.ingredient]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(we.a,{autoHighlight:!0,autoSelect:!0,freeSolo:!0,options:f,value:j,filterOptions:function(e,t){var n=Nt(e,t);return""!==t.inputValue&&n.push({inputValue:t.inputValue,name:'Add "'.concat(t.inputValue,'"')}),n},getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.name},getOptionSelected:function(e,t){return e._id===(null===t||void 0===t?void 0:t._id)},groupBy:function(e){return e.firstLetter},onKeyDown:function(e){return function(e){"Enter"===e.key&&e.stopPropagation()}(e)},renderInput:function(e){return o.a.createElement(ke.a,Object.assign({},e,{autoFocus:!0,label:"Ingredient name",variant:"outlined"}))},onBlur:a,onChange:function(e,t){t&&t.inputValue&&d({name:t.inputValue}),A(e,t)},renderOption:function(e,t){var n=t.inputValue,a=Fe()(e.name,n),r=Ge()(e.name,a);return o.a.createElement("div",null,r.map((function(e,t){return o.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}}),o.a.createElement(pe,{hideButton:!0,ingredient:u,isOpen:!!u,onClose:function(){d(null)}}))})),Ct=function(e,t,n){return{name:e,abbr:t,conv:n}},It=[["count","ct",0],["cup","c",0],["pound","lb",0],["tablespoon","tbsp",0],["teaspoon","tsp",0]].map((function(e){return Ct.apply(void 0,Object(B.a)(e))})),Rt=function(e){var t=e.ingredients,n=e.ingredientsList,a=e.onChange,r=Object(c.useState)([]),i=Object(v.a)(r,2),l=i[0],s=i[1],u=Object(c.useState)([]),d=Object(v.a)(u,2),m=d[0],p=d[1];return Object(c.useEffect)((function(){s([{title:"Name",field:"id",lookup:n.reduce((function(e,t){return e[t._id]=t.name,e}),{}),editComponent:function(e){return o.a.createElement(Tt,{onChange:function(t,n){return e.onChange(null===n||void 0===n?void 0:n._id)},value:n.find((function(t){return t._id===e.value}))})}},{title:"Quantity",field:"quantity"},{title:"Unit",field:"unit",lookup:It.reduce((function(e,t){return e[t.abbr]="".concat(t.name,"s"),e}),{})},{title:"Notes",field:"notes"}])}),[n]),Object(c.useEffect)((function(){p(t)}),[t]),o.a.createElement(H.a,{title:"Ingredients",columns:l,data:m,localization:{body:{emptyDataSourceMessage:"No ingredients have been added",editRow:{deleteText:"Remove ingredient from this recipe?"}}},options:{actionsColumnIndex:-1,paging:!1,search:!1},editable:{onRowAdd:function(e){return new Promise((function(t,n){p([].concat(Object(B.a)(m),[e])),a([].concat(Object(B.a)(m),[e])),t()}))},onRowUpdate:function(e,t){return new Promise((function(n,r){var c=Object(B.a)(m);c[t.tableData.id]=e,p(Object(B.a)(c)),a(Object(B.a)(c)),n()}))},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(B.a)(m),c=e.tableData.id;r.splice(c,1),p(Object(B.a)(r)),a(Object(B.a)(r)),t()}))}}})},Ut=n(477),wt=n.n(Ut),kt=n(334),xt=Object(b.a)((function(e){return{error:{color:"#f44336",fontSize:"0.75rem",fontWeight:400,letterSpacing:"0.03333em",lineHeight:1.66,margin:0,marginTop:"3px",textAlign:"left"}}})),Gt=function(e){var t=Object(c.useState)(null),n=Object(v.a)(t,1)[0],a=xt();return o.a.createElement(o.a.Fragment,null,o.a.createElement(wt.a,Object.assign({controls:["numberList","bold","italic","underline","undo","redo"],defaultValue:e.initialValue,error:n&&e.touched,label:e.placeholder,onBlur:function(){!e.readOnly&&e.onEditorBlur(e.name,!0,!1)},onChange:function(t){!e.readOnly&&e.onEditorChange(e.name,JSON.stringify(Object(kt.convertToRaw)(t.getCurrentContent())),!1)}},e)),n&&e.touched&&o.a.createElement("div",{className:a.error},n))},Mt=function(){var e=Object(D.e)(),t=e.values,n=e.setFieldValue;return Object(c.useEffect)((function(){t.isMeal||n("mealType","")}),[t]),null},Ft=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.recipes),{},{ingredients:e.ingredients.ingredients})}),(function(e){return{onAdd:function(t){return e({type:"ADD_RECIPE",payload:M.a.Recipes.add(t),snackbar:{message:"Recipe added",variant:"success"}})},onExit:function(){return e({type:"RECIPE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_RECIPE",payload:M.a.Recipes.update(t),snackbar:{message:"Recipe updated",variant:"success"}})}}}))((function(e){var t,n,a,r,i,l,s,u,d,m=e.editor,p=e.errors,f=e.ingredients,b=e.inProgress,O=e.onAdd,_=e.onExit,L=e.onUpdate,I=Object(c.useState)(!1),R=Object(v.a)(I,2),U=R[0],k=R[1],x=function(){k(!1)},M=function(e){O(Object(E.a)({},e))},F=function(e){L(Object(E.a)(Object(E.a)({},m.recipe),e))};return Object(c.useEffect)((function(){b||p||k(!1)}),[b]),Object(c.useEffect)((function(){k(!!m.recipe)}),[m.recipe]),o.a.createElement(o.a.Fragment,null,o.a.createElement(w,{item:"recipe",onClick:function(){k(!0)}}),o.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:x,onFocus:function(e){return e.stopPropagation()},open:U,TransitionProps:{onExit:_}},o.a.createElement(D.c,{initialValues:{directions:(null===(t=m.recipe)||void 0===t?void 0:t.directions)||"",ingredients:(null===(n=m.recipe)||void 0===n?void 0:n.ingredients)||[],isMeal:(null===(a=m.recipe)||void 0===a?void 0:a.isMeal)||!1,mealType:(null===(r=m.recipe)||void 0===r?void 0:r.mealType)||"",notes:(null===(i=m.recipe)||void 0===i?void 0:i.notes)||"",prepTime:(null===(l=m.recipe)||void 0===l?void 0:l.prepTime)||"",servings:(null===(s=m.recipe)||void 0===s?void 0:s.servings)||"",title:(null===(u=m.recipe)||void 0===u?void 0:u.title)||"",wwPoints:(null===(d=m.recipe)||void 0===d?void 0:d.wwPoints)||""},validationSchema:h.d({directions:h.e().required("Required"),ingredients:h.a(),isMeal:h.b(),mealType:h.e(),notes:h.e(),prepTime:h.c().required("Required"),servings:h.c().required("Required"),title:h.e().required("Required"),wwPoints:h.c()}),onSubmit:function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.recipe?F(t):M(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t;return o.a.createElement(D.b,null,o.a.createElement(S.a,null,m.recipe?"Update recipe":"Add recipe"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:p}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{autoFocus:!m.recipe,component:A.b,disabled:b,id:"title",label:"Recipe Title",name:"title",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:6,md:3},o.a.createElement(D.a,{component:A.a,disabled:b,type:"checkbox",name:"isMeal",Label:{label:"This recipe is a meal"}}),o.a.createElement(Mt,null)),o.a.createElement(T.a,{item:!0,xs:6,md:3},e.values.isMeal&&o.a.createElement(D.a,{component:A.b,disabled:b,id:"mealType",label:"Meal Type",name:"mealType",type:"select",select:!0,fullWidth:!0},We.map((function(e){var t=e.toLowerCase();return o.a.createElement(de.a,{key:t,value:t},e)})))),o.a.createElement(T.a,{item:!0,xs:12,md:4},o.a.createElement(D.a,{component:A.b,disabled:b,id:"servings",label:"Servings",name:"servings",type:"number",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:4},o.a.createElement(D.a,{component:A.b,disabled:b,id:"prepTime",label:"Prep Time",name:"prepTime",type:"number",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:4},o.a.createElement(D.a,{component:A.b,disabled:b,id:"wwPoints",label:"WW Points",name:"wwPoints",type:"number",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:b,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,lg:6},o.a.createElement(K.a,{variant:"h6"},"Directions"),o.a.createElement(Gt,{errors:e.errors.directions,initialValue:null===(t=m.recipe)||void 0===t?void 0:t.directions,name:"directions",onEditorBlur:e.setFieldTouched,onEditorChange:e.setFieldValue,placeholder:"Enter recipe directions here...",touched:e.touched.directions})),o.a.createElement(T.a,{item:!0,xs:12,lg:6},o.a.createElement(Rt,{ingredients:e.values.ingredients,ingredientsList:f,onChange:function(t){e.setFieldValue("ingredients",t)}})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:b,type:"submit",variant:"contained"},m.recipe?b?"Updating...":"Update":b?"Adding...":"Add"),o.a.createElement(g.a,{disabled:b,onClick:x,variant:"contained"},"Cancel")))}))))})),Vt=Object(b.a)((function(e){return{ingredients:{backgroundColor:"#eee"},ingredientsList:{listStyle:"none",paddingLeft:e.spacing(2),"& li":{marginBottom:e.spacing(2)}},ingredientName:{fontSize:e.typography.subtitle1.fontSize,fontWeight:"bold"},ingredientDetails:{color:e.palette.text.secondary},paper:{padding:e.spacing(2)}}})),Wt=function(e){var t=e.ingredients,n=e.recipe,a=Vt();return n&&o.a.createElement(ft.a,{className:a.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5"},n.title),o.a.createElement(K.a,{variant:"subtitle2"},function(e){var t=[];return e.servings&&t.push(o.a.createElement(o.a.Fragment,{key:1},o.a.createElement("em",null,"Servings: "),o.a.createElement("u",null,e.servings))),t.push(" | "),e.prepTime&&t.push(o.a.createElement(o.a.Fragment,{key:2},o.a.createElement("em",null,"Prep Time: "),o.a.createElement("u",null,e.prepTime))),e.wwPoints&&(t.push(" | "),t.push(o.a.createElement(o.a.Fragment,{key:3},o.a.createElement("em",null,"WW Points: "),o.a.createElement("u",null,e.wwPoints)))),e.isMeal&&(t.push(" | "),t.push(o.a.createElement(o.a.Fragment,{key:4},o.a.createElement("em",null,"Meal Type: "),o.a.createElement("u",null,e.mealType)))),t}(n))),o.a.createElement(T.a,{item:!0,xs:12,className:a.ingredients},o.a.createElement(K.a,{variant:"h6"},"Ingredients"),o.a.createElement("ul",{className:a.ingredientsList},n.ingredients.map((function(e){var n,r=(n=e.id,t.find((function(e){return e._id===n})));return e.id?o.a.createElement("li",{key:e.id},o.a.createElement("span",{className:a.ingredientName},null===r||void 0===r?void 0:r.name),o.a.createElement("br",null),o.a.createElement("span",{className:a.ingredientDetails},"".concat(e.quantity||""," ").concat(e.unit||""),e.notes&&", ".concat(e.notes))):null})))),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Directions"),o.a.createElement(Gt,{initialValue:null===n||void 0===n?void 0:n.directions,toolbar:!1,readOnly:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Notes"),o.a.createElement(K.a,null,n.notes))))},qt=Object(r.c)((function(e){return{recipes:e.recipes.recipes}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_RECIPE",payload:M.a.Recipes.delete(t),snackbar:{message:"Recipe deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_RECIPES",payload:M.a.Recipes.deleteMany(t),snackbar:{message:"".concat(t.length," recipe").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onLoadUpdate:function(t){return e({type:"RECIPE_DIALOG_LOADED",recipe:t})},onLoadView:function(t){return e({type:"RECIPE_VIEW_LOADED",recipe:t})}}}))((function(e){var t=e.onDelete,n=e.onDeleteMany,a=e.onLoadUpdate,r=e.onLoadView,i=e.recipes,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],m=Object(c.useState)([{title:"Title",field:"title"},{title:"Prep Time",field:"prepTime"},{title:"Servings",field:"servings"},{title:"WW Points",field:"wwPoints"},{title:"Meal Type",field:"mealType"},{title:"Notes",field:"notes"}]),p=Object(v.a)(m,1)[0];return Object(c.useEffect)((function(){d(i)}),[i]),o.a.createElement(H.a,{title:"Recipes",columns:p,data:u,localization:{body:{emptyDataSourceMessage:"No recipes found",editRow:{deleteText:"Delete recipe? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{icon:"visibility",onClick:function(e,t){r(t)},position:"row",tooltip:"View recipe"},{icon:"edit",onClick:function(e,t){a(t)},position:"row",tooltip:"Update recipe"},{icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));n(t)}(t)},position:"toolbarOnSelect",tooltip:"Delete all selected recipes"}],editable:{onRowDelete:function(e){return new Promise((function(n,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),t(e),n()}))}}})})),Bt=Object(r.c)((function(e){return{ingredients:e.ingredients.ingredients,pageLoaded:e.recipes.pageLoaded,viewer:e.recipes.viewer}}),(function(e){return{onLoad:function(){return e({type:"RECIPES_PAGE_LOADED",payload:Promise.all([M.a.Recipes.getAll(),M.a.Ingredients.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"RECIPES_PAGE_UNLOADED"})},onUnloadView:function(){return e({type:"RECIPE_VIEW_UNLOADED"})}}}))((function(e){var t=e.ingredients,n=e.onLoad,a=e.onUnload,r=e.onUnloadView,i=e.pageLoaded,l=e.viewer;return Object(c.useEffect)((function(){return n(),function(){a()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:l.recipe?"View Recipe":"Manage Recipes"},l.recipe?o.a.createElement(g.a,{color:"secondary",onClick:r},"Manage recipes"):o.a.createElement(Ft,null)),i?l.recipe?o.a.createElement(Wt,{ingredients:t,recipe:l.recipe}):o.a.createElement(qt,null):o.a.createElement(ee,null))})),zt=n(735),Ht=n(733),Yt=n(734),Jt=function(e){var t=e.category,n=e.index,a=Object(_.a)();return o.a.createElement(Et.Draggable,{draggableId:t.slug,index:n,key:t.slug},(function(e,n){return o.a.createElement(ft.a,Object.assign({elevation:3,ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(r=n.isDragging,c=e.draggableProps.style,Object(E.a)({background:r?a.palette.secondary.light:"white",marginBottom:a.spacing(1),padding:a.spacing(2),userSelect:"none"},c))}),t.name);var r,c}))},Kt=function(e){var t=e.categories,n=Object(_.a)(),a=Object(L.a)(n.breakpoints.down("md"));return o.a.createElement(Et.Droppable,{droppableId:"categories"},(function(e,r){return o.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(c=r.isDraggingOver,{border:c?"2px dashed ".concat(n.palette.primary.light):"2px solid white",minHeight:"120px",padding:n.spacing(1),width:a?"100%":"50%"})}),t.map((function(e,t){return o.a.createElement(Jt,{category:e,index:t,key:e.slug})})),e.placeholder);var c}))},$t=function(e){var t=e.categories,n=e.name,a=e.onChange,r=Object(c.useState)(t),i=Object(v.a)(r,2),l=i[0],s=i[1];return o.a.createElement(Et.DragDropContext,{onDragEnd:function(e){var r=e.destination,c=e.source,o=e.draggableId;if(r&&r.index!==c.index){var i=t.find((function(e){return e.slug===o})),u=Object(B.a)(l);u.splice(c.index,1),u.splice(r.index,0,i),s(u),a(n,u)}}},o.a.createElement(Kt,{categories:l}))},Qt=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.stores),{},{categories:e.categories.categories})}),(function(e){return{onAdd:function(t){return e({type:"ADD_STORE",payload:M.a.Stores.add(t),snackbar:{message:"Store added",variant:"success"}})},onExit:function(){return e({type:"STORE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_STORE",payload:M.a.Stores.update(t),snackbar:{message:"Store updated",variant:"success"}})}}}))((function(e){var t,n,a,r=e.categories,i=e.editor,l=e.errors,s=e.inProgress,u=e.onAdd,d=e.onExit,m=e.onUpdate,p=Object(c.useState)(!1),f=Object(v.a)(p,2),b=f[0],O=f[1],_=!!(null===(t=i.store)||void 0===t?void 0:t.name),L=function(){O(!1)},I=function(e){u(Object(E.a)({},e))},R=function(e){m(Object(E.a)(Object(E.a)({},i.store),e))};return Object(c.useEffect)((function(){s||l||O(!1)}),[s]),Object(c.useEffect)((function(){O(!!i.store)}),[i.store]),o.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:L,onFocus:function(e){return e.stopPropagation()},open:b,TransitionProps:{onExit:d}},o.a.createElement(D.c,{initialValues:{categories:function(){var e;if(!(null===(e=i.store)||void 0===e?void 0:e.categories))return r;var t=Object(B.a)(i.store.categories);return r.forEach((function(e){t.find((function(t){return t._id===e._id}))||t.push(e)})),t}(),name:(null===(n=i.store)||void 0===n?void 0:n.name)||"",notes:(null===(a=i.store)||void 0===a?void 0:a.notes)||""},validationSchema:h.d({categories:h.a(),name:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_?R(t):I(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return o.a.createElement(D.b,null,o.a.createElement(S.a,null,_?"Update store":"Add store"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:l}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!_,component:A.b,disabled:s,id:"name",label:"Store Name",name:"name",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:s,id:"notes",label:"Store Notes",name:"notes",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Categories"),o.a.createElement($t,{categories:e.values.categories,name:"categories",onChange:e.setFieldValue})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:s,type:"submit",variant:"contained"},_?s?"Updating...":"Update":s?"Adding...":"Add"),o.a.createElement(g.a,{disabled:s,onClick:L,variant:"contained"},"Cancel")))})))})),Zt=Object(r.c)((function(e){return{defaultStore:e.common.settings.defaultStore,stores:e.stores.stores}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_STORE",payload:M.a.Stores.delete(t),snackbar:{message:"Store deleted",variant:"success"}})},onLoadUpdate:function(t){return e({type:"STORE_DIALOG_LOADED",store:t})},onSetDefault:function(t){return e({type:"SET_DEFAULT_STORE",payload:M.a.Settings.update(t),snackbar:{message:"Default store saved",variant:"success"}})}}}))((function(e){var t=e.defaultStore,n=e.onDelete,a=e.onLoadUpdate,r=e.onSetDefault,i=e.stores,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],m=Object(c.useState)([{title:"Name",field:"name"},{title:"Notes",field:"notes"}]),p=Object(v.a)(m,1)[0],E=function(e){a(e)};return Object(c.useEffect)((function(){d(i)}),[i]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Qt,null),o.a.createElement(H.a,{title:"Manage Stores",columns:p,data:u,localization:{body:{emptyDataSourceMessage:"No stores found",editRow:{deleteText:"Delete store? This action cannot be undone."}}},actions:[{action:function(e){return{icon:e._id===t?"star":function(){return o.a.createElement(Ht.a,null)},onClick:function(e,t){r({defaultStore:t})},position:"row",tooltip:e._id===t?"Default store":"Set as default store"}}},{action:function(e){return{icon:"edit",onClick:function(e,t){return E(t)},position:"row",tooltip:"Update store"}}},{icon:function(){return o.a.createElement(Yt.a,null)},isFreeAction:!0,onClick:function(){return E({})},position:"toolbar",tooltip:"Add store"}],options:{actionsColumnIndex:-1,paging:!1,toolbar:!0},editable:{onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),n(e),t()}))}},style:{boxShadow:"none"}}))})),Xt=Object(r.c)((function(e){return Object(E.a)({},e.stores)}),(function(e){return{onLoad:function(){return e({type:"STORES_PAGE_LOADED",payload:Promise.all([M.a.Stores.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"STORES_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,a?o.a.createElement(Zt,null):o.a.createElement(ee,null))})),en=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)},paper:{padding:e.spacing(2),marginBottom:e.spacing(4)}}})),tn=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.settings),{},{currentUser:e.common.currentUser,settings:e.common.settings})}),(function(e){return{onSubmitForm:function(t){return e({type:"SETTINGS_SAVED",payload:Promise.all([M.a.Auth.save(t),M.a.Settings.update(t)]),snackbar:{message:"Settings saved",variant:"success"}})},onUnload:function(){return e({type:"SETTINGS_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.errors,a=e.inProgress,r=e.onSubmitForm,i=e.onUnload,l=(e.settings,en());return Object(c.useEffect)((function(){return function(){i()}}),[]),o.a.createElement(D.c,{enableReinitialize:!0,initialValues:{firstName:t.firstName,lastName:t.lastName,password:""},validationSchema:h.d({firstName:h.e(),lastName:h.e(),password:h.e()}),onSubmit:function(){var e=Object(y.a)(j.a.mark((function e(n,a){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=Object(E.a)({},n)).password||"student"===t.role||delete c.password,r(c),a.resetForm({values:Object(E.a)(Object(E.a)({},c),{},{password:""})});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},o.a.createElement(D.b,null,o.a.createElement(Q,{title:"Manage Account"},o.a.createElement(I.a,{color:"primary",disabled:a,type:"sumbit",variant:"extended"},o.a.createElement(zt.a,{className:l.icon}),a?"Saving...":"Save settings")),o.a.createElement(G,{errors:n}),o.a.createElement(ft.a,{className:l.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(Xt,null)))),o.a.createElement(ft.a,{className:l.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5",gutterBottom:!0},"Linked Accounts")))),o.a.createElement(ft.a,{className:l.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5",gutterBottom:!0},"Account Details")),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{component:A.b,label:"First name",name:"firstName",type:"text",variant:"outlined",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{component:A.b,label:"Last name",name:"lastName",type:"text",variant:"outlined",fullWidth:!0})))),o.a.createElement(ft.a,{className:l.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5",gutterBottom:!0},"Account Security")),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{component:A.b,label:"New password",name:"password",type:"password",variant:"outlined",fullWidth:!0}))))))})),nn=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),null)((function(e){var t=e.currentUser;return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(se,{currentUser:t}),o.a.createElement(tt,null,o.a.createElement(p.a,null,o.a.createElement(s.d,null,o.a.createElement(Pt,{path:"/plans",component:Lt}),o.a.createElement(Pt,{path:"/meals",component:ze}),o.a.createElement(Pt,{path:"/recipes",component:Bt}),o.a.createElement(Pt,{path:"/ingredients/categories",component:ne}),o.a.createElement(Pt,{path:"/ingredients",component:be}),o.a.createElement(Pt,{path:"/settings",component:tn}),o.a.createElement(Pt,{path:"/users",component:Ue}),o.a.createElement(s.b,{component:nt}))),o.a.createElement(Xe,null))):o.a.createElement(s.a,{to:"/login"})})),an=n(282),rn=n.n(an),cn=n(283),on=n.n(cn),ln=Object(b.a)((function(e){return{background:{alignItems:"center",backgroundImage:"url(".concat(on.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},logo:{marginBottom:e.spacing(4),width:160},panel:{alignItems:"center",borderRadius:"1rem",display:"flex",flexFlow:"column nowrap",overflowY:"scroll",padding:"2rem 4rem",position:"relative"},text:{color:e.palette.primary.main,fontStyle:"italic"}}})),sn=function(e){var t=ln();return o.a.createElement(rn.a,{className:t.background},o.a.createElement(ft.a,{elevation:12,className:t.panel},o.a.createElement(ie,{className:t.logo}),o.a.createElement(K.a,{className:t.text,variant:"h4"},"Loading...")))},un=n(406),dn=n(736),mn=n(737),pn=n(407),En=n(478),fn=n.n(En),bn=Object(b.a)((function(e){return{page:{"& p:not(:last-of-type)":{marginBottom:e.spacing(2)}},profile:{borderRadius:"100%",boxShadow:e.shadows[10],float:"right",marginBottom:e.spacing(2),marginLeft:e.spacing(2),width:"120px"}}})),gn=function(){var e=bn();return o.a.createElement(T.a,{className:e.page,container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{align:"center",gutterBottom:!0,variant:"h5"},"What is Plate?"),o.a.createElement("img",{className:e.profile,src:fn.a}),o.a.createElement(K.a,{variant:"body2"},"Hello, I'm Joseph May, a high school chemistry teacher from Las Vegas. While I love teaching chemistry, I also love programming for the web, so why not combine the two."),o.a.createElement(K.a,{variant:"body2"},"Plate is a web-based app I created to help my wife and I manage our meals and shopping list for each week. It allows you to create weekly meal plans from recipes you input into the system. It can then generate and push a shopping list to your iPhone or Android device."),o.a.createElement(K.a,{variant:"body2"},"While this app can support multiple users, I am running it on no-cost servers, so it was not intended to be a public program. Although, if you are interested in learning more, please reach out to me"," ",o.a.createElement(pn.a,{href:"mailto:jwmay87+plate@gmail.com"},"here"),".")))},On=Object(r.c)((function(e){return Object(E.a)({},e.auth)}),(function(e){return{onSubmit:function(t,n){return e({type:V,payload:M.a.Auth.login(t,n)})}}}))((function(e){return o.a.createElement(D.c,{initialValues:{username:"",password:""},validationSchema:h.d({username:h.e().required("Required"),password:h.e().required("Required")}),onSubmit:function(t){!function(t,n){e.onSubmit(t,n)}(t.username,t.password)}},o.a.createElement(D.b,null,o.a.createElement(T.a,{container:!0,spacing:4},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(G,{errors:e.errors}),o.a.createElement(D.a,{component:A.b,disabled:e.inProgress,fullWidth:!0,label:"Username",name:"username",type:"text",variant:"outlined"})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:e.inProgress,fullWidth:!0,label:"Password",name:"password",type:"password",variant:"outlined"})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(g.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},e.inProgress?"Loading...":"Login")))))})),jn=Object(b.a)((function(e){return{aboutLink:{bottom:e.spacing(2),position:"absolute",right:e.spacing(4)},loginLink:{marginBottom:e.spacing(2),"& > a":{textDecoration:"none"}},logo:{display:"block",margin:"0 auto",width:120},page:Object(ue.a)({alignItems:"center",backgroundImage:"url(".concat(on.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},e.breakpoints.up("lg"),{backgroundSize:"initial",justifyContent:"flex-end"}),panel:Object(ue.a)({borderRadius:"1rem",maxHeight:"90%",overflowY:"scroll",padding:"4rem 2rem",position:"relative",width:"80%"},e.breakpoints.up("lg"),{borderRadius:"0",height:"100%",maxHeight:"100%",width:"40%"}),progress:{height:10,left:"0",position:"absolute",top:"0",width:"100%"}}})),yn=function(){var e=jn();return o.a.createElement("span",{className:e.aboutLink},o.a.createElement(Oe.a,{arrow:!0,enterTouchDelay:0,title:"Learn more"},o.a.createElement(f.a,{to:"/about"},o.a.createElement(dn.a,{color:"secondary",fontSize:"small"}))))},vn=function(){var e=jn();return o.a.createElement("div",{className:e.loginLink},o.a.createElement(f.a,{to:"/login"},o.a.createElement(g.a,{color:"secondary",startIcon:o.a.createElement(mn.a,null)},"Login")))},Dn=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.auth),{},{currentUser:e.common.currentUser,pathname:e.router.location.pathname})}),(function(e){return{onUnload:function(){return e({type:"LOGIN_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.inProgress,a=e.onUnload,r=e.pathname,i=jn();return Object(c.useEffect)((function(){return function(){return a()}}),[]),t?o.a.createElement(s.a,{to:"/"}):o.a.createElement(rn.a,null,o.a.createElement("div",{className:i.page},o.a.createElement(ft.a,{elevation:12,className:i.panel},n&&o.a.createElement(un.a,{className:i.progress}),o.a.createElement(T.a,{container:!0,spacing:4},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(ie,{className:i.logo})),o.a.createElement(T.a,{item:!0,xs:12},r.includes("about")?o.a.createElement(o.a.Fragment,null,o.a.createElement(vn,null),o.a.createElement(gn,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement(yn,null),o.a.createElement(On,null)))))))})),An=n(340),hn=function(e){var t=e.snackbar,n=Object(An.b)().enqueueSnackbar;return Object(c.useEffect)((function(){t&&n(t.message,{variant:t.variant})}),[t]),e.children},_n=Object(r.c)((function(e){return{snackbar:e.notifier.snackbar}}),(function(e){return{onSnackbarClose:function(){return e({type:"SNACKBAR_CLOSED"})}}}))((function(e){return o.a.createElement(An.a,{maxSnack:1,onClose:function(){e.onSnackbarClose()}},o.a.createElement(hn,{snackbar:e.snackbar},e.children))})),Ln=n(143),Pn=n(401),Sn=n(171),Nn=Object(Ln.b)({breakpoints:{values:{md:768,lg:1024}},palette:{primary:{main:Pn.a[400]},secondary:{main:Sn.a[200]}},overrides:{MuiDialogActions:{root:{padding:"16px 24px"}},MUIRichTextEditor:{placeHolder:{position:"relative"},toolbar:{"& button.MuiIconButton-colorPrimary":{color:Sn.a[200]}},editor:{"& li":{borderBottom:"1px solid #ccc",marginBottom:"32px",paddingBottom:"16px"}}}}}),Tn=n(74),Cn=n(479),In=n(75),Rn=(n(681),n(461)),Un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:if(t.subtype===V||"REGISTER"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0});break;case V:case"REGISTER":return Object(E.a)(Object(E.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return{};default:return e}return e},wn={errors:null,categories:[],inProgress:!1,pageLoaded:!1},kn=function(e,t){return e.name.localeCompare(t.name)},xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:[].concat(Object(B.a)(e.categories),[t.payload.category]).sort((function(e,t){return kn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case F:if("ADD_CATEGORY"===t.subtype||"UPDATE_CATEGORY"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("CATEGORIES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.filter((function(e){return e.slug!==t.payload.category.slug}))});case"DELETE_CATEGORIES":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.filter((function(e){return!t.payload.categories.includes(e.slug)}))});case"CATEGORY_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"CATEGORIES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,categories:t.error?[]:t.payload.categories,inProgress:!1,pageLoaded:!0});case"CATEGORIES_PAGE_UNLOADED":case"INGREDIENTS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":case"STORES_PAGE_UNLOADED":return wn;case"INGREDIENTS_PAGE_LOADED":case"STORES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[1].categories});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[4].categories});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[2].categories});case"UPDATE_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.map((function(e){return e._id===t.payload.category._id?t.payload.category:e})).sort((function(e,t){return kn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},Gn={token:null,viewChangeCounter:0},Mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOAD":return Object(E.a)(Object(E.a)({},e),{},{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null,settings:t.payload?t.payload.settings:null});case"LOGOUT":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:"/login",token:null,currentUser:null});case V:case"REGISTER":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:t.error?null:"admin"===t.payload.user.role?"/users":"/plans",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user,settings:t.error?null:t.payload.settings});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":case"SETTINGS_PAGE_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewChangeCounter:e.viewChangeCounter+1});case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:t.redirectTo});case"REDIRECT":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:null});case"SET_DEFAULT_STORE":return Object(E.a)(Object(E.a)({},e),{},{settings:t.error?e.settings:t.payload.settings});case"SETTINGS_SAVED":return Object(E.a)(Object(E.a)({},e),{},{currentUser:t.error?e.currentUser:t.payload[0].user,settings:t.error?e.settings:t.payload[1].settings});default:return e}},Fn={errors:null,ingredients:[],inProgress:!1,pageLoaded:!1},Vn=function(e,t){return e.name.localeCompare(t.name)},Wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:[].concat(Object(B.a)(e.ingredients),[t.payload.ingredient]).sort((function(e,t){return Vn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case F:if("ADD_INGREDIENT"===t.subtype||"UPDATE_INGREDIENT"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("INGREDIENTS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.filter((function(e){return e.slug!==t.payload.ingredient.slug}))});case"DELETE_INGREDIENTS":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.filter((function(e){return!t.payload.ingredients.includes(e.slug)}))});case"INGREDIENT_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"INGREDIENTS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,ingredients:t.error?[]:t.payload[0].ingredients,inProgress:!1,pageLoaded:!0});case"INGREDIENTS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return Fn;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?[]:t.payload[3].ingredients});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?[]:t.payload[1].ingredients});case"UPDATE_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.map((function(e){return e._id===t.payload.ingredient._id?t.payload.ingredient:e})).sort((function(e,t){return Vn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},qn={editor:{meal:null},errors:null,inProgress:!1,meals:[],pageLoaded:!1},Bn=function(e,t){return e.title.localeCompare(t.title)},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MEAL":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?e.meals:[].concat(Object(B.a)(e.meals),[t.payload.meal]).sort((function(e,t){return Bn(e,t)}))});case F:if("ADD_MEAL"===t.subtype||"UPDATE_MEAL"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("MEALS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_MEAL":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?e.meals:e.meals.filter((function(e){return e.slug!==t.payload.meal.slug}))});case"DELETE_MEALS":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?e.meals:e.meals.filter((function(e){return!t.payload.meals.includes(e.slug)}))});case"MEAL_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{meal:t.meal})});case"MEAL_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{meal:null}),errors:null});case"MEALS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?[]:t.payload[0].meals,pageLoaded:!0});case"MEALS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return qn;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?[]:t.payload[1].meals});case"UPDATE_MEAL":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?e.meals:e.meals.map((function(e){return e._id===t.payload.meal._id?t.payload.meal:e})).sort((function(e,t){return Bn(e,t)}))});default:return e}return e},Hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(E.a)(Object(E.a)({},e),{},{navTabValue:t.value});case"NAV_UNLOADED":return{};default:return e}},Yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY":case"ADD_INGREDIENT":case"ADD_MEAL":case"ADD_PLAN":case"ADD_RECIPE":case"ADD_STORE":case"ADD_USER":case"DELETE_CATEGORY":case"DELETE_CATEGORIES":case"DELETE_INGREDIENT":case"DELETE_INGREDIENTS":case"DELETE_MEAL":case"DELETE_MEALS":case"DELETE_PLAN":case"DELETE_RECIPE":case"DELETE_RECIPES":case"DELETE_STORE":case"DELETE_USER":case"PLAN_LIST_COPIED":case"SET_DEFAULT_STORE":case"SETTINGS_SAVED":case"UPDATE_CATEGORY":case"UPDATE_INGREDIENT":case"UPDATE_MEAL":case"UPDATE_PLAN":case"UPDATE_RECIPE":case"UPDATE_STORE":case"UPDATE_USER":return Object(E.a)(Object(E.a)({},e),{},{snackbar:t.error?null:t.snackbar});case"SNACKBAR_CLOSED":return Object(E.a)(Object(E.a)({},e),{},{snackbar:null});default:return e}},Jn={editor:{plan:null},errors:null,inProgress:!1,pageLoaded:!1,plans:[],viewer:{plan:null}},Kn=function(e,t){return e.title.localeCompare(t.title)},$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:[].concat(Object(B.a)(e.plans),[t.payload.plan]).sort((function(e,t){return Kn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case F:if("ADD_PLAN"===t.subtype||"UPDATE_PLAN"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("PLANS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.filter((function(e){return e.slug!==t.payload.plan.slug}))});case"PLAN_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{plan:t.plan})});case"PLAN_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{plan:null}),errors:null});case"PLAN_LIST_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:t.plan})});case"PLAN_LIST_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:null})});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{pageLoaded:!0,plans:t.payload[0].plans});case"PLANS_PAGE_UNLOADED":return Jn;case"UPDATE_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.map((function(e){return e._id===t.payload.plan._id?t.payload.plan:e})).sort((function(e,t){return Kn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},Qn={editor:{recipe:null,ingredient:null},errors:null,recipes:[],inProgress:!1,pageLoaded:!1,viewer:{recipe:null}},Zn=function(e,t){return e.title.localeCompare(t.title)},Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{ingredient:t.payload.ingredient})});case"ADD_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:[].concat(Object(B.a)(e.recipes),[t.payload.recipe]).sort((function(e,t){return Zn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case F:if("ADD_RECIPE"===t.subtype||"UPDATE_RECIPE"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("RECIPES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:e.recipes.filter((function(e){return e.slug!==t.payload.recipe.slug}))});case"DELETE_RECIPES":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:e.recipes.filter((function(e){return!t.payload.recipes.includes(e.slug)}))});case"MEALS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?[]:t.payload[1].recipes});case"MEALS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":return Qn;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?[]:t.payload[2].recipes});case"RECIPE_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:t.recipe})});case"RECIPE_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:null,ingredient:null}),errors:null});case"RECIPE_INGREDIENT_ONBLUR":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{ingredient:null})});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,recipes:t.error?[]:t.payload[0].recipes,inProgress:!1,pageLoaded:!0});case"RECIPE_VIEW_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{recipe:t.recipe})});case"RECIPE_VIEW_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{recipe:null})});case"UPDATE_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:null}),errors:t.error?t.payload.errors:null,inProgress:!1,recipes:t.error?e.recipes:e.recipes.map((function(e){return e._id===t.payload.recipe._id?t.payload.recipe:e})).sort((function(e,t){return Zn(e,t)}))});default:return e}return e},ea={errors:null,inProgress:!1},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:if("SETTINGS_SAVED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0});break;case"SETTINGS_PAGE_UNLOADED":return ea;case"SETTINGS_SAVED":return Object(E.a)(Object(E.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});default:return e}return e},na={editor:{store:null},errors:null,inProgress:!1,pageLoaded:!1,stores:[]},aa=function(e,t){return e.name.localeCompare(t.name)},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:[].concat(Object(B.a)(e.stores),[t.payload.store]).sort((function(e,t){return aa(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case F:if("ADD_STORE"===t.subtype||"UPDATE_STORE"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("STORES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:e.stores.filter((function(e){return e.slug!==t.payload.store.slug}))});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?[]:t.payload[5].stores});case"STORE_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{store:t.store})});case"STORE_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{store:null}),errors:null});case"STORES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{pageLoaded:!0,stores:t.payload[0].stores});case"STORES_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return na;case"UPDATE_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:e.stores.map((function(e){return e._id===t.payload.store._id?t.payload.store:e})).sort((function(e,t){return aa(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},ca={errors:null,inProgress:!1,users:[]},oa=function(e,t){return e.lastName.localeCompare(t.lastName)},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,users:t.error?e.users:[].concat(Object(B.a)(e.users),[t.payload.user]).sort((function(e,t){return oa(e,t)}))});case F:if("ADD_USER"===t.subtype||"UPDATE_USER"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0,errors:null});break;case"DELETE_USER":return Object(E.a)(Object(E.a)({},e),{},{users:t.error?e.users:e.users.filter((function(e){return e.username!==t.payload.user.username}))});case"MANAGE_USERS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{users:t.payload.users});case"MANAGE_USERS_PAGE_UNLOADED":return ca;case"USER_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"UPDATE_USER":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,users:t.error?e.users:e.users.map((function(e){return e.username===t.payload.user.username?t.payload.user:e})).sort((function(e,t){return oa(e,t)}))});default:return e}return e},la=function(e){return function(t){return function(n){if((c=n.payload)&&"function"===typeof c.then){e.dispatch({type:F,subtype:n.type});var a=e.getState().viewChangeCounter,r=n.skipTracking;n.payload.then((function(t){var c=e.getState();(r||c.viewChangeCounter===a)&&(n.payload=t,e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}),(function(t){var c=e.getState();(r||c.viewChangeCounter===a)&&(n.error=!0,n.payload=t.response.body,n.skipTracking||e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}))}else{var c;t(n)}}}},sa=function(e){return function(e){return function(t){"REGISTER"===t.type||t.type===V?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),M.a.setToken(t.payload.user.token)):"LOGOUT"===t.type&&(window.localStorage.setItem("jwt",""),M.a.setToken(null)),e(t)}}};var ua,da=Object(In.a)(),ma=Object(Rn.a)(da),pa=Object(Tn.createStore)((ua=da,Object(Tn.combineReducers)({auth:Un,categories:xn,common:Mn,ingredients:Wn,meals:zn,nav:Hn,notifier:Yn,plans:$n,recipes:Xn,settings:ta,stores:ra,users:ia,router:Object(a.b)(ua)})),Object(Cn.composeWithDevTools)(Object(Tn.applyMiddleware)(ma,la,sa))),Ea=Object(r.c)((function(e){return{appLoaded:e.common.appLoaded,redirectTo:e.common.redirectTo}}),(function(e){return{onLoad:function(t,n){return e({type:"APP_LOAD",payload:t,token:n,skipTracking:!0})},onRedirect:function(){return e({type:"REDIRECT"})}}}))((function(e){var t=e.appLoaded,n=e.redirectTo;return Object(c.useEffect)((function(){n&&(pa.dispatch(Object(u.d)(n)),e.onRedirect())}),[n]),Object(c.useEffect)((function(){var t=window.localStorage.getItem("jwt");t&&M.a.setToken(t),e.onLoad(t?M.a.Auth.current():null,t)}),[]),t?o.a.createElement(d.a,{theme:Nn},o.a.createElement(m.a,null),o.a.createElement(_n,null,o.a.createElement(c.Suspense,{fallback:o.a.createElement("p",null,"Loading...")},o.a.createElement(s.d,null,o.a.createElement(s.b,{exact:!0,path:"/login",component:Dn}),o.a.createElement(s.b,{exact:!0,path:"/about",component:Dn}),o.a.createElement(s.b,{path:"/",component:nn}))))):o.a.createElement(d.a,{theme:Nn},o.a.createElement(m.a,null),o.a.createElement(sn,null))}));l.a.render(o.a.createElement(r.a,{store:pa},o.a.createElement(a.a,{history:da},o.a.createElement(s.d,null,o.a.createElement(s.b,{path:"/",component:Ea})))),document.getElementById("root"))}},[[493,1,2]]]);
//# sourceMappingURL=main.ca48ed14.chunk.js.map