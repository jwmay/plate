(this.webpackJsonpplate=this.webpackJsonpplate||[]).push([[0],{13:function(e,t,n){"use strict";(function(e){var a=n(558),r=n.n(a),c=n(559),o=n.n(c),i=r()(o.a,e.Promise),l="https://my-plate-app.herokuapp.com/api",s=function(e){return e.body},u=null,d=function(e){u&&e.set("authorization","Token ".concat(u))},p=function(e,t){return i.del("".concat(l).concat(e),t).use(d).then(s)},m=function(e){return i.get("".concat(l).concat(e)).use(d).then(s)},E=function(e,t){return i.post("".concat(l).concat(e),t).use(d).then(s)},f=function(e,t){return i.put("".concat(l).concat(e),t).use(d).then(s)},b={current:function(){return m("/user")},login:function(e,t){return E("/users/login",{user:{username:e,password:t}})},register:function(e){return E("/users",{user:e})},save:function(e){return f("/user",{user:e})}},g={add:function(e){return E("/categories",{category:e})},delete:function(e){return p("/categories/".concat(e.slug))},deleteMany:function(e){return p("/categories/bulk",{categories:e})},getAll:function(){return m("/categories")},update:function(e){return f("/categories/".concat(e.slug),{category:e})}},O={add:function(e){return E("/ingredients",{ingredient:e})},delete:function(e){return p("/ingredients/".concat(e.slug))},deleteMany:function(e){return p("/ingredients/bulk",{ingredients:e})},getAll:function(){return m("/ingredients")},update:function(e){return f("/ingredients/".concat(e.slug),{ingredient:e})}},y={add:function(e){return E("/meals",{meal:e})},delete:function(e){return p("/meals/".concat(e.slug))},deleteMany:function(e){return p("/meals/bulk",{meals:e})},getAll:function(){return m("/meals")},update:function(e){return f("/meals/".concat(e.slug),{meal:e})}},j={add:function(e){return E("/plans",{plan:e})},delete:function(e){return p("/plans/".concat(e.slug))},deleteMany:function(e){return p("/plans",{plans:e})},getAll:function(){return m("/plans")},update:function(e){return f("/plans/".concat(e.slug),{plan:e})}},v={add:function(e){return E("/recipes",{recipe:e})},delete:function(e){return p("/recipes/".concat(e.slug))},deleteMany:function(e){return p("/recipes/bulk",{recipes:e})},getAll:function(){return m("/recipes")},update:function(e){return f("/recipes/".concat(e.slug),{recipe:e})}},D={update:function(e){return f("/user/settings",{settings:e})}},A={add:function(e){return E("/stores",{store:e})},delete:function(e){return p("/stores/".concat(e.slug))},getAll:function(){return m("/stores")},update:function(e){return f("/stores/".concat(e.slug),{store:e})}},h={getAll:function(){return m("/users?role=subscriber")},delete:function(e){return p("/users/subscriber/".concat(e.username))},update:function(e){return f("/users/".concat(e.username),{user:e})}};t.a={Auth:b,Categories:g,Ingredients:O,Meals:y,Plans:j,Recipes:v,Settings:D,Stores:A,Users:h,setToken:function(e){u=e}}}).call(this,n(107))},343:function(e,t,n){e.exports=n.p+"static/media/plate-background.c6d96dd4.png"},561:function(e,t,n){e.exports=n.p+"static/media/plate-logo.1dcb2d72.png"},564:function(e,t,n){e.exports=n.p+"static/media/doc-may-profile.f927335d.jpg"},578:function(e,t,n){e.exports=n(817)},817:function(e,t,n){"use strict";n.r(t);var a=n(196),r=n(12),c=n(0),o=n.n(c),i=n(27),l=n.n(i),s=n(48),u=n(81),d=n(849),p=n(857),m=n(856),E=n(4),f=n(124),b=n(399),g=n(400),O=n(50),y=n.n(O),j=n(82),v=n(17),D=n(20),A=n(35),h=n(26),_=n(37),L=n(825),P=n(844),S=n(845),N=n(846),T=n(471),C=n(847),w=n(842),R=n(843),I=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),k=function(e){var t,n=I();return o.a.createElement(w.a,Object.assign({color:"primary",onClick:e.onClick,variant:"extended"},e),o.a.createElement(R.a,{className:n.icon}),null!==(t=e.prefix)&&void 0!==t?t:"Add"," ",e.item)},U=n(876),x=Object(b.a)((function(e){return{alert:{width:"100%","&:not(:last-of-type)":{marginBottom:e.spacing(1)}},alertList:{marginBottom:e.spacing(2)}}})),G=function(e){var t=e.errors,n=x();return t?o.a.createElement("div",{className:n.alertList},Object.keys(t).map((function(e){var a=e.replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase();return o.a.createElement(U.a,{className:n.alert,severity:"error",key:e},a," ",t[e])}))):null},M=n(13),V="ASYNC_START",F="LOGIN",W=Object(b.a)((function(e){return{addIcon:{marginRight:e.spacing(1)}}})),q=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onAdd:function(t){return e({type:"ADD_CATEGORY",payload:M.a.Categories.add(t),snackbar:{message:"Category added",variant:"success"}})},onExit:function(){return e({type:"CATEGORY_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_CATEGORY",payload:M.a.Categories.update(t),snackbar:{message:"Category updated",variant:"success"}})}}}))((function(e){var t=e.errors,n=e.category,a=e.inProgress,r=e.onAdd,i=e.onExit,l=e.onUpdate,s=Object(c.useState)(!1),u=Object(v.a)(s,2),d=u[0],p=u[1],m=Object(_.a)(),f=Object(L.a)(m.breakpoints.down("md")),b=(W(),function(){p(!1)}),O=function(e){r(Object(E.a)({},e))},w=function(e){l(Object(E.a)(Object(E.a)({},n),e))};return Object(c.useEffect)((function(){a||t||p(!1)}),[a]),o.a.createElement(o.a.Fragment,null,o.a.createElement(k,{item:"category",onClick:function(){p(!0)}}),o.a.createElement(P.a,{fullScreen:f,maxWidth:"lg",onClick:function(e){return e.stopPropagation()},onClose:b,onFocus:function(e){return e.stopPropagation()},open:d,TransitionProps:{onExit:i}},o.a.createElement(D.c,{initialValues:{name:(null===n||void 0===n?void 0:n.name)||"",notes:(null===n||void 0===n?void 0:n.notes)||""},validationSchema:h.d({name:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?w(t):O(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(D.b,null,o.a.createElement(S.a,null,n?"Edit category":"Add category"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:t}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!0,color:"primary",component:A.b,disabled:a,label:"Category Name",name:"name",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:a,label:"Category Notes",name:"notes",type:"text",fullWidth:!0})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{disabled:a,color:"primary",type:"submit",variant:"contained"},n?a?"Updating...":"Update":a?"Adding...":"Add"),o.a.createElement(g.a,{disabled:a,onClick:b,variant:"contained"},"Cancel"))))))})),B=n(21),H=n(104),z=n.n(H),Y=function(e){return o.a.createElement(z.a,Object.assign({components:{EditRow:function(e){return o.a.createElement(H.MTableEditRow,Object.assign({},e,{onKeyDown:function(t){27===t.keyCode&&e.onEditingCanceled(e.mode,e.data)}}))}}},e))},J=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onDelete:function(t){return e({type:"DELETE_CATEGORY",payload:M.a.Categories.delete(t),snackbar:{message:"Category deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_CATEGORIES",payload:M.a.Categories.deleteMany(t),snackbar:{message:"".concat(t.length," categor").concat(t.length>1?"ies":"y"," deleted"),variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_CATEGORY",payload:M.a.Categories.update(t),snackbar:{message:"Category updated",variant:"success"}})}}}))((function(e){var t=e.categories,n=e.onDelete,a=e.onDeleteMany,r=e.onUpdate,i=Object(c.useState)([]),l=Object(v.a)(i,2),s=l[0],u=l[1],d=Object(c.useState)([{title:"Name",field:"name"},{title:"Notes",field:"notes"}]),p=Object(v.a)(d,1)[0];return Object(c.useEffect)((function(){u(t)}),[t]),o.a.createElement(Y,{title:"Categories",columns:p,data:s,localization:{body:{emptyDataSourceMessage:"No categories found",editRow:{deleteText:"Delete category? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{tooltip:"Delete all selected categories",icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));a(t)}(t)}}],editable:{onRowUpdate:function(e,t){return new Promise((function(n,a){var c=Object(B.a)(s);c[t.tableData.id]=e,u(Object(B.a)(c)),r(e),n()}))},onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(s),c=e.tableData.id;r.splice(c,1),u(Object(B.a)(r)),n(e),t()}))}}})})),K=n(129),$=Object(b.a)((function(e){return{headerLeft:{alignItems:"center",display:"flex"},headerRight:{alignItems:"center",display:"flex",justifyContent:"flex-end"},pageHeader:{marginBottom:e.spacing(4)}}})),Q=function(e){var t=e.children,n=e.title,a=$();return o.a.createElement(T.a,{container:!0,spacing:2,className:a.pageHeader},o.a.createElement(T.a,{item:!0,xs:12,md:6,className:a.headerLeft},o.a.createElement(K.a,{variant:"h4"},n)),o.a.createElement(T.a,{item:!0,xs:12,md:6,className:a.headerRight},t))},Z=n(476),X=Object(b.a)((function(e){return{message:{fontStyle:"italic"},root:{alignItems:"center",display:"flex",justifyContent:"center",minWidth:e.spacing(40)},spinner:{marginRight:e.spacing(2)}}})),ee=function(e){var t=e.message,n=X();return o.a.createElement("div",{className:n.root},o.a.createElement(Z.a,{className:n.spinner}),o.a.createElement(K.a,{className:n.message},t||"Loading..."))},te=Object(b.a)((function(e){return{button:{marginRight:e.spacing(2),"& a":{color:"inherit",textDecoration:"none"}}}})),ne=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onLoad:function(){return e({type:"CATEGORIES_PAGE_LOADED",payload:M.a.Categories.getAll()})},onUnload:function(){return e({type:"CATEGORIES_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded,r=te();return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:"Manage Categories"},o.a.createElement(g.a,{className:r.button,color:"secondary"},o.a.createElement(f.a,{to:"/ingredients"},"Manage ingredients")),o.a.createElement(q,null)),a?o.a.createElement(J,null):o.a.createElement(ee,null))})),ae=n(853),re=n(488),ce=n(561),oe=n.n(ce),ie=function(e){return o.a.createElement("img",Object.assign({alt:"Chem Cash Logo",src:oe.a},e))},le=Object(b.a)((function(e){return{title:{color:"white",flexGrow:1},logo:{height:65,marginTop:e.spacing(2),marginRight:e.spacing(3),marginBottom:e.spacing(2)}}})),se=Object(r.c)((function(e){return{navTabValue:e.nav.navTabValue}}),(function(e){return{onClickLogout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=le(),n=e.navTabValue;return e.currentUser?o.a.createElement(ae.a,{position:"static"},o.a.createElement(m.a,null,o.a.createElement(re.a,null,o.a.createElement(ie,{className:t.logo}),o.a.createElement(K.a,{variant:"h5",align:"center",className:t.title},n&&n.charAt(0).toUpperCase()+n.slice(1)),o.a.createElement(g.a,{color:"inherit",onClick:e.onClickLogout},"Logout")))):null})),ue=n(105),de=n(482),pe=Object(b.a)((function(e){return{paper:Object(ue.a)({},e.breakpoints.up("lg"),{maxWidth:"420px"})}})),me=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.ingredients),{},{categories:e.categories.categories})}),(function(e){return{onAdd:function(t){return e({type:"ADD_INGREDIENT",payload:M.a.Ingredients.add(t),snackbar:{message:"Ingredient added",variant:"success"}})},onExit:function(){return e({type:"INGREDIENT_DIALOG_UNLOADED"})}}}))((function(e){var t=e.categories,n=e.errors,a=e.hideButton,r=e.ingredient,i=e.inProgress,l=e.isOpen,s=e.onAdd,u=e.onClose,d=e.onExit,p=Object(c.useState)(!1),m=Object(v.a)(p,2),f=m[0],b=m[1],O=Object(_.a)(),w=Object(L.a)(O.breakpoints.down("md")),R=pe(),I=function(){b(!1)},U=function(e){s(Object(E.a)({},e))};return Object(c.useEffect)((function(){i||n||b(!1)}),[i]),Object(c.useEffect)((function(){b(!!l)}),[l]),o.a.createElement(o.a.Fragment,null,!a&&o.a.createElement(k,{item:"ingredient",onClick:function(){b(!0)}}),o.a.createElement(P.a,{classes:{paper:R.paper},fullScreen:w,fullWidth:!0,onClick:function(e){return e.stopPropagation()},onClose:I,onFocus:function(e){return e.stopPropagation()},open:f,TransitionProps:{onExit:function(){d(),u&&u()}}},o.a.createElement(D.c,{initialValues:{category:(null===r||void 0===r?void 0:r.category)||"",name:(null===r||void 0===r?void 0:r.name)||"",notes:(null===r||void 0===r?void 0:r.notes)||""},validationSchema:h.d({category:h.e().required("Required"),name:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(D.b,null,o.a.createElement(S.a,null,"Add ingredient"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:n}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!0,color:"primary",component:A.b,disabled:i,id:"name",label:"Ingredient Name",name:"name",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:i,id:"category",label:"Ingredient Category",name:"category",type:"select",select:!0,fullWidth:!0},t.map((function(e){return o.a.createElement(de.a,{key:e._id,value:e._id},e.name)})))),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:i,id:"notes",label:"Ingredient Notes",name:"notes",type:"text",fullWidth:!0})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{disabled:i,color:"primary",type:"submit",variant:"contained"},i?"Adding...":"Add"),o.a.createElement(g.a,{disabled:i,onClick:I,variant:"contained"},"Cancel"))))))})),Ee=Object(r.c)((function(e){return{categories:e.categories.categories,ingredients:e.ingredients.ingredients}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_INGREDIENT",payload:M.a.Ingredients.delete(t),snackbar:{message:"Ingredient deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_INGREDIENTS",payload:M.a.Ingredients.deleteMany(t),snackbar:{message:"".concat(t.length," ingredient").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_INGREDIENT",payload:M.a.Ingredients.update(t),snackbar:{message:"Ingredient updated",variant:"success"}})}}}))((function(e){var t=e.categories,n=e.ingredients,a=e.onDelete,r=e.onDeleteMany,i=e.onUpdate,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([{title:"Name",field:"name"},{title:"Category",field:"category",lookup:t.reduce((function(e,t){return e[t._id]=t.name,e}),{})},{title:"Notes",field:"notes"}]),m=Object(v.a)(p,1)[0];return Object(c.useEffect)((function(){d(n)}),[n]),o.a.createElement(Y,{title:"Ingredients",columns:m,data:u,localization:{body:{emptyDataSourceMessage:"No ingredients found",editRow:{deleteText:"Delete ingredient? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{tooltip:"Delete all selected ingredients",icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));r(t)}(t)}}],editable:{onRowUpdate:function(e,t){return new Promise((function(n,a){var r=Object(B.a)(u);r[t.tableData.id]=e,d(Object(B.a)(r)),i(e),n()}))},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),a(e),t()}))}}})})),fe=Object(b.a)((function(e){return{button:{marginRight:e.spacing(2),"& a":{color:"inherit",textDecoration:"none"}}}})),be=Object(r.c)((function(e){return Object(E.a)({},e.ingredients)}),(function(e){return{onLoad:function(){return e({type:"INGREDIENTS_PAGE_LOADED",payload:Promise.all([M.a.Ingredients.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"INGREDIENTS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded,r=fe();return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:"Manage Ingredients"},o.a.createElement(g.a,{className:r.button,color:"secondary"},o.a.createElement(f.a,{to:"/ingredients/categories"},"Manage categories")),o.a.createElement(me,null)),a?o.a.createElement(Ee,null):o.a.createElement(ee,null))})),ge=n(862),Oe=n(490),ye=n(329),je=Object(b.a)((function(e){return{actionButton:{color:e.palette.text.disabled}}})),ve=function(e){var t=je(),n=e.className||"";return o.a.createElement(Oe.a,{arrow:!0,enterTouchDelay:0,title:e.action},o.a.createElement(ye.a,{"aria-label":e.action,className:"".concat(t.actionButton," ").concat(n),onClick:function(t){t.stopPropagation(),e.onClick()},onFocus:function(e){return e.stopPropagation()},size:e.size},e.children))},De=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),Ae=Object(r.c)((function(e){return Object(E.a)({},e.users)}),(function(e){return{onAdd:function(t){return e({type:"ADD_USER",payload:M.a.Auth.register(t),snackbar:{message:"User added",variant:"success"}})},onExit:function(){return e({type:"USER_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_USER",payload:M.a.Users.update(t),snackbar:{message:"User updated",variant:"success"}})}}}))((function(e){var t=e.errors,n=e.inProgress,a=e.onAdd,r=e.onExit,i=e.onUpdate,l=e.user,s=Object(c.useState)(!1),u=Object(v.a)(s,2),d=u[0],p=u[1],m=Object(_.a)(),f=Object(L.a)(m.breakpoints.down("md")),b=De(),O=function(){p(!0)},I=function(){p(!1)},k=function(e){a(Object(E.a)(Object(E.a)({},e),{},{role:"subscriber"}))},U=function(e){i(Object(E.a)(Object(E.a)({},l),e))};return Object(c.useEffect)((function(){n||t||p(!1)}),[n]),o.a.createElement(o.a.Fragment,null,l?o.a.createElement(ve,{action:"Edit user",onClick:O},o.a.createElement(ge.a,null)):o.a.createElement(w.a,{color:"primary",onClick:O,variant:"extended"},o.a.createElement(R.a,{className:b.icon}),"Add user"),o.a.createElement(P.a,{fullScreen:f,open:d,onClose:I,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},TransitionProps:{onExit:r}},o.a.createElement(D.c,{initialValues:{firstName:(null===l||void 0===l?void 0:l.firstName)||"",lastName:(null===l||void 0===l?void 0:l.lastName)||"",username:(null===l||void 0===l?void 0:l.username)||"",password:""},validationSchema:h.d({firstName:h.e().required("Required"),lastName:h.e().required("Required"),username:h.e().required("Required"),password:h.e().required(l?"":"Required")}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l?U(t):k(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(D.b,null,o.a.createElement(S.a,null,l?"Edit User":"Add User"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:t}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{autoFocus:!l,color:"primary",component:A.b,disabled:n,label:"First Name",name:"firstName",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:n,label:"Last Name",name:"lastName",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:!!l||n,label:"Username",name:"username",type:"text",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{color:"primary",component:A.b,disabled:n,label:"Password",name:"password",type:"text",fullWidth:!0})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:n,type:"submit",variant:"contained"},l?n?"Updating...":"Update":n?"Adding...":"Add"),o.a.createElement(g.a,{disabled:n,onClick:I,variant:"contained"},"Cancel"))))))})),he=n(850),_e=n(852),Le=n(550),Pe=n(851),Se=n(864),Ne=n(858),Te=n(863),Ce=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_USER",payload:M.a.Users.delete(t),snackbar:{message:"User deleted",variant:"success"}})}}}))((function(e){var t=e.onDelete,n=e.user,a=Object(c.useState)(!1),r=Object(v.a)(a,2),i=r[0],l=r[1],s=function(){l(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ve,{action:"Delete user",onClick:function(){l(!0)}},o.a.createElement(Te.a,null)),o.a.createElement(P.a,{open:i,onClick:function(e){return e.stopPropagation()},onClose:s,onFocus:function(e){return e.stopPropagation()}},o.a.createElement(S.a,null,"Delete User"),o.a.createElement(N.a,null,o.a.createElement(Ne.a,{component:"div"},"Are you sure you want to delete"," ",o.a.createElement("b",null,n.firstName," ",n.lastName),"? This action will permanently delete:",o.a.createElement("ul",null,o.a.createElement("li",null,"all categories"),o.a.createElement("li",null,"all ingredients"),o.a.createElement("li",null,"all meals"),o.a.createElement("li",null,"all plans"),o.a.createElement("li",null,"all recipes"),o.a.createElement("li",null,"all settings"),o.a.createElement("li",null,"all stores")),"associated with this user. This action ",o.a.createElement("b",null,"cannot be undone"),".")),o.a.createElement(C.a,null,o.a.createElement(g.a,{onClick:function(){l(!1),t(n)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),o.a.createElement(g.a,{onClick:s,variant:"contained"},"Cancel"))))})),we=Object(b.a)((function(e){return{userDetails:{display:"block"},userHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},userUsername:{marginRight:e.spacing(2),minWidth:e.spacing(12)},userName:{flexGrow:"1"}}})),Re=function(e){var t=e.users,n=Object(c.useState)(!1),a=Object(v.a)(n,2),r=a[0],i=a[1],l=we();return o.a.createElement(o.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return o.a.createElement(he.a,{expanded:r===e.username,key:e.username,onChange:(t=e.username,function(e,n){i(!!n&&t)})},o.a.createElement(_e.a,{expandIcon:o.a.createElement(Se.a,null)},o.a.createElement("div",{className:l.userHeader},o.a.createElement(Le.a,{color:"secondary",label:e.username,className:l.userUsername}),o.a.createElement(K.a,{className:l.userName,variant:"h5"},e.firstName," ",e.lastName),o.a.createElement(Ae,{user:e}),o.a.createElement(Ce,{user:e}))),o.a.createElement(Pe.a,{className:l.userDetails},o.a.createElement(K.a,{variant:"h6"},"Account Details"),o.a.createElement(K.a,null,o.a.createElement("em",null,"Coming soon!"))));var t})):o.a.createElement(K.a,null,"No users found"))},Ie=Object(r.c)((function(e){return Object(E.a)({},e.users)}),(function(e){return{onLoad:function(){return e({type:"MANAGE_USERS_PAGE_LOADED",payload:M.a.Users.getAll()})},onUnload:function(){return e({type:"MANAGE_USERS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.users;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:"Manage Users"},o.a.createElement(Ae,null)),o.a.createElement(Re,{users:a}))})),ke=n(879),Ue=n(393),xe=n(216),Ge=n.n(xe),Me=n(217),Ve=n.n(Me),Fe=function(e){var t=e.name,n=e.onChange,a=e.recipes,r=e.values,i=Object(c.useState)([]),l=Object(v.a)(i,2),s=l[0],u=l[1],d=a.filter((function(e){return!1===e.isMeal})).map((function(e){var t=e.title[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)}));return Object(c.useEffect)((function(){u(d)}),[a]),o.a.createElement(ke.a,{autoHighlight:!0,autoSelect:!0,getOptionLabel:function(e){return e.title},getOptionSelected:function(e,t){return e._id===t._id},groupBy:function(e){return e.firstLetter},multiple:!0,noOptionsText:"No recipes have been created",onChange:function(e,a){n(t,a)},options:s,renderInput:function(e){return o.a.createElement(Ue.a,Object.assign({},e,{label:"Recipes",variant:"outlined"}))},renderOption:function(e,t){var n=t.inputValue,a=Ve()(e.title,n),r=Ge()(e.title,a);return o.a.createElement("div",null,r.map((function(e,t){return o.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))},value:r})},We=["","Breakfast","Lunch","Dinner","Snack","Other"],qe=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.meals),{},{recipes:e.recipes.recipes})}),(function(e){return{onAdd:function(t){return e({type:"ADD_MEAL",payload:M.a.Meals.add(t),snackbar:{message:"Meal added",variant:"success"}})},onExit:function(){return e({type:"MEAL_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_MEAL",payload:M.a.Meals.update(t),snackbar:{message:"Meal updated",variant:"success"}})}}}))((function(e){var t,n,a,r,i=e.editor,l=e.errors,s=e.inProgress,u=e.onAdd,d=e.onExit,p=e.onUpdate,m=e.recipes,f=Object(_.a)(),b=Object(L.a)(f.breakpoints.down("md")),O=Object(c.useState)(!1),w=Object(v.a)(O,2),R=w[0],I=w[1],U=function(){I(!1)},x=function(e){u(Object(E.a)({},e))},M=function(e){p(Object(E.a)(Object(E.a)({},i.meal),e))};return Object(c.useEffect)((function(){s||l||I(!1)}),[s]),Object(c.useEffect)((function(){I(!!i.meal)}),[i.meal]),o.a.createElement(o.a.Fragment,null,o.a.createElement(k,{item:"meal",onClick:function(){I(!0)}}),o.a.createElement(P.a,{fullWidth:!0,fullScreen:b,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:U,onFocus:function(e){return e.stopPropagation()},open:R,TransitionProps:{onExit:d}},o.a.createElement(D.c,{initialValues:{title:(null===(t=i.meal)||void 0===t?void 0:t.title)||"",recipes:(null===(n=i.meal)||void 0===n?void 0:n.recipes)||[],mealType:(null===(a=i.meal)||void 0===a?void 0:a.mealType)||"",notes:(null===(r=i.meal)||void 0===r?void 0:r.notes)||""},validationSchema:h.d({title:h.e().required("Required"),recipes:h.a(),mealType:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.meal?M(t):x(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return o.a.createElement(D.b,null,o.a.createElement(S.a,null,i.meal?"Update meal":"Add meal"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:l}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!i.meal,component:A.b,disabled:s,id:"title",label:"Meal Title",name:"title",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:s,id:"mealType",label:"Meal Type",name:"mealType",type:"select",select:!0,fullWidth:!0},We.map((function(e){var t=e.toLowerCase();return o.a.createElement(de.a,{key:t,value:t},e)})))),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:s,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(Fe,{onChange:e.setFieldValue,name:"recipes",recipes:m,values:e.values.recipes})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:s,type:"submit",variant:"contained"},i.meal?s?"Updating...":"Update":s?"Adding...":"Add"),o.a.createElement(g.a,{disabled:s,onClick:U,variant:"contained"},"Cancel")))}))))})),Be=Object(r.c)((function(e){return{meals:e.meals.meals,recipes:e.recipes.recipes}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_MEAL",payload:M.a.Meals.delete(t),snackbar:{message:"Meal deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_MEALS",payload:M.a.Meals.deleteMany(t),snackbar:{message:"".concat(t.length," meal").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onLoadUpdate:function(t){return e({type:"MEAL_DIALOG_LOADED",meal:t})}}}))((function(e){var t=e.meals,n=e.onDelete,a=e.onDeleteMany,r=e.onLoadUpdate,i=e.recipes,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([{title:"Title",field:"title"},{title:"Meal Type",field:"mealType",lookup:We.reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{})},{title:"Notes",field:"notes"}]),m=Object(v.a)(p,1)[0];return Object(c.useEffect)((function(){var e=i.filter((function(e){return!0===e.isMeal})),n=[].concat(Object(B.a)(e),Object(B.a)(t)).sort((function(e,t){return e.title.localeCompare(t.title)}));d(n)}),[t,i]),o.a.createElement(z.a,{title:"Meals",columns:m,data:u,localization:{body:{emptyDataSourceMessage:"No meals found",editRow:{deleteText:"Delete meal? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,selectionProps:function(e){return{disabled:!!e.isMeal}},toolbar:!0},actions:[{action:function(e){return{disabled:!!e.isMeal,icon:"edit",onClick:function(e,t){r(t)},tooltip:e.isMeal?"Cannot edit recipes here":"Update meal"}},position:"row"},{icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));a(t)}(t)},position:"toolbarOnSelect",tooltip:"Delete all selected meals"}],editable:{isDeletable:function(e){return!e.isMeal},onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),n(e),t()}))}}})})),He=Object(r.c)((function(e){return{pageLoaded:e.meals.pageLoaded}}),(function(e){return{onLoad:function(){return e({type:"MEALS_PAGE_LOADED",payload:Promise.all([M.a.Meals.getAll(),M.a.Recipes.getAll()])})},onUnload:function(){return e({type:"MEALS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:"Manage Meals"},o.a.createElement(qe,null)),a?o.a.createElement(Be,null):o.a.createElement(ee,null))})),ze=n(854),Ye=n(855),Je=n(477),Ke=n(866),$e=n(867),Qe=n(562),Ze=Object(b.a)({nav:{position:"fixed",bottom:0,width:"100%",zIndex:"1000"}}),Xe=Object(r.c)((function(e){return{currentUser:e.common.currentUser,navTabValue:e.nav.navTabValue,path:e.router.location.pathname}}),(function(e){return{onLoad:function(t,n){return e({type:"NAV_LOADED",value:t,redirectTo:n})},onTabChange:function(t,n){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:n})},onUnload:function(){return e({type:"NAV_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.navTabValue,a=e.onLoad,r=e.onTabChange,i=e.onUnload,l=e.path,s=Ze(),u=t.role,d=function(e){r(e,"/".concat(e))};return Object(c.useEffect)((function(){var e=l.split("/")[1];if(e&&""!==e)a(e,"/".concat(e));else{var t="admin"===u?"users":"plans";a(t,"/".concat(t))}return function(){i()}}),[]),Object(c.useEffect)((function(){var e=Object(Qe.loadCSS)("https://use.fontawesome.com/releases/v5.15.3/css/all.css",document.querySelector("#font-awesome-css"));return function(){e.parentNode.removeChild(e)}})),"admin"===u?o.a.createElement(ze.a,{className:s.nav,onChange:function(e,t){d(t)},showLabels:!0,value:n},o.a.createElement(Ye.a,{label:"Users",icon:o.a.createElement(Ke.a,null),value:"users"}),o.a.createElement(Ye.a,{label:"Settings",icon:o.a.createElement($e.a,null),value:"settings"})):o.a.createElement(ze.a,{className:s.nav,onChange:function(e,t){d(t)},showLabels:!0,value:n},o.a.createElement(Ye.a,{label:"Plans",icon:o.a.createElement(Je.a,{className:"fa fa-calendar-week"}),value:"plans"}),o.a.createElement(Ye.a,{label:"Meals",icon:o.a.createElement(Je.a,{className:"fa fa-utensils"}),value:"meals"}),o.a.createElement(Ye.a,{label:"Recipes",icon:o.a.createElement(Je.a,{className:"fa fa-hamburger"}),value:"recipes"}),o.a.createElement(Ye.a,{label:"Ingredients",icon:o.a.createElement(Je.a,{className:"fa fa-carrot"}),value:"ingredients"}),o.a.createElement(Ye.a,{label:"Settings",icon:o.a.createElement($e.a,null),value:"settings"}))})),et=Object(b.a)((function(e){return{wrapper:{marginTop:e.spacing(4),marginBottom:e.spacing(11)}}})),tt=function(e){var t=et();return o.a.createElement("div",{className:t.wrapper},e.children)},nt=function(e){return o.a.createElement(tt,null,o.a.createElement(m.a,null,o.a.createElement(K.a,{variant:"h2"},"Error 404: Page Not Found")))},at=n(398),rt=n(396),ct=n(346),ot=n(868),it=Object(b.a)((function(e){return{checked:{"& + span":{color:e.palette.primary.light,textDecoration:"line-through","& svg":{opacity:.5}}},icon:{marginLeft:e.spacing(1)},listItem:{alignItems:"center",display:"flex"}}})),lt=function(e){var t=e.list,n=it(),a=Object(c.useState)({}),r=Object(v.a)(a,2),i=r[0],l=r[1],s=function(e){l(Object(E.a)(Object(E.a)({},i),{},Object(ue.a)({},e.target.name,e.target.checked)))};return Array.isArray(t)&&t.length>0?o.a.createElement(at.a,null,t.map((function(e){var t;return o.a.createElement(rt.a,{control:o.a.createElement(ct.a,{checked:null!==(t=i["".concat(e.name,"-").concat(e.unit)])&&void 0!==t&&t,classes:{checked:n.checked},onChange:s,name:"".concat(e.name,"-").concat(e.unit)}),key:"".concat(e.id,"-").concat(e.unit),label:o.a.createElement("span",{className:n.listItem},e.quantity&&e.unit?"".concat(e.name," (").concat(e.quantity," ").concat(e.unit,")"):"".concat(e.name),o.a.createElement(Oe.a,{arrow:!0,enterTouchDelay:0,title:"Needed for: ".concat(e.recipes.join(", "))},o.a.createElement(ot.a,{className:n.icon,color:"secondary"})))})}))):o.a.createElement(K.a,null,t)},st=n(323),ut=n(324),dt=n(348),pt=function(e){var t=e.defaultStore,n=e.onChange,a=e.stores,r=Object(c.useState)(null!==t&&void 0!==t?t:""),i=Object(v.a)(r,2),l=i[0],s=i[1];return o.a.createElement(st.a,{fullWidth:!0},o.a.createElement(ut.a,{id:"store-selector-label"},"Select a Store"),o.a.createElement(dt.a,{id:"store-selector",labelId:"store-selector-label",onChange:function(e){var t=e.target.value;n(t),s(t)},value:l},!l&&o.a.createElement(de.a,{key:"blank",value:""}),a.map((function(e){return o.a.createElement(de.a,{key:e._id,value:e._id},e.name)}))))},mt=Object(r.c)((function(e){return{categories:e.categories.categories,defaultStore:e.common.settings.defaultStore,ingredients:e.ingredients.ingredients,meals:e.meals.meals,recipes:e.recipes.recipes,stores:e.stores.stores,viewer:e.plans.viewer}}),(function(e){return{onCopy:function(){return e({type:"PLAN_LIST_COPIED",snackbar:{message:"List copied",variant:"success"}})},onExit:function(){return e({type:"PLAN_LIST_DIALOG_UNLOADED"})}}}))((function(e){var t,n=e.categories,a=e.defaultStore,r=e.ingredients,i=e.meals,l=e.onCopy,s=e.onExit,u=e.recipes,d=e.stores,p=e.viewer,m=Object(c.useState)([]),f=Object(v.a)(m,2),b=f[0],O=f[1],y=Object(c.useState)(!1),j=Object(v.a)(y,2),D=j[0],A=j[1],h=Object(c.useState)(a),w=Object(v.a)(h,2),R=w[0],I=w[1],k=Object(_.a)(),U=Object(L.a)(k.breakpoints.down("md")),x=function(){if(p.plan){var e;if(0===n.length)return"No categories found";for(var t=[],a=0,c=Object.entries(p.plan.meals);a<c.length;a++){var o=Object(v.a)(c[a],2),l=(o[0],o[1].map((function(e){var t;return null!==(t=i.find((function(t){return t._id===e})))&&void 0!==t?t:u.find((function(t){return t._id===e}))})));t=[].concat(Object(B.a)(t),Object(B.a)(l))}if(0===t.length)return"No meals found";var s=t.flatMap((function(e){return e.hasOwnProperty("recipes")?e.recipes:e}));if(0===s.length)return"No recipes found";var m=s.flatMap((function(e){return e.ingredients.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{recipe:e.title})}))})).map((function(e){var t=r.find((function(t){return t._id===e.id})),a=n.find((function(e){return e._id===t.category}));return Object(E.a)(Object(E.a)({},e),{},{category:a._id,name:t.name})}));if(0===m.length)return"No ingredients found";var f=m.reduce((function(e,t){var n={id:t.id,name:t.name,quantity:t.quantity,recipes:[t.recipe],unit:t.unit};return e.hasOwnProperty(t.category)?e[t.category].push(n):e[t.category]=[n],e}),{}),b=[],g=d.find((function(e){return e._id===R}));return(null!==(e=null===g||void 0===g?void 0:g.categories)&&void 0!==e?e:n).forEach((function(e){var t,n=(null!==(t=f[e._id])&&void 0!==t?t:[]).reduce((function(e,t){var n=function(e){return e.id===t.id&&e.unit===t.unit};if(e.find((function(e){return n(e)}))){var a=e.findIndex((function(e){return n(e)}));e[a]=Object(E.a)(Object(E.a)({},e[a]),{},{quantity:e[a].quantity+t.quantity,recipes:e[a].recipes.concat(t.recipes.filter((function(t){return e[a].recipes.indexOf(t)<0})))})}else e.push(t);return e}),[]);b.push(n)})),b.flat()}return"No plan found"},G=function(){A(!1)};return Object(c.useEffect)((function(){D&&O(x())}),[D]),Object(c.useEffect)((function(){"list"===p.type&&A(!!p.plan)}),[p.plan]),Object(c.useEffect)((function(){O(x())}),[R]),o.a.createElement(P.a,{fullScreen:U,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:G,onFocus:function(e){return e.stopPropagation()},open:D,TransitionProps:{onExit:function(){I(a),O([]),s()}}},o.a.createElement(S.a,null,"Shopping List for ",null===(t=p.plan)||void 0===t?void 0:t.title),o.a.createElement(N.a,null,o.a.createElement(T.a,{container:!0,spacing:2},d.length>0&&o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(pt,{defaultStore:a,onChange:function(e){I(e)},stores:d})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(lt,{list:b})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:!Array.isArray(b),onClick:function(){var e=b.map((function(e){return"".concat(e.name," (").concat(e.quantity," ").concat(e.unit,")")})).join("\n");navigator.clipboard.writeText(e).then((function(){l()}),(function(e){console.error("error",e)}))},variant:"contained"},"Copy list"),o.a.createElement(g.a,{onClick:G,variant:"contained"},"Close")))})),Et=n(87),ft=n(223),bt=n(869),gt=function(e){var t=e.index,n=e.meal,a=e.onRemove,r=e.uniqueId,c=Object(_.a)();return o.a.createElement(Et.Draggable,{key:r,draggableId:r,index:t},(function(e,t){return o.a.createElement(ft.a,Object.assign({elevation:3,ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(i=t.isDragging,l=e.draggableProps.style,Object(E.a)({alignItems:"center",background:i?c.palette.secondary.light:"white",display:"flex",justifyContent:"space-between",marginBottom:c.spacing(1),padding:c.spacing(1),userSelect:"none"},l))}),n.title,o.a.createElement(ye.a,{id:r,onClick:a,size:"small"},o.a.createElement(bt.a,null)));var i,l}))},Ot=function(e){var t=e.meals,n=e.name,a=e.onChange,r=Object(c.useState)([]),i=Object(v.a)(r,2),l=i[0],s=i[1],u=t.map((function(e){var t=e.title[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)}));return Object(c.useEffect)((function(){s(u)}),[t]),o.a.createElement(ke.a,{autoHighlight:!0,autoSelect:!0,getOptionLabel:function(e){return e.title},groupBy:function(e){return e.firstLetter},noOptionsText:"No meals have been created",onChange:function(e,t){a(n,null===t||void 0===t?void 0:t._id)},options:l,renderInput:function(e){return o.a.createElement(Ue.a,Object.assign({},e,{autoFocus:!0,label:"Meals",variant:"outlined"}))},renderOption:function(e,t){var n=t.inputValue,a=Ve()(e.title,n),r=Ge()(e.title,a);return o.a.createElement("div",null,r.map((function(e,t){return o.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}})},yt=function(e){var t=e.day,n=e.meals,a=e.onAdd,r=Object(c.useState)(!1),i=Object(v.a)(r,2),l=i[0],s=i[1],u=Object(_.a)(),d=Object(L.a)(u.breakpoints.down("md")),p=function(){s(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Oe.a,{arrow:!0,title:"Add meal to ".concat(t)},o.a.createElement(w.a,{color:"secondary",onClick:function(){s(!0)},size:"small"},o.a.createElement(R.a,null))),o.a.createElement(P.a,{fullScreen:d,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:p,onFocus:function(e){return e.stopPropagation()},open:l,TransitionProps:{onExit:function(){}}},o.a.createElement(D.c,{initialValues:{meal:""},onSubmit:function(e){!function(e){var n={day:t,mealId:e.meal};a(n),p()}(e)}},(function(e){return o.a.createElement(D.b,null,o.a.createElement(S.a,null,"Add meal to ",t),o.a.createElement(N.a,null,o.a.createElement(Ot,{meals:n,name:"meal",onChange:e.setFieldValue})),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:!e.values.meal,type:"submit",variant:"contained"},"Add"),o.a.createElement(g.a,{onClick:p,variant:"contained"},"Cancel")))}))))},jt=Object(b.a)((function(e){var t;return{dayHeader:(t={alignItems:"center",borderBottom:"2px solid ".concat(e.palette.secondary.light),display:"flex",justifyContent:"space-between",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(1),"px ").concat(e.spacing(1),"px"),width:"100%"},Object(ue.a)(t,e.breakpoints.up("lg"),{width:"50%"}),Object(ue.a)(t,"& > button",{visibility:"hidden"}),Object(ue.a)(t,"&:hover > button",{visibility:"visible"}),t)}})),vt=function(e){var t=e.day,n=e.mealPlan,a=e.meals,r=e.onAdd,c=e.onRemove,i=Object(_.a)(),l=Object(L.a)(i.breakpoints.down("md")),s=jt(),u=n.map((function(e){return a.find((function(t){return t._id===e}))}));return o.a.createElement("div",null,o.a.createElement("div",{className:s.dayHeader},o.a.createElement(K.a,{color:"primary",variant:"h6"},o.a.createElement("em",null,t)),o.a.createElement(yt,{day:t,meals:a,onAdd:r})),o.a.createElement(Et.Droppable,{droppableId:t},(function(e,n){return o.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(a=n.isDraggingOver,{border:a?"2px dashed ".concat(i.palette.primary.light):"2px dashed white",minHeight:"120px",padding:i.spacing(1),width:l?"100%":"50%"})}),u.map((function(e,n){var a="".concat(t,"-").concat(e._id,"-").concat(n);return o.a.createElement(gt,{index:n,key:a,meal:e,onRemove:c,uniqueId:a})})),e.placeholder);var a})))},Dt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],At=function(e){var t=e.meals,n=e.mealPlan,a=e.name,r=e.onChange,i=Object(c.useState)(n),l=Object(v.a)(i,2),s=l[0],u=l[1],d=function(e){var t=e.day,c=e.mealId,o=Object(E.a)({},n);o[t].push(c),u(o),r(a,o)},p=function(e){var t=e.currentTarget.getAttribute("id").split("-"),c=Object(v.a)(t,2),o=c[0],i=c[1],l=Object(E.a)({},n),s=l[o].indexOf(i);l[o].splice(s,1),u(l),r(a,l)};return o.a.createElement(Et.DragDropContext,{onDragEnd:function(e){var t=e.destination,c=e.source,o=e.draggableId;if(t&&(t.droppableId!==c.droppableId||t.index!==c.index)){var i=c.droppableId,l=t.droppableId,s=o.split("-")[1],d=Object(E.a)({},n);d[i].splice(c.index,1),d[l].splice(t.index,0,s),u(d),r(a,d)}}},Dt.map((function(e){return o.a.createElement(vt,{day:e,key:e,meals:t,mealPlan:s[e],onAdd:d,onRemove:p})})))},ht=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.plans),{},{meals:e.meals.meals,recipes:e.recipes.recipes})}),(function(e){return{onAdd:function(t){return e({type:"ADD_PLAN",payload:M.a.Plans.add(t),snackbar:{message:"Plan added",variant:"success"}})},onExit:function(){return e({type:"PLAN_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_PLAN",payload:M.a.Plans.update(t),snackbar:{message:"Plan updated",variant:"success"}})}}}))((function(e){var t,n,a,r,i,l=e.editor,s=e.errors,u=e.inProgress,d=e.meals,p=e.onAdd,f=e.onExit,b=e.onUpdate,O=function(e,t){var n=Object(B.a)(e),a=t.filter((function(e){return e.isMeal})).map((function(e){return{mealType:e.mealType,notes:e.notes,recipes:[e],slug:e.slug,title:e.title,_id:e._id}}));return[].concat(Object(B.a)(n),Object(B.a)(a)).sort((function(e,t){return e.title.localeCompare(t.title)}))}(d,e.recipes),_=Dt.reduce((function(e,t){return e[t]=[],e}),{}),L=Object(c.useState)(!1),w=Object(v.a)(L,2),R=w[0],I=w[1],U=function(){I(!1)},x=function(e){p(Object(E.a)({},e))},M=function(e){b(Object(E.a)(Object(E.a)({},l.plan),e))};return Object(c.useEffect)((function(){u||s||I(!1)}),[u]),Object(c.useEffect)((function(){I(!!l.plan)}),[l.plan]),o.a.createElement(o.a.Fragment,null,o.a.createElement(k,{item:"plan",onClick:function(){I(!0)}}),o.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:U,onFocus:function(e){return e.stopPropagation()},open:R,scroll:"body",TransitionProps:{onExit:f}},o.a.createElement(D.c,{initialValues:{meals:(null===(t=l.plan)||void 0===t?void 0:t.meals)||_,notes:(null===(n=l.plan)||void 0===n?void 0:n.notes)||"",order:(null===(a=l.plan)||void 0===a?void 0:a.order)||0,skip:(null===(r=l.plan)||void 0===r?void 0:r.skip)||!1,title:(null===(i=l.plan)||void 0===i?void 0:i.title)||""},validationSchema:h.d({meals:h.d(),notes:h.e(),order:h.c(),skip:h.b(),title:h.e().required("Required")}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.plan?M(t):x(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return o.a.createElement(m.a,{disableGutters:!0},o.a.createElement(D.b,null,o.a.createElement(S.a,null,l.plan?"Update plan":"Add plan"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:s}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!l.plan,component:A.b,disabled:u,id:"title",label:"Plan Title",name:"title",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:u,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Meals"),o.a.createElement(At,{meals:O,mealPlan:e.values.meals,name:"meals",onChange:e.setFieldValue})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:u,type:"submit",variant:"contained"},l.plan?u?"Updating...":"Update":u?"Adding...":"Add"),o.a.createElement(g.a,{disabled:u,onClick:U,variant:"contained"},"Cancel"))))}))))})),_t=Object(b.a)((function(e){return{dayList:{listStyle:"none",paddingLeft:e.spacing(1)},mealHeader:{padding:e.spacing(1)},mealLink:{border:"1px solid",borderColor:"white",borderRadius:e.spacing(1),padding:e.spacing(1),"&:hover":{borderColor:e.palette.secondary.light},"& a":{color:e.palette.text.primary,height:"100%",textDecoration:"none",width:"100%"}},paper:{padding:e.spacing(2)},recipeList:{listStyle:"none",paddingLeft:e.spacing(2)}}})),Lt=Object(r.c)((function(e){return{meals:e.meals.meals,plan:e.plans.viewer.plan,recipes:e.recipes.recipes}}),(function(e){return{onLoadView:function(t){return e({type:"RECIPE_VIEW_LOADED",recipe:t})}}}))((function(e){var t=e.meals,n=e.onLoadView,a=e.plan,r=e.recipes,c=_t(),i=Object.keys(a.meals),l=function(e){var n=t.find((function(t){return t._id===e}));return n||r.find((function(t){return t._id===e}))},s=function(e){n(e)};return a&&o.a.createElement(ft.a,{className:c.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5"},a.title)),a.notes&&o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Notes"),o.a.createElement(K.a,null,a.notes)),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5"},"Meals"),o.a.createElement("hr",null),o.a.createElement(T.a,{container:!0,item:!0,xs:12,spacing:2},i.map((function(e){var t=a.meals[e];return o.a.createElement(T.a,{item:!0,xs:12,key:e},o.a.createElement(K.a,{variant:"h6"},e),o.a.createElement("ul",{className:c.dayList},t.map((function(e){var t=l(e);return(null===t||void 0===t?void 0:t.recipes)?o.a.createElement("li",{key:e},o.a.createElement(K.a,{className:c.mealHeader},o.a.createElement("em",null,null===t||void 0===t?void 0:t.title)),o.a.createElement("ul",{className:c.recipeList},t.recipes.map((function(e){return o.a.createElement("li",{className:c.mealLink,key:e._id},o.a.createElement("a",{href:"#",onClick:function(){return s(e)}},o.a.createElement(K.a,null,e.title)))})))):o.a.createElement("li",{className:c.mealLink,key:t._id},o.a.createElement("a",{href:"#",onClick:function(){return s(t)}},o.a.createElement(K.a,null,null===t||void 0===t?void 0:t.title)))}))))}))))))})),Pt=n(402),St=n(870),Nt=function(e){var t=e.data,n=e.name,a=e.onDelete,r=Object(c.useState)(!1),i=Object(v.a)(r,2),l=i[0],s=i[1],u=function(){s(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ve,{action:"Delete selected "+n+"s",onClick:function(){s(!0)}},o.a.createElement(Te.a,null)),o.a.createElement(P.a,{open:l,onClick:function(e){return e.stopPropagation()},onClose:u,onFocus:function(e){return e.stopPropagation()}},o.a.createElement(S.a,null,"Delete selected ",n,"s?"),o.a.createElement(N.a,null,o.a.createElement(Ne.a,{component:"div"},"This action will permanently delete all of the selected ",n,"s.")),o.a.createElement(C.a,null,o.a.createElement(g.a,{onClick:function(){s(!1),a(t)},color:"secondary",variant:"contained",autoFocus:!0},"Delete ",n,"s"),o.a.createElement(g.a,{onClick:u,variant:"contained"},"Cancel"))))},Tt=Object(r.c)((function(e){return{plans:e.plans.plans,starredPlan:e.common.settings.starredPlan}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_PLAN",payload:M.a.Plans.delete(t),snackbar:{message:"Plan deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_PLANS",payload:M.a.Plans.deleteMany(t),snackbar:{message:"Plans deleted",variant:"success"}})},onLoadUpdate:function(t){return e({type:"PLAN_DIALOG_LOADED",plan:t})},onLoadView:function(t){return e({type:"PLAN_VIEW_LOADED",plan:t})},onSetStarred:function(t){return e({type:"SET_STARRED_PLAN",payload:M.a.Settings.update(t),snackbar:{message:"Starred plan saved",variant:"success"}})},onUpdateArchiveStatus:function(t,n){return e({type:"UPDATE_PLAN_ARCHIVE_STATUS",payload:M.a.Plans.update(t),snackbar:{message:"Plan ".concat(n),variant:"success"}})},onViewShoppingList:function(t){return e({type:"PLAN_LIST_DIALOG_LOADED",plan:t})}}}))((function(e){var t=e.filter,n=e.onDelete,a=e.onDeleteMany,r=e.onLoadUpdate,i=e.onLoadView,l=e.onSetStarred,s=e.onUpdateArchiveStatus,u=e.onViewShoppingList,d=e.plans,p=e.starredPlan,m=Object(c.useState)([]),f=Object(v.a)(m,2),b=f[0],g=f[1],O=Object(c.useState)([{title:"Title",field:"title"},{title:"Notes",field:"notes"}]),y=Object(v.a)(O,1)[0],j=function(e){a(e)};return Object(c.useEffect)((function(){var e=Object(B.a)(d).sort((function(e,t){return e._id===p?-1:t._id===p?1:0})),n="archived"===t?e.filter((function(e){return!0===e.archived})):"unarchived"===t?e.filter((function(e){return!1===e.archived})):e;g(n)}),[d,p]),o.a.createElement(z.a,{title:"Plans",columns:y,data:b,components:{Action:function(e){return"function"===typeof e.action.icon?e.action.icon(e.data):o.a.createElement(Pt.MTableAction,e)},Container:function(e){return o.a.createElement(ft.a,Object.assign({},e,{elevation:"archived"===t?0:1}))}},localization:{body:{emptyDataSourceMessage:"No plans found",editRow:{deleteText:"Delete plan? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{action:function(e){return{disabled:e.archived,icon:e._id===p?"star":function(){return o.a.createElement(St.a,null)},onClick:function(e,t){return function(e){var t={starredPlan:p!==e._id?e:null};l(t)}(t)},tooltip:e._id===p?"Unstar plan":"Star plan"}},position:"row"},{icon:"list",onClick:function(e,t){u(t)},tooltip:"View shopping list",position:"row"},{icon:"visibility",onClick:function(e,t){i(t)},position:"row",tooltip:"View plan"},{icon:"edit",onClick:function(e,t){r(t)},tooltip:"Update plan",position:"row"},{action:function(e){return{icon:e.archived?"unarchive":"archive",onClick:function(e,t){return function(e){var t=e.archived?"unarchived":"archived";s(Object(E.a)(Object(E.a)({},e),{},{archived:!e.archived}),t)}(t)},tooltip:e.archived?"Unarchive plan":"Archive plan"}},position:"row"},{icon:function(e){return o.a.createElement(Nt,{data:e,name:"plan",onDelete:j})},position:"toolbarOnSelect",tooltip:"Delete selected plans"}],editable:{onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(b),c=e.tableData.id;r.splice(c,1),g(Object(B.a)(r)),n(e),t()}))}}})})),Ct=n(563),wt=n.n(Ct),Rt=n(403),It=Object(b.a)((function(e){return{error:{color:"#f44336",fontSize:"0.75rem",fontWeight:400,letterSpacing:"0.03333em",lineHeight:1.66,margin:0,marginTop:"3px",textAlign:"left"}}})),kt=function(e){var t=Object(c.useState)(null),n=Object(v.a)(t,1)[0],a=It();return o.a.createElement(o.a.Fragment,null,o.a.createElement(wt.a,Object.assign({controls:["numberList","bold","italic","underline","undo","redo"],defaultValue:e.initialValue,error:n&&e.touched,label:e.placeholder,onBlur:function(){!e.readOnly&&e.onEditorBlur(e.name,!0,!1)},onChange:function(t){!e.readOnly&&e.onEditorChange(e.name,JSON.stringify(Object(Rt.convertToRaw)(t.getCurrentContent())),!1)}},e)),n&&e.touched&&o.a.createElement("div",{className:a.error},n))},Ut=Object(b.a)((function(e){return{ingredients:{backgroundColor:"#eee"},ingredientsList:{listStyle:"none",paddingLeft:e.spacing(2),"& li":{marginBottom:e.spacing(2)}},ingredientName:{fontSize:e.typography.subtitle1.fontSize,fontWeight:"bold"},ingredientDetails:{color:e.palette.text.secondary},paper:{padding:e.spacing(2)}}})),xt=function(e){var t=e.ingredients,n=e.recipe,a=Ut();return n&&o.a.createElement(ft.a,{className:a.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5"},n.title),o.a.createElement(K.a,{variant:"subtitle2"},function(e){var t=[];return e.servings&&t.push(o.a.createElement(o.a.Fragment,{key:1},o.a.createElement("em",null,"Servings: "),o.a.createElement("u",null,e.servings))),t.push(" | "),e.prepTime&&t.push(o.a.createElement(o.a.Fragment,{key:2},o.a.createElement("em",null,"Prep Time: "),o.a.createElement("u",null,e.prepTime))),e.wwPoints&&(t.push(" | "),t.push(o.a.createElement(o.a.Fragment,{key:3},o.a.createElement("em",null,"WW Points: "),o.a.createElement("u",null,e.wwPoints)))),e.isMeal&&(t.push(" | "),t.push(o.a.createElement(o.a.Fragment,{key:4},o.a.createElement("em",null,"Meal Type: "),o.a.createElement("u",null,e.mealType)))),t}(n))),o.a.createElement(T.a,{item:!0,xs:12,className:a.ingredients},o.a.createElement(K.a,{variant:"h6"},"Ingredients"),o.a.createElement("ul",{className:a.ingredientsList},n.ingredients.map((function(e){var n,r=(n=e.id,t.find((function(e){return e._id===n})));return e.id?o.a.createElement("li",{key:e.id},o.a.createElement("span",{className:a.ingredientName},null===r||void 0===r?void 0:r.name),o.a.createElement("br",null),o.a.createElement("span",{className:a.ingredientDetails},"".concat(e.quantity||""," ").concat(e.unit||""),e.notes&&", ".concat(e.notes))):null})))),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Directions"),o.a.createElement(kt,{initialValue:null===n||void 0===n?void 0:n.directions,toolbar:!1,readOnly:!0})),n.notes&&o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Notes"),o.a.createElement(K.a,null,n.notes))))},Gt=Object(r.c)((function(e){return{ingredients:e.ingredients.ingredients,pageLoaded:e.plans.pageLoaded,planViewer:e.plans.viewer,recipeViewer:e.recipes.viewer}}),(function(e){return{onLoad:function(){return e({type:"PLANS_PAGE_LOADED",payload:Promise.all([M.a.Plans.getAll(),M.a.Meals.getAll(),M.a.Recipes.getAll(),M.a.Ingredients.getAll(),M.a.Categories.getAll(),M.a.Stores.getAll()])})},onUnload:function(){return e({type:"PLANS_PAGE_UNLOADED"})},onUnloadPlanView:function(){return e({type:"PLAN_VIEW_UNLOADED"})},onUnloadRecipeView:function(){return e({type:"RECIPE_VIEW_UNLOADED"})}}}))((function(e){var t=e.ingredients,n=e.onLoad,a=e.onUnload,r=e.onUnloadPlanView,i=e.onUnloadRecipeView,l=e.pageLoaded,s=e.planViewer,u=e.recipeViewer,d=Object(c.useState)(!1),p=Object(v.a)(d,2),m=p[0],E=p[1],f=s.plan&&"plan"===s.type,b=!!u.recipe;return Object(c.useEffect)((function(){return n(),function(){a()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:b?"View Recipe":f?"View Plan":"Manage Plans"},b?o.a.createElement(g.a,{color:"secondary",onClick:i},"Back to Plan"):f?o.a.createElement(g.a,{color:"secondary",onClick:r},"Manage Plans"):o.a.createElement(ht,null)),l?b?o.a.createElement(xt,{ingredients:t,recipe:u.recipe}):f?o.a.createElement(Lt,null):o.a.createElement(T.a,{container:!0,spacing:4},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(Tt,{filter:"unarchived"})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5",gutterBottom:!0},"Archived Plans"),o.a.createElement(he.a,{onChange:function(e,t){return E(t)}},o.a.createElement(_e.a,{expandIcon:o.a.createElement(Se.a,null),"aria-controls":"archived-content",id:"archived-header"},o.a.createElement(K.a,{variant:"body1"},"Click to ",m?"hide":"show"," archived plans")),o.a.createElement(Pe.a,{style:{display:"block"}},o.a.createElement(Tt,{filter:"archived"}))))):o.a.createElement(ee,null),o.a.createElement(mt,null))})),Mt=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){return e.currentUser?o.a.createElement(s.b,{exact:!0,path:e.path,component:e.component}):o.a.createElement(s.a,{to:"/"})})),Vt=n(865),Ft=Object(Vt.a)(),Wt=Object(r.c)((function(e){return{editor:e.recipes.editor,ingredients:e.ingredients.ingredients}}),(function(e){return{onBlur:function(){return e({type:"RECIPE_INGREDIENT_ONBLUR"})}}}))((function(e){var t=e.editor,n=e.ingredients,a=e.onBlur,r=e.onChange,i=e.value,l=Object(c.useState)(null),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([]),m=Object(v.a)(p,2),f=m[0],b=m[1],g=Object(c.useState)(null!==i&&void 0!==i?i:null),O=Object(v.a)(g,2),y=O[0],j=O[1],D=n.map((function(e){var t=e.name[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)})),A=function(e,t){"string"!==typeof t&&(j(t),r(e,t)),a()};Object(c.useEffect)((function(){b(D)}),[n]),Object(c.useEffect)((function(){t.ingredient&&(j(t.ingredient),r({},t.ingredient),a())}),[t.ingredient]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(ke.a,{autoHighlight:!0,autoSelect:!0,freeSolo:!0,options:f,value:y,filterOptions:function(e,t){var n=Ft(e,t);return""!==t.inputValue&&n.push({inputValue:t.inputValue,name:'Add "'.concat(t.inputValue,'"')}),n},getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.name},getOptionSelected:function(e,t){return e._id===(null===t||void 0===t?void 0:t._id)},groupBy:function(e){return e.firstLetter},onKeyDown:function(e){return function(e){"Enter"===e.key&&e.stopPropagation()}(e)},renderInput:function(e){return o.a.createElement(Ue.a,Object.assign({},e,{autoFocus:!0,label:"Ingredient name",variant:"outlined"}))},onBlur:a,onChange:function(e,t){t&&t.inputValue&&d({name:t.inputValue}),A(e,t)},renderOption:function(e,t){var n=t.inputValue,a=Ve()(e.name,n),r=Ge()(e.name,a);return o.a.createElement("div",null,r.map((function(e,t){return o.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}}),o.a.createElement(me,{hideButton:!0,ingredient:u,isOpen:!!u,onClose:function(){d(null)}}))})),qt=function(e,t,n){return{name:e,abbr:t,conv:n}},Bt=[["count","ct",0],["cup","c",0],["dash","dsh",0],["fluid ounce","fl oz",0],["gram","g",0],["milliliter","mL",0],["ounce","oz",0],["package","pkg",0],["piece","piece",0],["pinch","pnch",0],["pint","pt",0],["pound","lb",0],["quart","qt",0],["slice","slc",0],["spray","spray",0],["tablespoon","tbsp",0],["teaspoon","tsp",0]].map((function(e){return qt.apply(void 0,Object(B.a)(e))})),Ht=function(e){var t=e.ingredients,n=e.ingredientsList,a=e.onChange,r=Object(c.useState)([]),i=Object(v.a)(r,2),l=i[0],s=i[1],u=Object(c.useState)([]),d=Object(v.a)(u,2),p=d[0],m=d[1];return Object(c.useEffect)((function(){s([{title:"Name",field:"id",lookup:n.reduce((function(e,t){return e[t._id]=t.name,e}),{}),editComponent:function(e){return o.a.createElement(Wt,{onChange:function(t,n){return e.onChange(null===n||void 0===n?void 0:n._id)},value:n.find((function(t){return t._id===e.value}))})}},{title:"Quantity",field:"quantity"},{title:"Unit",field:"unit",lookup:Bt.reduce((function(e,t){return e[t.abbr]="".concat(t.name,"s (").concat(t.abbr,")"),e}),{})},{title:"Notes",field:"notes"}])}),[n]),Object(c.useEffect)((function(){m(t)}),[t]),o.a.createElement(z.a,{title:"Ingredients",columns:l,data:p,localization:{body:{emptyDataSourceMessage:"No ingredients have been added",editRow:{deleteText:"Remove ingredient from this recipe?"}}},options:{actionsColumnIndex:-1,paging:!1,search:!1},editable:{onRowAdd:function(e){return new Promise((function(t,n){m([].concat(Object(B.a)(p),[e])),a([].concat(Object(B.a)(p),[e])),t()}))},onRowUpdate:function(e,t){return new Promise((function(n,r){var c=Object(B.a)(p);c[t.tableData.id]=e,m(Object(B.a)(c)),a(Object(B.a)(c)),n()}))},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(B.a)(p),c=e.tableData.id;r.splice(c,1),m(Object(B.a)(r)),a(Object(B.a)(r)),t()}))}}})},zt=function(){var e=Object(D.e)(),t=e.values,n=e.setFieldValue;return Object(c.useEffect)((function(){t.isMeal||n("mealType","")}),[t]),null},Yt=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.recipes),{},{ingredients:e.ingredients.ingredients})}),(function(e){return{onAdd:function(t){return e({type:"ADD_RECIPE",payload:M.a.Recipes.add(t),snackbar:{message:"Recipe added",variant:"success"}})},onExit:function(){return e({type:"RECIPE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_RECIPE",payload:M.a.Recipes.update(t),snackbar:{message:"Recipe updated",variant:"success"}})}}}))((function(e){var t,n,a,r,i,l,s,u,d,p=e.editor,f=e.errors,b=e.ingredients,O=e.inProgress,_=e.onAdd,L=e.onExit,w=e.onUpdate,R=Object(c.useState)(!1),I=Object(v.a)(R,2),U=I[0],x=I[1],M=function(){x(!1)},V=function(e){_(Object(E.a)({},e))},F=function(e){w(Object(E.a)(Object(E.a)({},p.recipe),e))};return Object(c.useEffect)((function(){O||f||x(!1)}),[O]),Object(c.useEffect)((function(){x(!!p.recipe)}),[p.recipe]),o.a.createElement(o.a.Fragment,null,o.a.createElement(k,{item:"recipe",onClick:function(){x(!0)}}),o.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:M,onFocus:function(e){return e.stopPropagation()},open:U,TransitionProps:{onExit:L}},o.a.createElement(D.c,{initialValues:{directions:(null===(t=p.recipe)||void 0===t?void 0:t.directions)||"",ingredients:(null===(n=p.recipe)||void 0===n?void 0:n.ingredients)||[],isMeal:(null===(a=p.recipe)||void 0===a?void 0:a.isMeal)||!1,mealType:(null===(r=p.recipe)||void 0===r?void 0:r.mealType)||"",notes:(null===(i=p.recipe)||void 0===i?void 0:i.notes)||"",prepTime:(null===(l=p.recipe)||void 0===l?void 0:l.prepTime)||"",servings:(null===(s=p.recipe)||void 0===s?void 0:s.servings)||"",title:(null===(u=p.recipe)||void 0===u?void 0:u.title)||"",wwPoints:(null===(d=p.recipe)||void 0===d?void 0:d.wwPoints)||""},validationSchema:h.d({directions:h.e().required("Required"),ingredients:h.a(),isMeal:h.b(),mealType:h.e(),notes:h.e(),prepTime:h.c().required("Required"),servings:h.c().required("Required"),title:h.e().required("Required"),wwPoints:h.c()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.recipe?F(t):V(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t;return o.a.createElement(m.a,{disableGutters:!0},o.a.createElement(D.b,null,o.a.createElement(S.a,null,p.recipe?"Update recipe":"Add recipe"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:f}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{autoFocus:!p.recipe,component:A.b,disabled:O,id:"title",label:"Recipe Title",name:"title",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:6,md:3},o.a.createElement(D.a,{component:A.a,disabled:O,type:"checkbox",name:"isMeal",Label:{label:"This recipe is a meal"}}),o.a.createElement(zt,null)),o.a.createElement(T.a,{item:!0,xs:6,md:3},e.values.isMeal&&o.a.createElement(D.a,{component:A.b,disabled:O,id:"mealType",label:"Meal Type",name:"mealType",type:"select",select:!0,fullWidth:!0},We.map((function(e){var t=e.toLowerCase();return o.a.createElement(de.a,{key:t,value:t},e)})))),o.a.createElement(T.a,{item:!0,xs:12,md:4},o.a.createElement(D.a,{component:A.b,disabled:O,id:"servings",label:"Servings",name:"servings",type:"number",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:4},o.a.createElement(D.a,{component:A.b,disabled:O,id:"prepTime",label:"Prep Time (minutes)",name:"prepTime",type:"number",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:4},o.a.createElement(D.a,{component:A.b,disabled:O,id:"wwPoints",label:"WW Points",name:"wwPoints",type:"number",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:O,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(Ht,{ingredients:e.values.ingredients,ingredientsList:b,onChange:function(t){e.setFieldValue("ingredients",t)}})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Directions"),o.a.createElement(kt,{errors:e.errors.directions,initialValue:null===(t=p.recipe)||void 0===t?void 0:t.directions,name:"directions",onEditorBlur:e.setFieldTouched,onEditorChange:e.setFieldValue,placeholder:"Enter recipe directions here...",touched:e.touched.directions})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:O,type:"submit",variant:"contained"},p.recipe?O?"Updating...":"Update":O?"Adding...":"Add"),o.a.createElement(g.a,{disabled:O,onClick:M,variant:"contained"},"Cancel"))))}))))})),Jt=Object(r.c)((function(e){return{recipes:e.recipes.recipes}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_RECIPE",payload:M.a.Recipes.delete(t),snackbar:{message:"Recipe deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_RECIPES",payload:M.a.Recipes.deleteMany(t),snackbar:{message:"".concat(t.length," recipe").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onLoadUpdate:function(t){return e({type:"RECIPE_DIALOG_LOADED",recipe:t})},onLoadView:function(t){return e({type:"RECIPE_VIEW_LOADED",recipe:t})}}}))((function(e){var t=e.onDelete,n=e.onDeleteMany,a=e.onLoadUpdate,r=e.onLoadView,i=e.recipes,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([{title:"Title",field:"title"},{title:"Prep Time (min)",field:"prepTime"},{title:"Servings",field:"servings"},{title:"WW Points",field:"wwPoints"},{title:"Meal Type",field:"mealType"},{title:"Notes",field:"notes"}]),m=Object(v.a)(p,1)[0];return Object(c.useEffect)((function(){d(i)}),[i]),o.a.createElement(z.a,{title:"Recipes",columns:m,data:u,localization:{body:{emptyDataSourceMessage:"No recipes found",editRow:{deleteText:"Delete recipe? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{icon:"visibility",onClick:function(e,t){r(t)},position:"row",tooltip:"View recipe"},{icon:"edit",onClick:function(e,t){a(t)},position:"row",tooltip:"Update recipe"},{icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));n(t)}(t)},position:"toolbarOnSelect",tooltip:"Delete all selected recipes"}],editable:{onRowDelete:function(e){return new Promise((function(n,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),t(e),n()}))}}})})),Kt=Object(r.c)((function(e){return{ingredients:e.ingredients.ingredients,pageLoaded:e.recipes.pageLoaded,viewer:e.recipes.viewer}}),(function(e){return{onLoad:function(){return e({type:"RECIPES_PAGE_LOADED",payload:Promise.all([M.a.Recipes.getAll(),M.a.Ingredients.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"RECIPES_PAGE_UNLOADED"})},onUnloadView:function(){return e({type:"RECIPE_VIEW_UNLOADED"})}}}))((function(e){var t=e.ingredients,n=e.onLoad,a=e.onUnload,r=e.onUnloadView,i=e.pageLoaded,l=e.viewer;return Object(c.useEffect)((function(){return n(),function(){a()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{title:l.recipe?"View Recipe":"Manage Recipes"},l.recipe?o.a.createElement(g.a,{color:"secondary",onClick:r},"Manage recipes"):o.a.createElement(Yt,null)),i?l.recipe?o.a.createElement(xt,{ingredients:t,recipe:l.recipe}):o.a.createElement(Jt,null):o.a.createElement(ee,null))})),$t=n(872),Qt=n(871),Zt=function(e){var t=e.category,n=e.index,a=Object(_.a)();return o.a.createElement(Et.Draggable,{draggableId:t.slug,index:n,key:t.slug},(function(e,n){return o.a.createElement(ft.a,Object.assign({elevation:3,ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(r=n.isDragging,c=e.draggableProps.style,Object(E.a)({background:r?a.palette.secondary.light:"white",marginBottom:a.spacing(1),padding:a.spacing(2),userSelect:"none"},c))}),t.name," ",t.isNew&&o.a.createElement(Le.a,{color:"secondary",label:"new",size:"small",style:{color:"white",fontStyle:"italic"}}));var r,c}))},Xt=function(e){var t=e.categories,n=Object(_.a)(),a=Object(L.a)(n.breakpoints.down("md"));return o.a.createElement(Et.Droppable,{droppableId:"categories"},(function(e,r){return o.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(c=r.isDraggingOver,{border:c?"2px dashed ".concat(n.palette.primary.light):"2px solid white",minHeight:"120px",padding:n.spacing(1),width:a?"100%":"50%"})}),t.map((function(e,t){return o.a.createElement(Zt,{category:e,index:t,key:e.slug})})),e.placeholder);var c}))},en=function(e){var t=e.categories,n=e.name,a=e.onChange,r=Object(c.useState)(t),i=Object(v.a)(r,2),l=i[0],s=i[1];return o.a.createElement(Et.DragDropContext,{onDragEnd:function(e){var r=e.destination,c=e.source,o=e.draggableId;if(r&&r.index!==c.index){var i=t.find((function(e){return e.slug===o})),u=Object(B.a)(l);u.splice(c.index,1),u.splice(r.index,0,i),s(u),a(n,u)}}},o.a.createElement(Xt,{categories:l}))},tn=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.stores),{},{categories:e.categories.categories})}),(function(e){return{onAdd:function(t){return e({type:"ADD_STORE",payload:M.a.Stores.add(t),snackbar:{message:"Store added",variant:"success"}})},onExit:function(){return e({type:"STORE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_STORE",payload:M.a.Stores.update(t),snackbar:{message:"Store updated",variant:"success"}})}}}))((function(e){var t,n,a,r=e.categories,i=e.editor,l=e.errors,s=e.inProgress,u=e.onAdd,d=e.onExit,p=e.onUpdate,f=Object(c.useState)(!1),b=Object(v.a)(f,2),O=b[0],_=b[1],L=!!(null===(t=i.store)||void 0===t?void 0:t.name),w=function(){_(!1)},R=function(e){u(Object(E.a)({},e))},I=function(e){p(Object(E.a)(Object(E.a)({},i.store),e))};return Object(c.useEffect)((function(){s||l||_(!1)}),[s]),Object(c.useEffect)((function(){_(!!i.store)}),[i.store]),o.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:w,onFocus:function(e){return e.stopPropagation()},open:O,TransitionProps:{onExit:d}},o.a.createElement(D.c,{initialValues:{categories:function(){var e;if(!(null===(e=i.store)||void 0===e?void 0:e.categories))return r;var t=Object(B.a)(i.store.categories);return r.forEach((function(e){t.find((function(t){return t._id===e._id}))||t.push(Object(E.a)(Object(E.a)({},e),{},{isNew:!0}))})),t}(),name:(null===(n=i.store)||void 0===n?void 0:n.name)||"",notes:(null===(a=i.store)||void 0===a?void 0:a.notes)||""},validationSchema:h.d({categories:h.a(),name:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L?I(t):R(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return o.a.createElement(m.a,{disableGutters:!0},o.a.createElement(D.b,null,o.a.createElement(S.a,null,L?"Update store":"Add store"),o.a.createElement(N.a,null,o.a.createElement(G,{errors:l}),o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{autoFocus:!L,component:A.b,disabled:s,id:"name",label:"Store Name",name:"name",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:s,id:"notes",label:"Store Notes",name:"notes",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h6"},"Categories"),o.a.createElement(en,{categories:e.values.categories,name:"categories",onChange:e.setFieldValue})))),o.a.createElement(C.a,null,o.a.createElement(g.a,{color:"primary",disabled:s,type:"submit",variant:"contained"},L?s?"Updating...":"Update":s?"Adding...":"Add"),o.a.createElement(g.a,{disabled:s,onClick:w,variant:"contained"},"Cancel"))))})))})),nn=Object(r.c)((function(e){return{defaultStore:e.common.settings.defaultStore,stores:e.stores.stores}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_STORE",payload:M.a.Stores.delete(t),snackbar:{message:"Store deleted",variant:"success"}})},onLoadUpdate:function(t){return e({type:"STORE_DIALOG_LOADED",store:t})},onSetDefault:function(t){return e({type:"SET_DEFAULT_STORE",payload:M.a.Settings.update(t),snackbar:{message:"Default store saved",variant:"success"}})}}}))((function(e){var t=e.defaultStore,n=e.onDelete,a=e.onLoadUpdate,r=e.onSetDefault,i=e.stores,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([{title:"Name",field:"name"},{title:"Notes",field:"notes"}]),m=Object(v.a)(p,1)[0],E=function(e){a(e)};return Object(c.useEffect)((function(){d(i)}),[i]),o.a.createElement(o.a.Fragment,null,o.a.createElement(tn,null),o.a.createElement(z.a,{title:"Manage Stores",columns:m,data:u,localization:{body:{emptyDataSourceMessage:"No stores found",editRow:{deleteText:"Delete store? This action cannot be undone."}}},actions:[{action:function(e){return{icon:e._id===t?"star":function(){return o.a.createElement(St.a,null)},onClick:function(e,t){r({defaultStore:t})},position:"row",tooltip:e._id===t?"Default store":"Set as default store"}}},{action:function(e){return{icon:"edit",onClick:function(e,t){return E(t)},position:"row",tooltip:"Update store"}}},{icon:function(){return o.a.createElement(Qt.a,null)},isFreeAction:!0,onClick:function(){return E({})},position:"toolbar",tooltip:"Add store"}],options:{actionsColumnIndex:-1,paging:!1,toolbar:!0},editable:{onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),n(e),t()}))}},style:{boxShadow:"none"}}))})),an=Object(r.c)((function(e){return Object(E.a)({},e.stores)}),(function(e){return{onLoad:function(){return e({type:"STORES_PAGE_LOADED",payload:Promise.all([M.a.Stores.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"STORES_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),o.a.createElement(o.a.Fragment,null,a?o.a.createElement(nn,null):o.a.createElement(ee,null))})),rn=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)},paper:{padding:e.spacing(2),marginBottom:e.spacing(4)}}})),cn=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.settings),{},{currentUser:e.common.currentUser,settings:e.common.settings})}),(function(e){return{onSubmitForm:function(t){return e({type:"SETTINGS_SAVED",payload:Promise.all([M.a.Auth.save(t),M.a.Settings.update(t)]),snackbar:{message:"Settings saved",variant:"success"}})},onUnload:function(){return e({type:"SETTINGS_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.errors,a=e.inProgress,r=e.onSubmitForm,i=e.onUnload,l=(e.settings,rn());return Object(c.useEffect)((function(){return function(){i()}}),[]),o.a.createElement(D.c,{enableReinitialize:!0,initialValues:{firstName:t.firstName,lastName:t.lastName,password:""},validationSchema:h.d({firstName:h.e(),lastName:h.e(),password:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object(E.a)({},t)).password||delete a.password,r(a),n.resetForm({values:Object(E.a)(Object(E.a)({},a),{},{password:""})});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},o.a.createElement(D.b,null,o.a.createElement(Q,{title:"Manage Account"},o.a.createElement(w.a,{color:"primary",disabled:a,type:"sumbit",variant:"extended"},o.a.createElement($t.a,{className:l.icon}),a?"Saving...":"Save settings")),o.a.createElement(G,{errors:n}),"admin"!==t.role&&o.a.createElement(ft.a,{className:l.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(an,null)))),o.a.createElement(ft.a,{className:l.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5",gutterBottom:!0},"Account Details")),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{component:A.b,label:"First name",name:"firstName",type:"text",variant:"outlined",fullWidth:!0})),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{component:A.b,label:"Last name",name:"lastName",type:"text",variant:"outlined",fullWidth:!0})))),o.a.createElement(ft.a,{className:l.paper},o.a.createElement(T.a,{container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{variant:"h5",gutterBottom:!0},"Account Security")),o.a.createElement(T.a,{item:!0,xs:12,md:6},o.a.createElement(D.a,{component:A.b,label:"New password",name:"password",type:"password",variant:"outlined",fullWidth:!0}))))))})),on=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),null)((function(e){var t=e.currentUser;return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(se,{currentUser:t}),o.a.createElement(tt,null,o.a.createElement(m.a,null,o.a.createElement(s.d,null,o.a.createElement(Mt,{component:Gt,path:"/plans"}),o.a.createElement(Mt,{component:He,path:"/meals"}),o.a.createElement(Mt,{component:Kt,path:"/recipes"}),o.a.createElement(Mt,{component:ne,path:"/ingredients/categories"}),o.a.createElement(Mt,{component:be,path:"/ingredients"}),o.a.createElement(Mt,{component:cn,path:"/settings"}),o.a.createElement(Mt,{component:Ie,path:"/users"}),o.a.createElement(s.b,{component:nt}))),o.a.createElement(Xe,null))):o.a.createElement(s.a,{to:"/login"})})),ln=n(342),sn=n.n(ln),un=n(343),dn=n.n(un),pn=Object(b.a)((function(e){return{background:{alignItems:"center",backgroundImage:"url(".concat(dn.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},logo:{marginBottom:e.spacing(4),width:160},panel:{alignItems:"center",borderRadius:"1rem",display:"flex",flexFlow:"column nowrap",overflowY:"scroll",padding:"2rem 4rem",position:"relative"},text:{color:e.palette.primary.main,fontStyle:"italic"}}})),mn=function(e){var t=pn();return o.a.createElement(sn.a,{className:t.background},o.a.createElement(ft.a,{elevation:12,className:t.panel},o.a.createElement(ie,{className:t.logo}),o.a.createElement(K.a,{className:t.text,variant:"h4"},"Loading...")))},En=n(479),fn=n(873),bn=n(874),gn=n(480),On=n(564),yn=n.n(On),jn=Object(b.a)((function(e){return{page:{"& p:not(:last-of-type)":{marginBottom:e.spacing(2)}},profile:{borderRadius:"100%",boxShadow:e.shadows[10],float:"right",marginBottom:e.spacing(2),marginLeft:e.spacing(2),width:"120px"}}})),vn=function(){var e=jn();return o.a.createElement(T.a,{className:e.page,container:!0,spacing:2},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(K.a,{align:"center",gutterBottom:!0,variant:"h5"},"What is Plate?"),o.a.createElement("img",{className:e.profile,src:yn.a}),o.a.createElement(K.a,{variant:"body2"},"Hello, I'm Joseph May, a high school chemistry teacher from Las Vegas. While I love teaching chemistry, I also love programming for the web, so why not combine the two."),o.a.createElement(K.a,{variant:"body2"},"Plate is a web-based app I created to help my wife and I manage our meals and shopping list for each week. It allows you to create weekly meal plans from recipes you input into the system. It can then generate and push a shopping list to your iPhone or Android device."),o.a.createElement(K.a,{variant:"body2"},"While this app can support multiple users, I am running it on no-cost servers, so it was not intended to be a public program. Although, if you are interested in learning more, please reach out to me"," ",o.a.createElement(gn.a,{href:"mailto:jwmay87+plate@gmail.com"},"here"),".")))},Dn=Object(r.c)((function(e){return Object(E.a)({},e.auth)}),(function(e){return{onSubmit:function(t,n){return e({type:F,payload:M.a.Auth.login(t,n)})}}}))((function(e){return o.a.createElement(D.c,{initialValues:{username:"",password:""},validationSchema:h.d({username:h.e().required("Required"),password:h.e().required("Required")}),onSubmit:function(t){!function(t,n){e.onSubmit(t,n)}(t.username,t.password)}},o.a.createElement(D.b,null,o.a.createElement(T.a,{container:!0,spacing:4},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(G,{errors:e.errors}),o.a.createElement(D.a,{component:A.b,disabled:e.inProgress,fullWidth:!0,label:"Username",name:"username",type:"text",variant:"outlined"})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(D.a,{component:A.b,disabled:e.inProgress,fullWidth:!0,label:"Password",name:"password",type:"password",variant:"outlined"})),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(g.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},e.inProgress?"Loading...":"Login")))))})),An=Object(b.a)((function(e){return{aboutLink:{bottom:e.spacing(2),position:"absolute",right:e.spacing(4)},loginLink:{marginBottom:e.spacing(2),"& > a":{textDecoration:"none"}},logo:{display:"block",margin:"0 auto",width:120},page:Object(ue.a)({alignItems:"center",backgroundImage:"url(".concat(dn.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},e.breakpoints.up("lg"),{backgroundSize:"initial",justifyContent:"flex-end"}),panel:Object(ue.a)({borderRadius:"1rem",maxHeight:"90%",overflowY:"scroll",padding:"4rem 2rem",position:"relative",width:"80%"},e.breakpoints.up("lg"),{borderRadius:"0",height:"100%",maxHeight:"100%",width:"40%"}),progress:{height:10,left:"0",position:"absolute",top:"0",width:"100%"}}})),hn=function(){var e=An();return o.a.createElement("span",{className:e.aboutLink},o.a.createElement(Oe.a,{arrow:!0,enterTouchDelay:0,title:"Learn more"},o.a.createElement(f.a,{to:"/about"},o.a.createElement(fn.a,{color:"secondary",fontSize:"small"}))))},_n=function(){var e=An();return o.a.createElement("div",{className:e.loginLink},o.a.createElement(f.a,{to:"/login"},o.a.createElement(g.a,{color:"secondary",startIcon:o.a.createElement(bn.a,null)},"Login")))},Ln=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.auth),{},{currentUser:e.common.currentUser,pathname:e.router.location.pathname})}),(function(e){return{onUnload:function(){return e({type:"LOGIN_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.inProgress,a=e.onUnload,r=e.pathname,i=An();return Object(c.useEffect)((function(){return function(){return a()}}),[]),t?o.a.createElement(s.a,{to:"/"}):o.a.createElement(sn.a,null,o.a.createElement("div",{className:i.page},o.a.createElement(ft.a,{elevation:12,className:i.panel},n&&o.a.createElement(En.a,{className:i.progress}),o.a.createElement(T.a,{container:!0,spacing:4},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(ie,{className:i.logo})),o.a.createElement(T.a,{item:!0,xs:12},r.includes("about")?o.a.createElement(o.a.Fragment,null,o.a.createElement(_n,null),o.a.createElement(vn,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement(hn,null),o.a.createElement(Dn,null)))))))})),Pn=n(409),Sn=function(e){var t=e.snackbar,n=Object(Pn.b)().enqueueSnackbar;return Object(c.useEffect)((function(){t&&n(t.message,{variant:t.variant})}),[t]),e.children},Nn=Object(r.c)((function(e){return{snackbar:e.notifier.snackbar}}),(function(e){return{onSnackbarClose:function(){return e({type:"SNACKBAR_CLOSED"})}}}))((function(e){return o.a.createElement(Pn.a,{maxSnack:1,onClose:function(){e.onSnackbarClose()}},o.a.createElement(Sn,{snackbar:e.snackbar},e.children))})),Tn=n(176),Cn=n(472),wn=n(207),Rn=Object(Tn.b)({breakpoints:{values:{md:768,lg:1024}},palette:{primary:{main:Cn.a[400]},secondary:{main:wn.a[200]}},overrides:{MuiDialogActions:{root:{padding:"16px 24px"}},MUIRichTextEditor:{placeHolder:{position:"relative"},toolbar:{"& button.MuiIconButton-colorPrimary":{color:wn.a[200]}},editor:{"& li":{borderBottom:"1px solid #ccc",marginBottom:"32px",paddingBottom:"16px"}}}}}),In=n(57),kn=n(565),Un=n(100),xn=(n(816),n(544)),Gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:if(t.subtype===F||"REGISTER"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0});break;case F:case"REGISTER":return Object(E.a)(Object(E.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return{};default:return e}return e},Mn={errors:null,categories:[],inProgress:!1,pageLoaded:!1},Vn=function(e,t){return e.name.localeCompare(t.name)},Fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:[].concat(Object(B.a)(e.categories),[t.payload.category]).sort((function(e,t){return Vn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_CATEGORY"===t.subtype||"UPDATE_CATEGORY"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("CATEGORIES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.filter((function(e){return e.slug!==t.payload.category.slug}))});case"DELETE_CATEGORIES":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.filter((function(e){return!t.payload.categories.includes(e.slug)}))});case"CATEGORY_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"CATEGORIES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,categories:t.error?[]:t.payload.categories,inProgress:!1,pageLoaded:!0});case"CATEGORIES_PAGE_UNLOADED":case"INGREDIENTS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":case"STORES_PAGE_UNLOADED":return Mn;case"INGREDIENTS_PAGE_LOADED":case"STORES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[1].categories});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[4].categories});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[2].categories});case"UPDATE_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.map((function(e){return e._id===t.payload.category._id?t.payload.category:e})).sort((function(e,t){return Vn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},Wn={token:null,viewChangeCounter:0},qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOAD":return Object(E.a)(Object(E.a)({},e),{},{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null,settings:t.payload?t.payload.settings:null});case"LOGOUT":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:"/login",token:null,currentUser:null});case F:case"REGISTER":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:t.error?null:"admin"===t.payload.user.role?"/users":"/plans",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user,settings:t.error?null:t.payload.settings});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":case"SETTINGS_PAGE_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewChangeCounter:e.viewChangeCounter+1});case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:t.redirectTo});case"REDIRECT":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:null});case"SET_DEFAULT_STORE":case"SET_STARRED_PLAN":return Object(E.a)(Object(E.a)({},e),{},{settings:t.error?e.settings:t.payload.settings});case"SETTINGS_SAVED":return Object(E.a)(Object(E.a)({},e),{},{currentUser:t.error?e.currentUser:t.payload[0].user,settings:t.error?e.settings:t.payload[1].settings});default:return e}},Bn={errors:null,ingredients:[],inProgress:!1,pageLoaded:!1},Hn=function(e,t){return e.name.localeCompare(t.name)},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:[].concat(Object(B.a)(e.ingredients),[t.payload.ingredient]).sort((function(e,t){return Hn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_INGREDIENT"===t.subtype||"UPDATE_INGREDIENT"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("INGREDIENTS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.filter((function(e){return e.slug!==t.payload.ingredient.slug}))});case"DELETE_INGREDIENTS":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.filter((function(e){return!t.payload.ingredients.includes(e.slug)}))});case"INGREDIENT_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"INGREDIENTS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,ingredients:t.error?[]:t.payload[0].ingredients,inProgress:!1,pageLoaded:!0});case"INGREDIENTS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return Bn;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?[]:t.payload[3].ingredients});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?[]:t.payload[1].ingredients});case"UPDATE_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.map((function(e){return e._id===t.payload.ingredient._id?t.payload.ingredient:e})).sort((function(e,t){return Hn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},Yn={editor:{meal:null},errors:null,inProgress:!1,meals:[],pageLoaded:!1},Jn=function(e,t){return e.title.localeCompare(t.title)},Kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MEAL":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?e.meals:[].concat(Object(B.a)(e.meals),[t.payload.meal]).sort((function(e,t){return Jn(e,t)}))});case V:if("ADD_MEAL"===t.subtype||"UPDATE_MEAL"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("MEALS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_MEAL":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?e.meals:e.meals.filter((function(e){return e.slug!==t.payload.meal.slug}))});case"DELETE_MEALS":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?e.meals:e.meals.filter((function(e){return!t.payload.meals.includes(e.slug)}))});case"MEAL_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{meal:t.meal})});case"MEAL_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{meal:null}),errors:null});case"MEALS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?[]:t.payload[0].meals,pageLoaded:!0});case"MEALS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return Yn;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?[]:t.payload[1].meals});case"UPDATE_MEAL":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?e.meals:e.meals.map((function(e){return e._id===t.payload.meal._id?t.payload.meal:e})).sort((function(e,t){return Jn(e,t)}))});default:return e}return e},$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(E.a)(Object(E.a)({},e),{},{navTabValue:t.value});case"NAV_UNLOADED":return{};default:return e}},Qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY":case"ADD_INGREDIENT":case"ADD_MEAL":case"ADD_PLAN":case"ADD_RECIPE":case"ADD_STORE":case"ADD_USER":case"DELETE_CATEGORY":case"DELETE_CATEGORIES":case"DELETE_INGREDIENT":case"DELETE_INGREDIENTS":case"DELETE_MEAL":case"DELETE_MEALS":case"DELETE_PLAN":case"DELETE_RECIPE":case"DELETE_RECIPES":case"DELETE_STORE":case"DELETE_USER":case"PLAN_LIST_COPIED":case"SET_DEFAULT_STORE":case"SET_STARRED_PLAN":case"SETTINGS_SAVED":case"UPDATE_CATEGORY":case"UPDATE_INGREDIENT":case"UPDATE_MEAL":case"UPDATE_PLAN":case"UPDATE_PLAN_ARCHIVE_STATUS":case"UPDATE_RECIPE":case"UPDATE_STORE":case"UPDATE_USER":return Object(E.a)(Object(E.a)({},e),{},{snackbar:t.error?null:t.snackbar});case"SNACKBAR_CLOSED":return Object(E.a)(Object(E.a)({},e),{},{snackbar:null});default:return e}},Zn={editor:{plan:null},errors:null,inProgress:!1,pageLoaded:!1,plans:[],viewer:{plan:null,type:null}},Xn=function(e,t){return e.title.localeCompare(t.title)},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:[].concat(Object(B.a)(e.plans),[t.payload.plan]).sort((function(e,t){return Xn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_PLAN"===t.subtype||"UPDATE_PLAN"===t.subtype||"UPDATE_PLAN_ARCHIVE_STATUS"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("PLANS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.filter((function(e){return e.slug!==t.payload.plan.slug}))});case"DELETE_PLANS":var n=t.payload.plans.map((function(e){return e._id}));return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.filter((function(e){return!n.includes(e._id)}))});case"PLAN_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{plan:t.plan})});case"PLAN_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{plan:null}),errors:null});case"PLAN_LIST_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:t.plan,type:"list"})});case"PLAN_LIST_DIALOG_UNLOADED":case"PLAN_VIEW_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:null,type:null})});case"PLAN_VIEW_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:t.plan,type:"plan"})});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{pageLoaded:!0,plans:t.payload[0].plans});case"PLANS_PAGE_UNLOADED":return Zn;case"UPDATE_PLAN":case"UPDATE_PLAN_ARCHIVE_STATUS":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.map((function(e){return e._id===t.payload.plan._id?t.payload.plan:e})).sort((function(e,t){return Xn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},ta={editor:{recipe:null,ingredient:null},errors:null,recipes:[],inProgress:!1,pageLoaded:!1,viewer:{recipe:null}},na=function(e,t){return e.title.localeCompare(t.title)},aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{ingredient:t.payload.ingredient})});case"ADD_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:[].concat(Object(B.a)(e.recipes),[t.payload.recipe]).sort((function(e,t){return na(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_RECIPE"===t.subtype||"UPDATE_RECIPE"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("RECIPES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:e.recipes.filter((function(e){return e.slug!==t.payload.recipe.slug}))});case"DELETE_RECIPES":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:e.recipes.filter((function(e){return!t.payload.recipes.includes(e.slug)}))});case"MEALS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?[]:t.payload[1].recipes});case"MEALS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":return ta;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?[]:t.payload[2].recipes});case"RECIPE_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:t.recipe})});case"RECIPE_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:null,ingredient:null}),errors:null});case"RECIPE_INGREDIENT_ONBLUR":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{ingredient:null})});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,recipes:t.error?[]:t.payload[0].recipes,inProgress:!1,pageLoaded:!0});case"RECIPE_VIEW_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{recipe:t.recipe})});case"RECIPE_VIEW_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{recipe:null})});case"UPDATE_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:null}),errors:t.error?t.payload.errors:null,inProgress:!1,recipes:t.error?e.recipes:e.recipes.map((function(e){return e._id===t.payload.recipe._id?t.payload.recipe:e})).sort((function(e,t){return na(e,t)}))});default:return e}return e},ra={errors:null,inProgress:!1},ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:if("SETTINGS_SAVED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0});break;case"SETTINGS_PAGE_UNLOADED":return ra;case"SETTINGS_SAVED":return Object(E.a)(Object(E.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});default:return e}return e},oa={editor:{store:null},errors:null,inProgress:!1,pageLoaded:!1,stores:[]},ia=function(e,t){return e.name.localeCompare(t.name)},la=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:[].concat(Object(B.a)(e.stores),[t.payload.store]).sort((function(e,t){return ia(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_STORE"===t.subtype||"UPDATE_STORE"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("STORES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:e.stores.filter((function(e){return e.slug!==t.payload.store.slug}))});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?[]:t.payload[5].stores});case"STORE_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{store:t.store})});case"STORE_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{store:null}),errors:null});case"STORES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{pageLoaded:!0,stores:t.payload[0].stores});case"STORES_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return oa;case"UPDATE_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:e.stores.map((function(e){return e._id===t.payload.store._id?t.payload.store:e})).sort((function(e,t){return ia(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},sa={errors:null,inProgress:!1,users:[]},ua=function(e,t){return e.lastName.localeCompare(t.lastName)},da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,users:t.error?e.users:[].concat(Object(B.a)(e.users),[t.payload.user]).sort((function(e,t){return ua(e,t)}))});case V:if("ADD_USER"===t.subtype||"UPDATE_USER"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0,errors:null});break;case"DELETE_USER":return Object(E.a)(Object(E.a)({},e),{},{users:t.error?e.users:e.users.filter((function(e){return e.username!==t.payload.user.username}))});case"MANAGE_USERS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{users:t.payload.users});case"MANAGE_USERS_PAGE_UNLOADED":return sa;case"USER_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"UPDATE_USER":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,users:t.error?e.users:e.users.map((function(e){return e.username===t.payload.user.username?t.payload.user:e})).sort((function(e,t){return ua(e,t)}))});default:return e}return e},pa=function(e){return function(t){return function(n){if((c=n.payload)&&"function"===typeof c.then){e.dispatch({type:V,subtype:n.type});var a=e.getState().viewChangeCounter,r=n.skipTracking;n.payload.then((function(t){var c=e.getState();(r||c.viewChangeCounter===a)&&(n.payload=t,e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}),(function(t){var c=e.getState();(r||c.viewChangeCounter===a)&&(n.error=!0,n.payload=t.response.body,n.skipTracking||e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}))}else{var c;t(n)}}}},ma=function(e){return function(e){return function(t){"REGISTER"===t.type||t.type===F?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),M.a.setToken(t.payload.user.token)):"LOGOUT"===t.type&&(window.localStorage.setItem("jwt",""),M.a.setToken(null)),e(t)}}};var Ea,fa=Object(Un.a)(),ba=Object(xn.a)(fa),ga=Object(In.createStore)((Ea=fa,Object(In.combineReducers)({auth:Gn,categories:Fn,common:qn,ingredients:zn,meals:Kn,nav:$n,notifier:Qn,plans:ea,recipes:aa,settings:ca,stores:la,users:da,router:Object(a.b)(Ea)})),Object(kn.composeWithDevTools)(Object(In.applyMiddleware)(ba,pa,ma))),Oa=Object(r.c)((function(e){return{appLoaded:e.common.appLoaded,redirectTo:e.common.redirectTo}}),(function(e){return{onLoad:function(t,n){return e({type:"APP_LOAD",payload:t,token:n,skipTracking:!0})},onRedirect:function(){return e({type:"REDIRECT"})}}}))((function(e){var t=e.appLoaded,n=e.redirectTo;return Object(c.useEffect)((function(){n&&(ga.dispatch(Object(u.d)(n)),e.onRedirect())}),[n]),Object(c.useEffect)((function(){var t=window.localStorage.getItem("jwt");t&&M.a.setToken(t),e.onLoad(t?M.a.Auth.current():null,t)}),[]),t?o.a.createElement(d.a,{theme:Rn},o.a.createElement(p.a,null),o.a.createElement(Nn,null,o.a.createElement(c.Suspense,{fallback:o.a.createElement("p",null,"Loading...")},o.a.createElement(s.d,null,o.a.createElement(s.b,{exact:!0,path:"/login",component:Ln}),o.a.createElement(s.b,{exact:!0,path:"/about",component:Ln}),o.a.createElement(s.b,{path:"/",component:on}))))):o.a.createElement(d.a,{theme:Rn},o.a.createElement(p.a,null),o.a.createElement(mn,null))}));l.a.render(o.a.createElement(r.a,{store:ga},o.a.createElement(a.a,{history:fa},o.a.createElement(s.d,null,o.a.createElement(s.b,{path:"/",component:Oa})))),document.getElementById("root"))}},[[578,1,2]]]);
//# sourceMappingURL=main.2431fb76.chunk.js.map