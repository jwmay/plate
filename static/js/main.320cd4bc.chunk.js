(this.webpackJsonpplate=this.webpackJsonpplate||[]).push([[0],{10:function(e,t,n){"use strict";(function(e){var a=n(472),r=n.n(a),c=n(473),i=n.n(c),o=r()(i.a,e.Promise),l="https://my-plate-app.herokuapp.com/api",s=function(e){return e.body},u=null,d=function(e){u&&e.set("authorization","Token ".concat(u))},p=function(e,t){return o.del("".concat(l).concat(e),t).use(d).then(s)},m=function(e){return o.get("".concat(l).concat(e)).use(d).then(s)},E=function(e,t){return o.post("".concat(l).concat(e),t).use(d).then(s)},f=function(e,t){return o.put("".concat(l).concat(e),t).use(d).then(s)},b={current:function(){return m("/user")},login:function(e,t){return E("/users/login",{user:{username:e,password:t}})},register:function(e){return E("/users",{user:e})},save:function(e){return f("/user",{user:e})}},g={add:function(e){return E("/categories",{category:e})},delete:function(e){return p("/categories/".concat(e.slug))},deleteMany:function(e){return p("/categories/bulk",{categories:e})},getAll:function(){return m("/categories")},update:function(e){return f("/categories/".concat(e.slug),{category:e})}},O={add:function(e){return E("/ingredients",{ingredient:e})},delete:function(e){return p("/ingredients/".concat(e.slug))},deleteMany:function(e){return p("/ingredients/bulk",{ingredients:e})},getAll:function(){return m("/ingredients")},update:function(e){return f("/ingredients/".concat(e.slug),{ingredient:e})}},y={add:function(e){return E("/meals",{meal:e})},delete:function(e){return p("/meals/".concat(e.slug))},deleteMany:function(e){return p("/meals/bulk",{meals:e})},getAll:function(){return m("/meals")},update:function(e){return f("/meals/".concat(e.slug),{meal:e})}},j={add:function(e){return E("/plans",{plan:e})},delete:function(e){return p("/plans/".concat(e.slug))},getAll:function(){return m("/plans")},update:function(e){return f("/plans/".concat(e.slug),{plan:e})}},v={add:function(e){return E("/recipes",{recipe:e})},delete:function(e){return p("/recipes/".concat(e.slug))},deleteMany:function(e){return p("/recipes/bulk",{recipes:e})},getAll:function(){return m("/recipes")},update:function(e){return f("/recipes/".concat(e.slug),{recipe:e})}},D={update:function(e){return f("/user/settings",{settings:e})}},A={add:function(e){return E("/stores",{store:e})},delete:function(e){return p("/stores/".concat(e.slug))},getAll:function(){return m("/stores")},update:function(e){return f("/stores/".concat(e.slug),{store:e})}},h={getAll:function(){return m("/users?role=subscriber")},delete:function(e){return p("/users/subscriber/".concat(e.username))},update:function(e){return f("/users/".concat(e.username),{user:e})}};t.a={Auth:b,Categories:g,Ingredients:O,Meals:y,Plans:j,Recipes:v,Settings:D,Stores:A,Users:h,setToken:function(e){u=e}}}).call(this,n(93))},283:function(e,t,n){e.exports=n.p+"static/media/plate-background.c6d96dd4.png"},475:function(e,t,n){e.exports=n.p+"static/media/plate-logo.1dcb2d72.png"},478:function(e,t,n){e.exports=n.p+"static/media/doc-may-profile.f927335d.jpg"},493:function(e,t,n){e.exports=n(682)},682:function(e,t,n){"use strict";n.r(t);var a=n(160),r=n(11),c=n(0),i=n.n(c),o=n(23),l=n.n(o),s=n(38),u=n(61),d=n(712),p=n(720),m=n(719),E=n(3),f=n(95),b=n(331),g=n(332),O=n(40),y=n.n(O),j=n(62),v=n(13),D=n(16),A=n(25),h=n(21),_=n(26),L=n(690),P=n(708),S=n(709),N=n(710),T=n(400),C=n(711),w=n(706),R=n(707),I=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),U=function(e){var t,n=I();return i.a.createElement(w.a,Object.assign({color:"primary",onClick:e.onClick,variant:"extended"},e),i.a.createElement(R.a,{className:n.icon}),null!==(t=e.prefix)&&void 0!==t?t:"Add"," ",e.item)},k=n(739),x=Object(b.a)((function(e){return{alert:{width:"100%","&:not(:last-of-type)":{marginBottom:e.spacing(1)}},alertList:{marginBottom:e.spacing(2)}}})),G=function(e){var t=e.errors,n=x();return t?i.a.createElement("div",{className:n.alertList},Object.keys(t).map((function(e){var a=e.replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase();return i.a.createElement(k.a,{className:n.alert,severity:"error",key:e},a," ",t[e])}))):null},M=n(10),V="ASYNC_START",F="LOGIN",W=Object(b.a)((function(e){return{addIcon:{marginRight:e.spacing(1)}}})),q=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onAdd:function(t){return e({type:"ADD_CATEGORY",payload:M.a.Categories.add(t),snackbar:{message:"Category added",variant:"success"}})},onExit:function(){return e({type:"CATEGORY_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_CATEGORY",payload:M.a.Categories.update(t),snackbar:{message:"Category updated",variant:"success"}})}}}))((function(e){var t=e.errors,n=e.category,a=e.inProgress,r=e.onAdd,o=e.onExit,l=e.onUpdate,s=Object(c.useState)(!1),u=Object(v.a)(s,2),d=u[0],p=u[1],m=Object(_.a)(),f=Object(L.a)(m.breakpoints.down("md")),b=(W(),function(){p(!1)}),O=function(e){r(Object(E.a)({},e))},w=function(e){l(Object(E.a)(Object(E.a)({},n),e))};return Object(c.useEffect)((function(){a||t||p(!1)}),[a]),i.a.createElement(i.a.Fragment,null,i.a.createElement(U,{item:"category",onClick:function(){p(!0)}}),i.a.createElement(P.a,{fullScreen:f,maxWidth:"lg",onClick:function(e){return e.stopPropagation()},onClose:b,onFocus:function(e){return e.stopPropagation()},open:d,TransitionProps:{onExit:o}},i.a.createElement(D.c,{initialValues:{name:(null===n||void 0===n?void 0:n.name)||"",notes:(null===n||void 0===n?void 0:n.notes)||""},validationSchema:h.d({name:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?w(t):O(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},i.a.createElement(D.b,null,i.a.createElement(S.a,null,n?"Edit category":"Add category"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:t}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{autoFocus:!0,color:"primary",component:A.b,disabled:a,label:"Category Name",name:"name",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{color:"primary",component:A.b,disabled:a,label:"Category Notes",name:"notes",type:"text",fullWidth:!0})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{disabled:a,color:"primary",type:"submit",variant:"contained"},n?a?"Updating...":"Update":a?"Adding...":"Add"),i.a.createElement(g.a,{disabled:a,onClick:b,variant:"contained"},"Cancel"))))))})),B=n(17),H=n(76),z=n.n(H),Y=function(e){return i.a.createElement(z.a,Object.assign({components:{EditRow:function(e){return i.a.createElement(H.MTableEditRow,Object.assign({},e,{onKeyDown:function(t){27===t.keyCode&&e.onEditingCanceled(e.mode,e.data)}}))}}},e))},J=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onDelete:function(t){return e({type:"DELETE_CATEGORY",payload:M.a.Categories.delete(t),snackbar:{message:"Category deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_CATEGORIES",payload:M.a.Categories.deleteMany(t),snackbar:{message:"".concat(t.length," categor").concat(t.length>1?"ies":"y"," deleted"),variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_CATEGORY",payload:M.a.Categories.update(t),snackbar:{message:"Category updated",variant:"success"}})}}}))((function(e){var t=e.categories,n=e.onDelete,a=e.onDeleteMany,r=e.onUpdate,o=Object(c.useState)([]),l=Object(v.a)(o,2),s=l[0],u=l[1],d=Object(c.useState)([{title:"Name",field:"name"},{title:"Notes",field:"notes"}]),p=Object(v.a)(d,1)[0];return Object(c.useEffect)((function(){u(t)}),[t]),i.a.createElement(Y,{title:"Categories",columns:p,data:s,localization:{body:{emptyDataSourceMessage:"No categories found",editRow:{deleteText:"Delete category? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{tooltip:"Delete all selected categories",icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));a(t)}(t)}}],editable:{onRowUpdate:function(e,t){return new Promise((function(n,a){var c=Object(B.a)(s);c[t.tableData.id]=e,u(Object(B.a)(c)),r(e),n()}))},onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(s),c=e.tableData.id;r.splice(c,1),u(Object(B.a)(r)),n(e),t()}))}}})})),K=n(150),$=Object(b.a)((function(e){return{headerLeft:{alignItems:"center",display:"flex"},headerRight:{alignItems:"center",display:"flex",justifyContent:"flex-end"},pageHeader:{marginBottom:e.spacing(4)}}})),Q=function(e){var t=e.children,n=e.title,a=$();return i.a.createElement(T.a,{container:!0,spacing:2,className:a.pageHeader},i.a.createElement(T.a,{item:!0,xs:12,md:6,className:a.headerLeft},i.a.createElement(K.a,{variant:"h4"},n)),i.a.createElement(T.a,{item:!0,xs:12,md:6,className:a.headerRight},t))},Z=n(403),X=Object(b.a)((function(e){return{message:{fontStyle:"italic"},root:{alignItems:"center",display:"flex",justifyContent:"center",minWidth:e.spacing(40)},spinner:{marginRight:e.spacing(2)}}})),ee=function(e){var t=e.message,n=X();return i.a.createElement("div",{className:n.root},i.a.createElement(Z.a,{className:n.spinner}),i.a.createElement(K.a,{className:n.message},t||"Loading..."))},te=Object(b.a)((function(e){return{button:{marginRight:e.spacing(2),"& a":{color:"inherit",textDecoration:"none"}}}})),ne=Object(r.c)((function(e){return Object(E.a)({},e.categories)}),(function(e){return{onLoad:function(){return e({type:"CATEGORIES_PAGE_LOADED",payload:M.a.Categories.getAll()})},onUnload:function(){return e({type:"CATEGORIES_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded,r=te();return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Q,{title:"Manage Categories"},i.a.createElement(g.a,{className:r.button,color:"secondary"},i.a.createElement(f.a,{to:"/ingredients"},"Manage ingredients")),i.a.createElement(q,null)),a?i.a.createElement(J,null):i.a.createElement(ee,null))})),ae=n(716),re=n(413),ce=n(475),ie=n.n(ce),oe=function(e){return i.a.createElement("img",Object.assign({alt:"Chem Cash Logo",src:ie.a},e))},le=Object(b.a)((function(e){return{title:{color:"white",flexGrow:1},logo:{height:65,marginTop:e.spacing(2),marginRight:e.spacing(3),marginBottom:e.spacing(2)}}})),se=Object(r.c)((function(e){return{navTabValue:e.nav.navTabValue}}),(function(e){return{onClickLogout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=le(),n=e.navTabValue;return e.currentUser?i.a.createElement(ae.a,{position:"static"},i.a.createElement(m.a,null,i.a.createElement(re.a,null,i.a.createElement(oe,{className:t.logo}),i.a.createElement(K.a,{variant:"h5",align:"center",className:t.title},n&&n.charAt(0).toUpperCase()+n.slice(1)),i.a.createElement(g.a,{color:"inherit",onClick:e.onClickLogout},"Logout")))):null})),ue=n(77),de=n(408),pe=Object(b.a)((function(e){return{paper:Object(ue.a)({},e.breakpoints.up("lg"),{maxWidth:"420px"})}})),me=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.ingredients),{},{categories:e.categories.categories})}),(function(e){return{onAdd:function(t){return e({type:"ADD_INGREDIENT",payload:M.a.Ingredients.add(t),snackbar:{message:"Ingredient added",variant:"success"}})},onExit:function(){return e({type:"INGREDIENT_DIALOG_UNLOADED"})}}}))((function(e){var t=e.categories,n=e.errors,a=e.hideButton,r=e.ingredient,o=e.inProgress,l=e.isOpen,s=e.onAdd,u=e.onClose,d=e.onExit,p=Object(c.useState)(!1),m=Object(v.a)(p,2),f=m[0],b=m[1],O=Object(_.a)(),w=Object(L.a)(O.breakpoints.down("md")),R=pe(),I=function(){b(!1)},k=function(e){s(Object(E.a)({},e))};return Object(c.useEffect)((function(){o||n||b(!1)}),[o]),Object(c.useEffect)((function(){b(!!l)}),[l]),i.a.createElement(i.a.Fragment,null,!a&&i.a.createElement(U,{item:"ingredient",onClick:function(){b(!0)}}),i.a.createElement(P.a,{classes:{paper:R.paper},fullScreen:w,fullWidth:!0,onClick:function(e){return e.stopPropagation()},onClose:I,onFocus:function(e){return e.stopPropagation()},open:f,TransitionProps:{onExit:function(){d(),u&&u()}}},i.a.createElement(D.c,{initialValues:{category:(null===r||void 0===r?void 0:r.category)||"",name:(null===r||void 0===r?void 0:r.name)||"",notes:(null===r||void 0===r?void 0:r.notes)||""},validationSchema:h.d({category:h.e().required("Required"),name:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},i.a.createElement(D.b,null,i.a.createElement(S.a,null,"Add ingredient"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:n}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{autoFocus:!0,color:"primary",component:A.b,disabled:o,id:"name",label:"Ingredient Name",name:"name",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{color:"primary",component:A.b,disabled:o,id:"category",label:"Ingredient Category",name:"category",type:"select",select:!0,fullWidth:!0},t.map((function(e){return i.a.createElement(de.a,{key:e._id,value:e._id},e.name)})))),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{color:"primary",component:A.b,disabled:o,id:"notes",label:"Ingredient Notes",name:"notes",type:"text",fullWidth:!0})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{disabled:o,color:"primary",type:"submit",variant:"contained"},o?"Adding...":"Add"),i.a.createElement(g.a,{disabled:o,onClick:I,variant:"contained"},"Cancel"))))))})),Ee=Object(r.c)((function(e){return{categories:e.categories.categories,ingredients:e.ingredients.ingredients}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_INGREDIENT",payload:M.a.Ingredients.delete(t),snackbar:{message:"Ingredient deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_INGREDIENTS",payload:M.a.Ingredients.deleteMany(t),snackbar:{message:"".concat(t.length," ingredient").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_INGREDIENT",payload:M.a.Ingredients.update(t),snackbar:{message:"Ingredient updated",variant:"success"}})}}}))((function(e){var t=e.categories,n=e.ingredients,a=e.onDelete,r=e.onDeleteMany,o=e.onUpdate,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([{title:"Name",field:"name"},{title:"Category",field:"category",lookup:t.reduce((function(e,t){return e[t._id]=t.name,e}),{})},{title:"Notes",field:"notes"}]),m=Object(v.a)(p,1)[0];return Object(c.useEffect)((function(){d(n)}),[n]),i.a.createElement(Y,{title:"Ingredients",columns:m,data:u,localization:{body:{emptyDataSourceMessage:"No ingredients found",editRow:{deleteText:"Delete ingredient? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{tooltip:"Delete all selected ingredients",icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));r(t)}(t)}}],editable:{onRowUpdate:function(e,t){return new Promise((function(n,a){var r=Object(B.a)(u);r[t.tableData.id]=e,d(Object(B.a)(r)),o(e),n()}))},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),a(e),t()}))}}})})),fe=Object(b.a)((function(e){return{button:{marginRight:e.spacing(2),"& a":{color:"inherit",textDecoration:"none"}}}})),be=Object(r.c)((function(e){return Object(E.a)({},e.ingredients)}),(function(e){return{onLoad:function(){return e({type:"INGREDIENTS_PAGE_LOADED",payload:Promise.all([M.a.Ingredients.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"INGREDIENTS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded,r=fe();return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Q,{title:"Manage Ingredients"},i.a.createElement(g.a,{className:r.button,color:"secondary"},i.a.createElement(f.a,{to:"/ingredients/categories"},"Manage categories")),i.a.createElement(me,null)),a?i.a.createElement(Ee,null):i.a.createElement(ee,null))})),ge=n(725),Oe=n(415),ye=n(272),je=Object(b.a)((function(e){return{actionButton:{color:e.palette.text.disabled}}})),ve=function(e){var t=je(),n=e.className||"";return i.a.createElement(Oe.a,{arrow:!0,enterTouchDelay:0,title:e.action},i.a.createElement(ye.a,{"aria-label":e.action,className:"".concat(t.actionButton," ").concat(n),onClick:function(t){t.stopPropagation(),e.onClick()},onFocus:function(e){return e.stopPropagation()},size:e.size},e.children))},De=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),Ae=Object(r.c)((function(e){return Object(E.a)({},e.users)}),(function(e){return{onAdd:function(t){return e({type:"ADD_USER",payload:M.a.Auth.register(t),snackbar:{message:"User added",variant:"success"}})},onExit:function(){return e({type:"USER_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_USER",payload:M.a.Users.update(t),snackbar:{message:"User updated",variant:"success"}})}}}))((function(e){var t=e.errors,n=e.inProgress,a=e.onAdd,r=e.onExit,o=e.onUpdate,l=e.user,s=Object(c.useState)(!1),u=Object(v.a)(s,2),d=u[0],p=u[1],m=Object(_.a)(),f=Object(L.a)(m.breakpoints.down("md")),b=De(),O=function(){p(!0)},I=function(){p(!1)},U=function(e){a(Object(E.a)(Object(E.a)({},e),{},{role:"subscriber"}))},k=function(e){o(Object(E.a)(Object(E.a)({},l),e))};return Object(c.useEffect)((function(){n||t||p(!1)}),[n]),i.a.createElement(i.a.Fragment,null,l?i.a.createElement(ve,{action:"Edit user",onClick:O},i.a.createElement(ge.a,null)):i.a.createElement(w.a,{color:"primary",onClick:O,variant:"extended"},i.a.createElement(R.a,{className:b.icon}),"Add user"),i.a.createElement(P.a,{fullScreen:f,open:d,onClose:I,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},TransitionProps:{onExit:r}},i.a.createElement(D.c,{initialValues:{firstName:(null===l||void 0===l?void 0:l.firstName)||"",lastName:(null===l||void 0===l?void 0:l.lastName)||"",username:(null===l||void 0===l?void 0:l.username)||"",password:""},validationSchema:h.d({firstName:h.e().required("Required"),lastName:h.e().required("Required"),username:h.e().required("Required"),password:h.e().required(l?"":"Required")}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l?k(t):U(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},i.a.createElement(D.b,null,i.a.createElement(S.a,null,l?"Edit User":"Add User"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:t}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(D.a,{autoFocus:!l,color:"primary",component:A.b,disabled:n,label:"First Name",name:"firstName",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(D.a,{color:"primary",component:A.b,disabled:n,label:"Last Name",name:"lastName",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(D.a,{color:"primary",component:A.b,disabled:!!l||n,label:"Username",name:"username",type:"text",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(D.a,{color:"primary",component:A.b,disabled:n,label:"Password",name:"password",type:"text",fullWidth:!0})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:n,type:"submit",variant:"contained"},l?n?"Updating...":"Update":n?"Adding...":"Add"),i.a.createElement(g.a,{disabled:n,onClick:I,variant:"contained"},"Cancel"))))))})),he=n(713),_e=n(715),Le=n(465),Pe=n(714),Se=n(727),Ne=n(721),Te=n(726),Ce=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_USER",payload:M.a.Users.delete(t),snackbar:{message:"User deleted",variant:"success"}})}}}))((function(e){var t=e.onDelete,n=e.user,a=Object(c.useState)(!1),r=Object(v.a)(a,2),o=r[0],l=r[1],s=function(){l(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ve,{action:"Delete user",onClick:function(){l(!0)}},i.a.createElement(Te.a,null)),i.a.createElement(P.a,{open:o,onClick:function(e){return e.stopPropagation()},onClose:s,onFocus:function(e){return e.stopPropagation()}},i.a.createElement(S.a,null,"Delete User"),i.a.createElement(N.a,null,i.a.createElement(Ne.a,{component:"div"},"Are you sure you want to delete"," ",i.a.createElement("b",null,n.firstName," ",n.lastName),"? This action will permanently delete:",i.a.createElement("ul",null,i.a.createElement("li",null,"all categories"),i.a.createElement("li",null,"all ingredients"),i.a.createElement("li",null,"all meals"),i.a.createElement("li",null,"all plans"),i.a.createElement("li",null,"all recipes"),i.a.createElement("li",null,"all settings"),i.a.createElement("li",null,"all stores")),"associated with this user. This action ",i.a.createElement("b",null,"cannot be undone"),".")),i.a.createElement(C.a,null,i.a.createElement(g.a,{onClick:function(){l(!1),t(n)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),i.a.createElement(g.a,{onClick:s,variant:"contained"},"Cancel"))))})),we=Object(b.a)((function(e){return{userDetails:{display:"block"},userHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},userUsername:{marginRight:e.spacing(2),minWidth:e.spacing(12)},userName:{flexGrow:"1"}}})),Re=function(e){var t=e.users,n=Object(c.useState)(!1),a=Object(v.a)(n,2),r=a[0],o=a[1],l=we();return i.a.createElement(i.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return i.a.createElement(he.a,{expanded:r===e.username,key:e.username,onChange:(t=e.username,function(e,n){o(!!n&&t)})},i.a.createElement(_e.a,{expandIcon:i.a.createElement(Se.a,null)},i.a.createElement("div",{className:l.userHeader},i.a.createElement(Le.a,{color:"secondary",label:e.username,className:l.userUsername}),i.a.createElement(K.a,{className:l.userName,variant:"h5"},e.firstName," ",e.lastName),i.a.createElement(Ae,{user:e}),i.a.createElement(Ce,{user:e}))),i.a.createElement(Pe.a,{className:l.userDetails},i.a.createElement(K.a,{variant:"h6"},"Account Details"),i.a.createElement(K.a,null,i.a.createElement("em",null,"Coming soon!"))));var t})):i.a.createElement(K.a,null,"No users found"))},Ie=Object(r.c)((function(e){return Object(E.a)({},e.users)}),(function(e){return{onLoad:function(){return e({type:"MANAGE_USERS_PAGE_LOADED",payload:M.a.Users.getAll()})},onUnload:function(){return e({type:"MANAGE_USERS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.users;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Q,{title:"Manage Users"},i.a.createElement(Ae,null)),i.a.createElement(Re,{users:a}))})),Ue=n(742),ke=n(325),xe=n(181),Ge=n.n(xe),Me=n(182),Ve=n.n(Me),Fe=function(e){var t=e.name,n=e.onChange,a=e.recipes,r=e.values,o=Object(c.useState)([]),l=Object(v.a)(o,2),s=l[0],u=l[1],d=a.filter((function(e){return!1===e.isMeal})).map((function(e){var t=e.title[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)}));return Object(c.useEffect)((function(){u(d)}),[a]),i.a.createElement(Ue.a,{autoHighlight:!0,autoSelect:!0,getOptionLabel:function(e){return e.title},getOptionSelected:function(e,t){return e._id===t._id},groupBy:function(e){return e.firstLetter},multiple:!0,noOptionsText:"No recipes have been created",onChange:function(e,a){n(t,a)},options:s,renderInput:function(e){return i.a.createElement(ke.a,Object.assign({},e,{label:"Recipes",variant:"outlined"}))},renderOption:function(e,t){var n=t.inputValue,a=Ve()(e.title,n),r=Ge()(e.title,a);return i.a.createElement("div",null,r.map((function(e,t){return i.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))},value:r})},We=["","Breakfast","Lunch","Dinner","Snack","Other"],qe=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.meals),{},{recipes:e.recipes.recipes})}),(function(e){return{onAdd:function(t){return e({type:"ADD_MEAL",payload:M.a.Meals.add(t),snackbar:{message:"Meal added",variant:"success"}})},onExit:function(){return e({type:"MEAL_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_MEAL",payload:M.a.Meals.update(t),snackbar:{message:"Meal updated",variant:"success"}})}}}))((function(e){var t,n,a,r,o=e.editor,l=e.errors,s=e.inProgress,u=e.onAdd,d=e.onExit,p=e.onUpdate,m=e.recipes,f=Object(_.a)(),b=Object(L.a)(f.breakpoints.down("md")),O=Object(c.useState)(!1),w=Object(v.a)(O,2),R=w[0],I=w[1],k=function(){I(!1)},x=function(e){u(Object(E.a)({},e))},M=function(e){p(Object(E.a)(Object(E.a)({},o.meal),e))};return Object(c.useEffect)((function(){s||l||I(!1)}),[s]),Object(c.useEffect)((function(){I(!!o.meal)}),[o.meal]),i.a.createElement(i.a.Fragment,null,i.a.createElement(U,{item:"meal",onClick:function(){I(!0)}}),i.a.createElement(P.a,{fullWidth:!0,fullScreen:b,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:k,onFocus:function(e){return e.stopPropagation()},open:R,TransitionProps:{onExit:d}},i.a.createElement(D.c,{initialValues:{title:(null===(t=o.meal)||void 0===t?void 0:t.title)||"",recipes:(null===(n=o.meal)||void 0===n?void 0:n.recipes)||[],mealType:(null===(a=o.meal)||void 0===a?void 0:a.mealType)||"",notes:(null===(r=o.meal)||void 0===r?void 0:r.notes)||""},validationSchema:h.d({title:h.e().required("Required"),recipes:h.a(),mealType:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.meal?M(t):x(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return i.a.createElement(D.b,null,i.a.createElement(S.a,null,o.meal?"Update meal":"Add meal"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:l}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{autoFocus:!o.meal,component:A.b,disabled:s,id:"title",label:"Meal Title",name:"title",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{component:A.b,disabled:s,id:"mealType",label:"Meal Type",name:"mealType",type:"select",select:!0,fullWidth:!0},We.map((function(e){var t=e.toLowerCase();return i.a.createElement(de.a,{key:t,value:t},e)})))),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{component:A.b,disabled:s,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(Fe,{onChange:e.setFieldValue,name:"recipes",recipes:m,values:e.values.recipes})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:s,type:"submit",variant:"contained"},o.meal?s?"Updating...":"Update":s?"Adding...":"Add"),i.a.createElement(g.a,{disabled:s,onClick:k,variant:"contained"},"Cancel")))}))))})),Be=Object(r.c)((function(e){return{meals:e.meals.meals,recipes:e.recipes.recipes}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_MEAL",payload:M.a.Meals.delete(t),snackbar:{message:"Meal deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_MEALS",payload:M.a.Meals.deleteMany(t),snackbar:{message:"".concat(t.length," meal").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onLoadUpdate:function(t){return e({type:"MEAL_DIALOG_LOADED",meal:t})}}}))((function(e){var t=e.meals,n=e.onDelete,a=e.onDeleteMany,r=e.onLoadUpdate,o=e.recipes,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([{title:"Title",field:"title"},{title:"Meal Type",field:"mealType",lookup:We.reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{})},{title:"Notes",field:"notes"}]),m=Object(v.a)(p,1)[0];return Object(c.useEffect)((function(){var e=o.filter((function(e){return!0===e.isMeal})),n=[].concat(Object(B.a)(e),Object(B.a)(t)).sort((function(e,t){return e.title.localeCompare(t.title)}));d(n)}),[t,o]),i.a.createElement(z.a,{title:"Meals",columns:m,data:u,localization:{body:{emptyDataSourceMessage:"No meals found",editRow:{deleteText:"Delete meal? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,selectionProps:function(e){return{disabled:!!e.isMeal}},toolbar:!0},actions:[{action:function(e){return{disabled:!!e.isMeal,icon:"edit",onClick:function(e,t){r(t)},tooltip:e.isMeal?"Cannot edit recipes here":"Update meal"}},position:"row"},{icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));a(t)}(t)},position:"toolbarOnSelect",tooltip:"Delete all selected meals"}],editable:{isDeletable:function(e){return!e.isMeal},onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),n(e),t()}))}}})})),He=Object(r.c)((function(e){return{pageLoaded:e.meals.pageLoaded}}),(function(e){return{onLoad:function(){return e({type:"MEALS_PAGE_LOADED",payload:Promise.all([M.a.Meals.getAll(),M.a.Recipes.getAll()])})},onUnload:function(){return e({type:"MEALS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Q,{title:"Manage Meals"},i.a.createElement(qe,null)),a?i.a.createElement(Be,null):i.a.createElement(ee,null))})),ze=n(717),Ye=n(718),Je=n(404),Ke=n(729),$e=n(730),Qe=n(476),Ze=Object(b.a)({nav:{position:"fixed",bottom:0,width:"100%",zIndex:"1000"}}),Xe=Object(r.c)((function(e){return{currentUser:e.common.currentUser,navTabValue:e.nav.navTabValue,path:e.router.location.pathname}}),(function(e){return{onLoad:function(t,n){return e({type:"NAV_LOADED",value:t,redirectTo:n})},onTabChange:function(t,n){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:n})},onUnload:function(){return e({type:"NAV_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.navTabValue,a=e.onLoad,r=e.onTabChange,o=e.onUnload,l=e.path,s=Ze(),u=t.role,d=function(e){r(e,"/".concat(e))};return Object(c.useEffect)((function(){var e=l.split("/")[1];if(e&&""!==e)a(e,"/".concat(e));else{var t="admin"===u?"users":"plans";a(t,"/".concat(t))}return function(){o()}}),[]),Object(c.useEffect)((function(){var e=Object(Qe.loadCSS)("https://use.fontawesome.com/releases/v5.15.3/css/all.css",document.querySelector("#font-awesome-css"));return function(){e.parentNode.removeChild(e)}})),"admin"===u?i.a.createElement(ze.a,{className:s.nav,onChange:function(e,t){d(t)},showLabels:!0,value:n},i.a.createElement(Ye.a,{label:"Users",icon:i.a.createElement(Ke.a,null),value:"users"}),i.a.createElement(Ye.a,{label:"Settings",icon:i.a.createElement($e.a,null),value:"settings"})):i.a.createElement(ze.a,{className:s.nav,onChange:function(e,t){d(t)},showLabels:!0,value:n},i.a.createElement(Ye.a,{label:"Plans",icon:i.a.createElement(Je.a,{className:"fa fa-calendar-week"}),value:"plans"}),i.a.createElement(Ye.a,{label:"Meals",icon:i.a.createElement(Je.a,{className:"fa fa-utensils"}),value:"meals"}),i.a.createElement(Ye.a,{label:"Recipes",icon:i.a.createElement(Je.a,{className:"fa fa-hamburger"}),value:"recipes"}),i.a.createElement(Ye.a,{label:"Ingredients",icon:i.a.createElement(Je.a,{className:"fa fa-carrot"}),value:"ingredients"}),i.a.createElement(Ye.a,{label:"Settings",icon:i.a.createElement($e.a,null),value:"settings"}))})),et=Object(b.a)((function(e){return{wrapper:{marginTop:e.spacing(4),marginBottom:e.spacing(11)}}})),tt=function(e){var t=et();return i.a.createElement("div",{className:t.wrapper},e.children)},nt=function(e){return i.a.createElement(tt,null,i.a.createElement(m.a,null,i.a.createElement(K.a,{variant:"h2"},"Error 404: Page Not Found")))},at=n(330),rt=n(328),ct=n(285),it=n(731),ot=Object(b.a)((function(e){return{checked:{"& + span":{color:e.palette.primary.light,textDecoration:"line-through","& svg":{opacity:.5}}},icon:{marginLeft:e.spacing(1)},listItem:{alignItems:"center",display:"flex"}}})),lt=function(e){var t=e.list,n=ot(),a=Object(c.useState)({}),r=Object(v.a)(a,2),o=r[0],l=r[1],s=function(e){l(Object(E.a)(Object(E.a)({},o),{},Object(ue.a)({},e.target.name,e.target.checked)))};return Array.isArray(t)&&t.length>0?i.a.createElement(at.a,null,t.map((function(e){var t;return i.a.createElement(rt.a,{control:i.a.createElement(ct.a,{checked:null!==(t=o["".concat(e.name,"-").concat(e.unit)])&&void 0!==t&&t,classes:{checked:n.checked},onChange:s,name:"".concat(e.name,"-").concat(e.unit)}),key:"".concat(e.id,"-").concat(e.unit),label:i.a.createElement("span",{className:n.listItem},e.quantity&&e.unit?"".concat(e.name," (").concat(e.quantity," ").concat(e.unit,")"):"".concat(e.name),i.a.createElement(Oe.a,{arrow:!0,enterTouchDelay:0,title:"Needed for: ".concat(e.recipes.join(", "))},i.a.createElement(it.a,{className:n.icon,color:"secondary"})))})}))):i.a.createElement(K.a,null,t)},st=n(267),ut=n(482),dt=n(287),pt=function(e){var t=e.defaultStore,n=e.onChange,a=e.stores,r=Object(c.useState)(null!==t&&void 0!==t?t:""),o=Object(v.a)(r,2),l=o[0],s=o[1];return i.a.createElement(st.a,{fullWidth:!0},i.a.createElement(ut.a,{id:"store-selector-label"},"Select a Store"),i.a.createElement(dt.a,{id:"store-selector",labelId:"store-selector-label",onChange:function(e){var t=e.target.value;n(t),s(t)},value:l},!l&&i.a.createElement(de.a,{key:"blank",value:""}),a.map((function(e){return i.a.createElement(de.a,{key:e._id,value:e._id},e.name)}))))},mt=Object(r.c)((function(e){return{categories:e.categories.categories,defaultStore:e.common.settings.defaultStore,ingredients:e.ingredients.ingredients,meals:e.meals.meals,recipes:e.recipes.recipes,stores:e.stores.stores,viewer:e.plans.viewer}}),(function(e){return{onCopy:function(){return e({type:"PLAN_LIST_COPIED",snackbar:{message:"List copied",variant:"success"}})},onExit:function(){return e({type:"PLAN_LIST_DIALOG_UNLOADED"})}}}))((function(e){var t,n=e.categories,a=e.defaultStore,r=e.ingredients,o=e.meals,l=e.onCopy,s=e.onExit,u=e.recipes,d=e.stores,p=e.viewer,m=Object(c.useState)([]),f=Object(v.a)(m,2),b=f[0],O=f[1],y=Object(c.useState)(!1),j=Object(v.a)(y,2),D=j[0],A=j[1],h=Object(c.useState)(a),w=Object(v.a)(h,2),R=w[0],I=w[1],U=Object(_.a)(),k=Object(L.a)(U.breakpoints.down("md")),x=function(){if(p.plan){var e;if(0===n.length)return"No categories found";for(var t=[],a=0,c=Object.entries(p.plan.meals);a<c.length;a++){var i=Object(v.a)(c[a],2),l=(i[0],i[1].map((function(e){var t;return null!==(t=o.find((function(t){return t._id===e})))&&void 0!==t?t:u.find((function(t){return t._id===e}))})));t=[].concat(Object(B.a)(t),Object(B.a)(l))}if(0===t.length)return"No meals found";var s=t.flatMap((function(e){return e.hasOwnProperty("recipes")?e.recipes:e}));if(0===s.length)return"No recipes found";var m=s.flatMap((function(e){return e.ingredients.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{recipe:e.title})}))})).map((function(e){var t=r.find((function(t){return t._id===e.id})),a=n.find((function(e){return e._id===t.category}));return Object(E.a)(Object(E.a)({},e),{},{category:a._id,name:t.name})}));if(0===m.length)return"No ingredients found";var f=m.reduce((function(e,t){var n={id:t.id,name:t.name,quantity:t.quantity,recipes:[t.recipe],unit:t.unit};return e.hasOwnProperty(t.category)?e[t.category].push(n):e[t.category]=[n],e}),{}),b=[],g=d.find((function(e){return e._id===R}));return(null!==(e=null===g||void 0===g?void 0:g.categories)&&void 0!==e?e:n).forEach((function(e){var t,n=(null!==(t=f[e._id])&&void 0!==t?t:[]).reduce((function(e,t){var n=function(e){return e.id===t.id&&e.unit===t.unit};if(e.find((function(e){return n(e)}))){var a=e.findIndex((function(e){return n(e)}));e[a]=Object(E.a)(Object(E.a)({},e[a]),{},{quantity:e[a].quantity+t.quantity,recipes:e[a].recipes.concat(t.recipes.filter((function(t){return e[a].recipes.indexOf(t)<0})))})}else e.push(t);return e}),[]);b.push(n)})),b.flat()}return"No plan found"},G=function(){A(!1)};return Object(c.useEffect)((function(){D&&O(x())}),[D]),Object(c.useEffect)((function(){"list"===p.type&&A(!!p.plan)}),[p.plan]),Object(c.useEffect)((function(){O(x())}),[R]),i.a.createElement(P.a,{fullScreen:k,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:G,onFocus:function(e){return e.stopPropagation()},open:D,TransitionProps:{onExit:function(){I(a),O([]),s()}}},i.a.createElement(S.a,null,"Shopping List for ",null===(t=p.plan)||void 0===t?void 0:t.title),i.a.createElement(N.a,null,i.a.createElement(T.a,{container:!0,spacing:2},d.length>0&&i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(pt,{defaultStore:a,onChange:function(e){I(e)},stores:d})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(lt,{list:b})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:!Array.isArray(b),onClick:function(){var e=b.map((function(e){return"".concat(e.name," (").concat(e.quantity," ").concat(e.unit,")")})).join("\n");navigator.clipboard.writeText(e).then((function(){l()}),(function(e){console.error("error",e)}))},variant:"contained"},"Copy list"),i.a.createElement(g.a,{onClick:G,variant:"contained"},"Close")))})),Et=n(64),ft=n(187),bt=n(732),gt=function(e){var t=e.index,n=e.meal,a=e.onRemove,r=e.uniqueId,c=Object(_.a)();return i.a.createElement(Et.Draggable,{key:r,draggableId:r,index:t},(function(e,t){return i.a.createElement(ft.a,Object.assign({elevation:3,ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(o=t.isDragging,l=e.draggableProps.style,Object(E.a)({alignItems:"center",background:o?c.palette.secondary.light:"white",display:"flex",justifyContent:"space-between",marginBottom:c.spacing(1),padding:c.spacing(1),userSelect:"none"},l))}),n.title,i.a.createElement(ye.a,{id:r,onClick:a,size:"small"},i.a.createElement(bt.a,null)));var o,l}))},Ot=function(e){var t=e.meals,n=e.name,a=e.onChange,r=Object(c.useState)([]),o=Object(v.a)(r,2),l=o[0],s=o[1],u=t.map((function(e){var t=e.title[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)}));return Object(c.useEffect)((function(){s(u)}),[t]),i.a.createElement(Ue.a,{autoHighlight:!0,autoSelect:!0,getOptionLabel:function(e){return e.title},groupBy:function(e){return e.firstLetter},noOptionsText:"No meals have been created",onChange:function(e,t){a(n,null===t||void 0===t?void 0:t._id)},options:l,renderInput:function(e){return i.a.createElement(ke.a,Object.assign({},e,{autoFocus:!0,label:"Meals",variant:"outlined"}))},renderOption:function(e,t){var n=t.inputValue,a=Ve()(e.title,n),r=Ge()(e.title,a);return i.a.createElement("div",null,r.map((function(e,t){return i.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}})},yt=function(e){var t=e.day,n=e.meals,a=e.onAdd,r=Object(c.useState)(!1),o=Object(v.a)(r,2),l=o[0],s=o[1],u=Object(_.a)(),d=Object(L.a)(u.breakpoints.down("md")),p=function(){s(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Oe.a,{arrow:!0,title:"Add meal to ".concat(t)},i.a.createElement(w.a,{color:"secondary",onClick:function(){s(!0)},size:"small"},i.a.createElement(R.a,null))),i.a.createElement(P.a,{fullScreen:d,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:p,onFocus:function(e){return e.stopPropagation()},open:l,TransitionProps:{onExit:function(){}}},i.a.createElement(D.c,{initialValues:{meal:""},onSubmit:function(e){!function(e){var n={day:t,mealId:e.meal};a(n),p()}(e)}},(function(e){return i.a.createElement(D.b,null,i.a.createElement(S.a,null,"Add meal to ",t),i.a.createElement(N.a,null,i.a.createElement(Ot,{meals:n,name:"meal",onChange:e.setFieldValue})),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:!e.values.meal,type:"submit",variant:"contained"},"Add"),i.a.createElement(g.a,{onClick:p,variant:"contained"},"Cancel")))}))))},jt=Object(b.a)((function(e){var t;return{dayHeader:(t={alignItems:"center",borderBottom:"2px solid ".concat(e.palette.secondary.light),display:"flex",justifyContent:"space-between",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(1),"px ").concat(e.spacing(1),"px"),width:"100%"},Object(ue.a)(t,e.breakpoints.up("lg"),{width:"50%"}),Object(ue.a)(t,"& > button",{visibility:"hidden"}),Object(ue.a)(t,"&:hover > button",{visibility:"visible"}),t)}})),vt=function(e){var t=e.day,n=e.mealPlan,a=e.meals,r=e.onAdd,c=e.onRemove,o=Object(_.a)(),l=Object(L.a)(o.breakpoints.down("md")),s=jt(),u=n.map((function(e){return a.find((function(t){return t._id===e}))}));return i.a.createElement("div",null,i.a.createElement("div",{className:s.dayHeader},i.a.createElement(K.a,{color:"primary",variant:"h6"},i.a.createElement("em",null,t)),i.a.createElement(yt,{day:t,meals:a,onAdd:r})),i.a.createElement(Et.Droppable,{droppableId:t},(function(e,n){return i.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(a=n.isDraggingOver,{border:a?"2px dashed ".concat(o.palette.primary.light):"2px dashed white",minHeight:"120px",padding:o.spacing(1),width:l?"100%":"50%"})}),u.map((function(e,n){var a="".concat(t,"-").concat(e._id,"-").concat(n);return i.a.createElement(gt,{index:n,key:a,meal:e,onRemove:c,uniqueId:a})})),e.placeholder);var a})))},Dt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],At=function(e){var t=e.meals,n=e.mealPlan,a=e.name,r=e.onChange,o=Object(c.useState)(n),l=Object(v.a)(o,2),s=l[0],u=l[1],d=function(e){var t=e.day,c=e.mealId,i=Object(E.a)({},n);i[t].push(c),u(i),r(a,i)},p=function(e){var t=e.currentTarget.getAttribute("id").split("-"),c=Object(v.a)(t,2),i=c[0],o=c[1],l=Object(E.a)({},n),s=l[i].indexOf(o);l[i].splice(s,1),u(l),r(a,l)};return i.a.createElement(Et.DragDropContext,{onDragEnd:function(e){var t=e.destination,c=e.source,i=e.draggableId;if(t&&(t.droppableId!==c.droppableId||t.index!==c.index)){var o=c.droppableId,l=t.droppableId,s=i.split("-")[1],d=Object(E.a)({},n);d[o].splice(c.index,1),d[l].splice(t.index,0,s),u(d),r(a,d)}}},Dt.map((function(e){return i.a.createElement(vt,{day:e,key:e,meals:t,mealPlan:s[e],onAdd:d,onRemove:p})})))},ht=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.plans),{},{meals:e.meals.meals,recipes:e.recipes.recipes})}),(function(e){return{onAdd:function(t){return e({type:"ADD_PLAN",payload:M.a.Plans.add(t),snackbar:{message:"Plan added",variant:"success"}})},onExit:function(){return e({type:"PLAN_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_PLAN",payload:M.a.Plans.update(t),snackbar:{message:"Plan updated",variant:"success"}})}}}))((function(e){var t,n,a,r,o,l=e.editor,s=e.errors,u=e.inProgress,d=e.meals,p=e.onAdd,f=e.onExit,b=e.onUpdate,O=function(e,t){var n=Object(B.a)(e),a=t.filter((function(e){return e.isMeal})).map((function(e){return{mealType:e.mealType,notes:e.notes,recipes:[e],slug:e.slug,title:e.title,_id:e._id}}));return[].concat(Object(B.a)(n),Object(B.a)(a)).sort((function(e,t){return e.title.localeCompare(t.title)}))}(d,e.recipes),_=Dt.reduce((function(e,t){return e[t]=[],e}),{}),L=Object(c.useState)(!1),w=Object(v.a)(L,2),R=w[0],I=w[1],k=function(){I(!1)},x=function(e){p(Object(E.a)({},e))},M=function(e){b(Object(E.a)(Object(E.a)({},l.plan),e))};return Object(c.useEffect)((function(){u||s||I(!1)}),[u]),Object(c.useEffect)((function(){I(!!l.plan)}),[l.plan]),i.a.createElement(i.a.Fragment,null,i.a.createElement(U,{item:"plan",onClick:function(){I(!0)}}),i.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:k,onFocus:function(e){return e.stopPropagation()},open:R,scroll:"body",TransitionProps:{onExit:f}},i.a.createElement(D.c,{initialValues:{meals:(null===(t=l.plan)||void 0===t?void 0:t.meals)||_,notes:(null===(n=l.plan)||void 0===n?void 0:n.notes)||"",order:(null===(a=l.plan)||void 0===a?void 0:a.order)||0,skip:(null===(r=l.plan)||void 0===r?void 0:r.skip)||!1,title:(null===(o=l.plan)||void 0===o?void 0:o.title)||""},validationSchema:h.d({meals:h.d(),notes:h.e(),order:h.c(),skip:h.b(),title:h.e().required("Required")}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.plan?M(t):x(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return i.a.createElement(m.a,{disableGutters:!0},i.a.createElement(D.b,null,i.a.createElement(S.a,null,l.plan?"Update plan":"Add plan"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:s}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{autoFocus:!l.plan,component:A.b,disabled:u,id:"title",label:"Plan Title",name:"title",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{component:A.b,disabled:u,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h6"},"Meals"),i.a.createElement(At,{meals:O,mealPlan:e.values.meals,name:"meals",onChange:e.setFieldValue})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:u,type:"submit",variant:"contained"},l.plan?u?"Updating...":"Update":u?"Adding...":"Add"),i.a.createElement(g.a,{disabled:u,onClick:k,variant:"contained"},"Cancel"))))}))))})),_t=Object(b.a)((function(e){return{dayList:{listStyle:"none",paddingLeft:e.spacing(1)},mealHeader:{padding:e.spacing(1)},mealLink:{border:"1px solid",borderColor:"white",borderRadius:e.spacing(1),padding:e.spacing(1),"&:hover":{borderColor:e.palette.secondary.light},"& a":{color:e.palette.text.primary,height:"100%",textDecoration:"none",width:"100%"}},paper:{padding:e.spacing(2)},recipeList:{listStyle:"none",paddingLeft:e.spacing(2)}}})),Lt=Object(r.c)((function(e){return{meals:e.meals.meals,plan:e.plans.viewer.plan,recipes:e.recipes.recipes}}),(function(e){return{onLoadView:function(t){return e({type:"RECIPE_VIEW_LOADED",recipe:t})}}}))((function(e){var t=e.meals,n=e.onLoadView,a=e.plan,r=e.recipes,c=_t(),o=Object.keys(a.meals),l=function(e){var n=t.find((function(t){return t._id===e}));return n||r.find((function(t){return t._id===e}))},s=function(e){n(e)};return a&&i.a.createElement(ft.a,{className:c.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h5"},a.title)),a.notes&&i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h6"},"Notes"),i.a.createElement(K.a,null,a.notes)),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h5"},"Meals"),i.a.createElement("hr",null),i.a.createElement(T.a,{container:!0,item:!0,xs:12,spacing:2},o.map((function(e){var t=a.meals[e];return i.a.createElement(T.a,{item:!0,xs:12,key:e},i.a.createElement(K.a,{variant:"h6"},e),i.a.createElement("ul",{className:c.dayList},t.map((function(e){var t=l(e);return(null===t||void 0===t?void 0:t.recipes)?i.a.createElement("li",{key:e},i.a.createElement(K.a,{className:c.mealHeader},i.a.createElement("em",null,null===t||void 0===t?void 0:t.title)),i.a.createElement("ul",{className:c.recipeList},t.recipes.map((function(e){return i.a.createElement("li",{className:c.mealLink,key:e._id},i.a.createElement("a",{href:"#",onClick:function(){return s(e)}},i.a.createElement(K.a,null,e.title)))})))):i.a.createElement("li",{className:c.mealLink,key:t._id},i.a.createElement("a",{href:"#",onClick:function(){return s(t)}},i.a.createElement(K.a,null,null===t||void 0===t?void 0:t.title)))}))))}))))))})),Pt=n(733),St=Object(r.c)((function(e){return{plans:e.plans.plans,starredPlan:e.common.settings.starredPlan}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_PLAN",payload:M.a.Plans.delete(t),snackbar:{message:"Plan deleted",variant:"success"}})},onLoadUpdate:function(t){return e({type:"PLAN_DIALOG_LOADED",plan:t})},onLoadView:function(t){return e({type:"PLAN_VIEW_LOADED",plan:t})},onSetStarred:function(t){return e({type:"SET_STARRED_PLAN",payload:M.a.Settings.update(t),snackbar:{message:"Starred plan saved",variant:"success"}})},onUpdateArchiveStatus:function(t,n){return e({type:"UPDATE_PLAN_ARCHIVE_STATUS",payload:Promise.all([M.a.Plans.update(t),M.a.Settings.update({starredPlan:null})]),snackbar:{message:"Plan ".concat(n),variant:"success"}})},onViewShoppingList:function(t){return e({type:"PLAN_LIST_DIALOG_LOADED",plan:t})}}}))((function(e){var t=e.filter,n=e.onDelete,a=e.onLoadUpdate,r=e.onLoadView,o=e.onSetStarred,l=e.onUpdateArchiveStatus,s=e.onViewShoppingList,u=e.plans,d=e.starredPlan,p=Object(c.useState)([]),m=Object(v.a)(p,2),f=m[0],b=m[1],g=Object(c.useState)([{title:"Title",field:"title"},{title:"Notes",field:"notes"}]),O=Object(v.a)(g,1)[0];return Object(c.useEffect)((function(){var e=Object(B.a)(u).sort((function(e,t){return e._id===d?-1:t._id===d?1:0})),n="archived"===t?e.filter((function(e){return!0===e.archived})):"unarchived"===t?e.filter((function(e){return!1===e.archived})):e;b(n)}),[u,d]),i.a.createElement(z.a,{title:"Plans",columns:O,data:f,components:"archived"===t&&{Container:function(e){return i.a.createElement(ft.a,Object.assign({},e,{elevation:0}))}},localization:{body:{emptyDataSourceMessage:"No plans found",editRow:{deleteText:"Delete plan? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,toolbar:!0},actions:[{action:function(e){return{disabled:e.archived,icon:e._id===d?"star":function(){return i.a.createElement(Pt.a,null)},onClick:function(e,t){return function(e){var t={starredPlan:d!==e._id?e:null};o(t)}(t)},position:"row",tooltip:e._id===d?"Unstar plan":"Star plan"}}},{icon:"list",onClick:function(e,t){s(t)},tooltip:"View shopping list",position:"row"},{icon:"visibility",onClick:function(e,t){r(t)},position:"row",tooltip:"View plan"},{icon:"edit",onClick:function(e,t){a(t)},tooltip:"Update plan",position:"row"},{action:function(e){return{icon:e.archived?"unarchive":"archive",onClick:function(e,t){return function(e){var t=e.archived?"unarchived":"archived";l(Object(E.a)(Object(E.a)({},e),{},{archived:!e.archived}),t)}(t)},position:"row",tooltip:e.archived?"Unarchive plan":"Archive plan"}}}],editable:{onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(f),c=e.tableData.id;r.splice(c,1),b(Object(B.a)(r)),n(e),t()}))}}})})),Nt=n(477),Tt=n.n(Nt),Ct=n(334),wt=Object(b.a)((function(e){return{error:{color:"#f44336",fontSize:"0.75rem",fontWeight:400,letterSpacing:"0.03333em",lineHeight:1.66,margin:0,marginTop:"3px",textAlign:"left"}}})),Rt=function(e){var t=Object(c.useState)(null),n=Object(v.a)(t,1)[0],a=wt();return i.a.createElement(i.a.Fragment,null,i.a.createElement(Tt.a,Object.assign({controls:["numberList","bold","italic","underline","undo","redo"],defaultValue:e.initialValue,error:n&&e.touched,label:e.placeholder,onBlur:function(){!e.readOnly&&e.onEditorBlur(e.name,!0,!1)},onChange:function(t){!e.readOnly&&e.onEditorChange(e.name,JSON.stringify(Object(Ct.convertToRaw)(t.getCurrentContent())),!1)}},e)),n&&e.touched&&i.a.createElement("div",{className:a.error},n))},It=Object(b.a)((function(e){return{ingredients:{backgroundColor:"#eee"},ingredientsList:{listStyle:"none",paddingLeft:e.spacing(2),"& li":{marginBottom:e.spacing(2)}},ingredientName:{fontSize:e.typography.subtitle1.fontSize,fontWeight:"bold"},ingredientDetails:{color:e.palette.text.secondary},paper:{padding:e.spacing(2)}}})),Ut=function(e){var t=e.ingredients,n=e.recipe,a=It();return n&&i.a.createElement(ft.a,{className:a.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h5"},n.title),i.a.createElement(K.a,{variant:"subtitle2"},function(e){var t=[];return e.servings&&t.push(i.a.createElement(i.a.Fragment,{key:1},i.a.createElement("em",null,"Servings: "),i.a.createElement("u",null,e.servings))),t.push(" | "),e.prepTime&&t.push(i.a.createElement(i.a.Fragment,{key:2},i.a.createElement("em",null,"Prep Time: "),i.a.createElement("u",null,e.prepTime))),e.wwPoints&&(t.push(" | "),t.push(i.a.createElement(i.a.Fragment,{key:3},i.a.createElement("em",null,"WW Points: "),i.a.createElement("u",null,e.wwPoints)))),e.isMeal&&(t.push(" | "),t.push(i.a.createElement(i.a.Fragment,{key:4},i.a.createElement("em",null,"Meal Type: "),i.a.createElement("u",null,e.mealType)))),t}(n))),i.a.createElement(T.a,{item:!0,xs:12,className:a.ingredients},i.a.createElement(K.a,{variant:"h6"},"Ingredients"),i.a.createElement("ul",{className:a.ingredientsList},n.ingredients.map((function(e){var n,r=(n=e.id,t.find((function(e){return e._id===n})));return e.id?i.a.createElement("li",{key:e.id},i.a.createElement("span",{className:a.ingredientName},null===r||void 0===r?void 0:r.name),i.a.createElement("br",null),i.a.createElement("span",{className:a.ingredientDetails},"".concat(e.quantity||""," ").concat(e.unit||""),e.notes&&", ".concat(e.notes))):null})))),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h6"},"Directions"),i.a.createElement(Rt,{initialValue:null===n||void 0===n?void 0:n.directions,toolbar:!1,readOnly:!0})),n.notes&&i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h6"},"Notes"),i.a.createElement(K.a,null,n.notes))))},kt=Object(r.c)((function(e){return{ingredients:e.ingredients.ingredients,pageLoaded:e.plans.pageLoaded,planViewer:e.plans.viewer,recipeViewer:e.recipes.viewer}}),(function(e){return{onLoad:function(){return e({type:"PLANS_PAGE_LOADED",payload:Promise.all([M.a.Plans.getAll(),M.a.Meals.getAll(),M.a.Recipes.getAll(),M.a.Ingredients.getAll(),M.a.Categories.getAll(),M.a.Stores.getAll()])})},onUnload:function(){return e({type:"PLANS_PAGE_UNLOADED"})},onUnloadPlanView:function(){return e({type:"PLAN_VIEW_UNLOADED"})},onUnloadRecipeView:function(){return e({type:"RECIPE_VIEW_UNLOADED"})}}}))((function(e){var t=e.ingredients,n=e.onLoad,a=e.onUnload,r=e.onUnloadPlanView,o=e.onUnloadRecipeView,l=e.pageLoaded,s=e.planViewer,u=e.recipeViewer,d=Object(c.useState)(!1),p=Object(v.a)(d,2),m=p[0],E=p[1],f=s.plan&&"plan"===s.type,b=!!u.recipe;return Object(c.useEffect)((function(){return n(),function(){a()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Q,{title:b?"View Recipe":f?"View Plan":"Manage Plans"},b?i.a.createElement(g.a,{color:"secondary",onClick:o},"Back to Plan"):f?i.a.createElement(g.a,{color:"secondary",onClick:r},"Manage Plans"):i.a.createElement(ht,null)),l?b?i.a.createElement(Ut,{ingredients:t,recipe:u.recipe}):f?i.a.createElement(Lt,null):i.a.createElement(T.a,{container:!0,spacing:4},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(St,{filter:"unarchived"})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h5",gutterBottom:!0},"Archived Plans"),i.a.createElement(he.a,{onChange:function(e,t){return E(t)}},i.a.createElement(_e.a,{expandIcon:i.a.createElement(Se.a,null),"aria-controls":"archived-content",id:"archived-header"},i.a.createElement(K.a,{variant:"body1"},"Click to ",m?"hide":"show"," archived plans")),i.a.createElement(Pe.a,{style:{display:"block"}},i.a.createElement(St,{filter:"archived"}))))):i.a.createElement(ee,null),i.a.createElement(mt,null))})),xt=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){return e.currentUser?i.a.createElement(s.b,{exact:!0,path:e.path,component:e.component}):i.a.createElement(s.a,{to:"/"})})),Gt=n(728),Mt=Object(Gt.a)(),Vt=Object(r.c)((function(e){return{editor:e.recipes.editor,ingredients:e.ingredients.ingredients}}),(function(e){return{onBlur:function(){return e({type:"RECIPE_INGREDIENT_ONBLUR"})}}}))((function(e){var t=e.editor,n=e.ingredients,a=e.onBlur,r=e.onChange,o=e.value,l=Object(c.useState)(null),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([]),m=Object(v.a)(p,2),f=m[0],b=m[1],g=Object(c.useState)(null!==o&&void 0!==o?o:null),O=Object(v.a)(g,2),y=O[0],j=O[1],D=n.map((function(e){var t=e.name[0].toUpperCase();return Object(E.a)({firstLetter:/[0-9]/.test(t)?"0-9":t},e)})),A=function(e,t){"string"!==typeof t&&(j(t),r(e,t)),a()};Object(c.useEffect)((function(){b(D)}),[n]),Object(c.useEffect)((function(){t.ingredient&&(j(t.ingredient),r({},t.ingredient),a())}),[t.ingredient]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ue.a,{autoHighlight:!0,autoSelect:!0,freeSolo:!0,options:f,value:y,filterOptions:function(e,t){var n=Mt(e,t);return""!==t.inputValue&&n.push({inputValue:t.inputValue,name:'Add "'.concat(t.inputValue,'"')}),n},getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.name},getOptionSelected:function(e,t){return e._id===(null===t||void 0===t?void 0:t._id)},groupBy:function(e){return e.firstLetter},onKeyDown:function(e){return function(e){"Enter"===e.key&&e.stopPropagation()}(e)},renderInput:function(e){return i.a.createElement(ke.a,Object.assign({},e,{autoFocus:!0,label:"Ingredient name",variant:"outlined"}))},onBlur:a,onChange:function(e,t){t&&t.inputValue&&d({name:t.inputValue}),A(e,t)},renderOption:function(e,t){var n=t.inputValue,a=Ve()(e.name,n),r=Ge()(e.name,a);return i.a.createElement("div",null,r.map((function(e,t){return i.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}}),i.a.createElement(me,{hideButton:!0,ingredient:u,isOpen:!!u,onClose:function(){d(null)}}))})),Ft=function(e,t,n){return{name:e,abbr:t,conv:n}},Wt=[["count","ct",0],["cup","c",0],["dash","dsh",0],["fluid ounce","fl oz",0],["gram","g",0],["milliliter","mL",0],["ounce","oz",0],["package","pkg",0],["piece","piece",0],["pinch","pnch",0],["pint","pt",0],["pound","lb",0],["quart","qt",0],["slice","slc",0],["spray","spray",0],["tablespoon","tbsp",0],["teaspoon","tsp",0]].map((function(e){return Ft.apply(void 0,Object(B.a)(e))})),qt=function(e){var t=e.ingredients,n=e.ingredientsList,a=e.onChange,r=Object(c.useState)([]),o=Object(v.a)(r,2),l=o[0],s=o[1],u=Object(c.useState)([]),d=Object(v.a)(u,2),p=d[0],m=d[1];return Object(c.useEffect)((function(){s([{title:"Name",field:"id",lookup:n.reduce((function(e,t){return e[t._id]=t.name,e}),{}),editComponent:function(e){return i.a.createElement(Vt,{onChange:function(t,n){return e.onChange(null===n||void 0===n?void 0:n._id)},value:n.find((function(t){return t._id===e.value}))})}},{title:"Quantity",field:"quantity"},{title:"Unit",field:"unit",lookup:Wt.reduce((function(e,t){return e[t.abbr]="".concat(t.name,"s (").concat(t.abbr,")"),e}),{})},{title:"Notes",field:"notes"}])}),[n]),Object(c.useEffect)((function(){m(t)}),[t]),i.a.createElement(z.a,{title:"Ingredients",columns:l,data:p,localization:{body:{emptyDataSourceMessage:"No ingredients have been added",editRow:{deleteText:"Remove ingredient from this recipe?"}}},options:{actionsColumnIndex:-1,paging:!1,search:!1},editable:{onRowAdd:function(e){return new Promise((function(t,n){m([].concat(Object(B.a)(p),[e])),a([].concat(Object(B.a)(p),[e])),t()}))},onRowUpdate:function(e,t){return new Promise((function(n,r){var c=Object(B.a)(p);c[t.tableData.id]=e,m(Object(B.a)(c)),a(Object(B.a)(c)),n()}))},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(B.a)(p),c=e.tableData.id;r.splice(c,1),m(Object(B.a)(r)),a(Object(B.a)(r)),t()}))}}})},Bt=function(){var e=Object(D.e)(),t=e.values,n=e.setFieldValue;return Object(c.useEffect)((function(){t.isMeal||n("mealType","")}),[t]),null},Ht=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.recipes),{},{ingredients:e.ingredients.ingredients})}),(function(e){return{onAdd:function(t){return e({type:"ADD_RECIPE",payload:M.a.Recipes.add(t),snackbar:{message:"Recipe added",variant:"success"}})},onExit:function(){return e({type:"RECIPE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_RECIPE",payload:M.a.Recipes.update(t),snackbar:{message:"Recipe updated",variant:"success"}})}}}))((function(e){var t,n,a,r,o,l,s,u,d,p=e.editor,f=e.errors,b=e.ingredients,O=e.inProgress,_=e.onAdd,L=e.onExit,w=e.onUpdate,R=Object(c.useState)(!1),I=Object(v.a)(R,2),k=I[0],x=I[1],M=function(){x(!1)},V=function(e){_(Object(E.a)({},e))},F=function(e){w(Object(E.a)(Object(E.a)({},p.recipe),e))};return Object(c.useEffect)((function(){O||f||x(!1)}),[O]),Object(c.useEffect)((function(){x(!!p.recipe)}),[p.recipe]),i.a.createElement(i.a.Fragment,null,i.a.createElement(U,{item:"recipe",onClick:function(){x(!0)}}),i.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:M,onFocus:function(e){return e.stopPropagation()},open:k,TransitionProps:{onExit:L}},i.a.createElement(D.c,{initialValues:{directions:(null===(t=p.recipe)||void 0===t?void 0:t.directions)||"",ingredients:(null===(n=p.recipe)||void 0===n?void 0:n.ingredients)||[],isMeal:(null===(a=p.recipe)||void 0===a?void 0:a.isMeal)||!1,mealType:(null===(r=p.recipe)||void 0===r?void 0:r.mealType)||"",notes:(null===(o=p.recipe)||void 0===o?void 0:o.notes)||"",prepTime:(null===(l=p.recipe)||void 0===l?void 0:l.prepTime)||"",servings:(null===(s=p.recipe)||void 0===s?void 0:s.servings)||"",title:(null===(u=p.recipe)||void 0===u?void 0:u.title)||"",wwPoints:(null===(d=p.recipe)||void 0===d?void 0:d.wwPoints)||""},validationSchema:h.d({directions:h.e().required("Required"),ingredients:h.a(),isMeal:h.b(),mealType:h.e(),notes:h.e(),prepTime:h.c().required("Required"),servings:h.c().required("Required"),title:h.e().required("Required"),wwPoints:h.c()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.recipe?F(t):V(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t;return i.a.createElement(m.a,{disableGutters:!0},i.a.createElement(D.b,null,i.a.createElement(S.a,null,p.recipe?"Update recipe":"Add recipe"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:f}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(D.a,{autoFocus:!p.recipe,component:A.b,disabled:O,id:"title",label:"Recipe Title",name:"title",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:6,md:3},i.a.createElement(D.a,{component:A.a,disabled:O,type:"checkbox",name:"isMeal",Label:{label:"This recipe is a meal"}}),i.a.createElement(Bt,null)),i.a.createElement(T.a,{item:!0,xs:6,md:3},e.values.isMeal&&i.a.createElement(D.a,{component:A.b,disabled:O,id:"mealType",label:"Meal Type",name:"mealType",type:"select",select:!0,fullWidth:!0},We.map((function(e){var t=e.toLowerCase();return i.a.createElement(de.a,{key:t,value:t},e)})))),i.a.createElement(T.a,{item:!0,xs:12,md:4},i.a.createElement(D.a,{component:A.b,disabled:O,id:"servings",label:"Servings",name:"servings",type:"number",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:4},i.a.createElement(D.a,{component:A.b,disabled:O,id:"prepTime",label:"Prep Time (minutes)",name:"prepTime",type:"number",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:4},i.a.createElement(D.a,{component:A.b,disabled:O,id:"wwPoints",label:"WW Points",name:"wwPoints",type:"number",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{component:A.b,disabled:O,id:"notes",label:"Notes",name:"notes",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(qt,{ingredients:e.values.ingredients,ingredientsList:b,onChange:function(t){e.setFieldValue("ingredients",t)}})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h6"},"Directions"),i.a.createElement(Rt,{errors:e.errors.directions,initialValue:null===(t=p.recipe)||void 0===t?void 0:t.directions,name:"directions",onEditorBlur:e.setFieldTouched,onEditorChange:e.setFieldValue,placeholder:"Enter recipe directions here...",touched:e.touched.directions})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:O,type:"submit",variant:"contained"},p.recipe?O?"Updating...":"Update":O?"Adding...":"Add"),i.a.createElement(g.a,{disabled:O,onClick:M,variant:"contained"},"Cancel"))))}))))})),zt=Object(r.c)((function(e){return{recipes:e.recipes.recipes}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_RECIPE",payload:M.a.Recipes.delete(t),snackbar:{message:"Recipe deleted",variant:"success"}})},onDeleteMany:function(t){return e({type:"DELETE_RECIPES",payload:M.a.Recipes.deleteMany(t),snackbar:{message:"".concat(t.length," recipe").concat(t.length>1?"s":""," deleted"),variant:"success"}})},onLoadUpdate:function(t){return e({type:"RECIPE_DIALOG_LOADED",recipe:t})},onLoadView:function(t){return e({type:"RECIPE_VIEW_LOADED",recipe:t})}}}))((function(e){var t=e.onDelete,n=e.onDeleteMany,a=e.onLoadUpdate,r=e.onLoadView,o=e.recipes,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([{title:"Title",field:"title"},{title:"Prep Time (min)",field:"prepTime"},{title:"Servings",field:"servings"},{title:"WW Points",field:"wwPoints"},{title:"Meal Type",field:"mealType"},{title:"Notes",field:"notes"}]),m=Object(v.a)(p,1)[0];return Object(c.useEffect)((function(){d(o)}),[o]),i.a.createElement(z.a,{title:"Recipes",columns:m,data:u,localization:{body:{emptyDataSourceMessage:"No recipes found",editRow:{deleteText:"Delete recipe? This action cannot be undone."}}},options:{actionsColumnIndex:-1,paging:!1,selection:!0,toolbar:!0},actions:[{icon:"visibility",onClick:function(e,t){r(t)},position:"row",tooltip:"View recipe"},{icon:"edit",onClick:function(e,t){a(t)},position:"row",tooltip:"Update recipe"},{icon:"delete",onClick:function(e,t){return function(e){var t=e.map((function(e){return e.slug}));n(t)}(t)},position:"toolbarOnSelect",tooltip:"Delete all selected recipes"}],editable:{onRowDelete:function(e){return new Promise((function(n,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),t(e),n()}))}}})})),Yt=Object(r.c)((function(e){return{ingredients:e.ingredients.ingredients,pageLoaded:e.recipes.pageLoaded,viewer:e.recipes.viewer}}),(function(e){return{onLoad:function(){return e({type:"RECIPES_PAGE_LOADED",payload:Promise.all([M.a.Recipes.getAll(),M.a.Ingredients.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"RECIPES_PAGE_UNLOADED"})},onUnloadView:function(){return e({type:"RECIPE_VIEW_UNLOADED"})}}}))((function(e){var t=e.ingredients,n=e.onLoad,a=e.onUnload,r=e.onUnloadView,o=e.pageLoaded,l=e.viewer;return Object(c.useEffect)((function(){return n(),function(){a()}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Q,{title:l.recipe?"View Recipe":"Manage Recipes"},l.recipe?i.a.createElement(g.a,{color:"secondary",onClick:r},"Manage recipes"):i.a.createElement(Ht,null)),o?l.recipe?i.a.createElement(Ut,{ingredients:t,recipe:l.recipe}):i.a.createElement(zt,null):i.a.createElement(ee,null))})),Jt=n(735),Kt=n(734),$t=function(e){var t=e.category,n=e.index,a=Object(_.a)();return i.a.createElement(Et.Draggable,{draggableId:t.slug,index:n,key:t.slug},(function(e,n){return i.a.createElement(ft.a,Object.assign({elevation:3,ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(r=n.isDragging,c=e.draggableProps.style,Object(E.a)({background:r?a.palette.secondary.light:"white",marginBottom:a.spacing(1),padding:a.spacing(2),userSelect:"none"},c))}),t.name," ",t.isNew&&i.a.createElement(Le.a,{color:"secondary",label:"new",size:"small",style:{color:"white",fontStyle:"italic"}}));var r,c}))},Qt=function(e){var t=e.categories,n=Object(_.a)(),a=Object(L.a)(n.breakpoints.down("md"));return i.a.createElement(Et.Droppable,{droppableId:"categories"},(function(e,r){return i.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(c=r.isDraggingOver,{border:c?"2px dashed ".concat(n.palette.primary.light):"2px solid white",minHeight:"120px",padding:n.spacing(1),width:a?"100%":"50%"})}),t.map((function(e,t){return i.a.createElement($t,{category:e,index:t,key:e.slug})})),e.placeholder);var c}))},Zt=function(e){var t=e.categories,n=e.name,a=e.onChange,r=Object(c.useState)(t),o=Object(v.a)(r,2),l=o[0],s=o[1];return i.a.createElement(Et.DragDropContext,{onDragEnd:function(e){var r=e.destination,c=e.source,i=e.draggableId;if(r&&r.index!==c.index){var o=t.find((function(e){return e.slug===i})),u=Object(B.a)(l);u.splice(c.index,1),u.splice(r.index,0,o),s(u),a(n,u)}}},i.a.createElement(Qt,{categories:l}))},Xt=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.stores),{},{categories:e.categories.categories})}),(function(e){return{onAdd:function(t){return e({type:"ADD_STORE",payload:M.a.Stores.add(t),snackbar:{message:"Store added",variant:"success"}})},onExit:function(){return e({type:"STORE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_STORE",payload:M.a.Stores.update(t),snackbar:{message:"Store updated",variant:"success"}})}}}))((function(e){var t,n,a,r=e.categories,o=e.editor,l=e.errors,s=e.inProgress,u=e.onAdd,d=e.onExit,p=e.onUpdate,f=Object(c.useState)(!1),b=Object(v.a)(f,2),O=b[0],_=b[1],L=!!(null===(t=o.store)||void 0===t?void 0:t.name),w=function(){_(!1)},R=function(e){u(Object(E.a)({},e))},I=function(e){p(Object(E.a)(Object(E.a)({},o.store),e))};return Object(c.useEffect)((function(){s||l||_(!1)}),[s]),Object(c.useEffect)((function(){_(!!o.store)}),[o.store]),i.a.createElement(P.a,{fullScreen:!0,onClick:function(e){return e.stopPropagation()},onClose:w,onFocus:function(e){return e.stopPropagation()},open:O,TransitionProps:{onExit:d}},i.a.createElement(D.c,{initialValues:{categories:function(){var e;if(!(null===(e=o.store)||void 0===e?void 0:e.categories))return r;var t=Object(B.a)(o.store.categories);return r.forEach((function(e){t.find((function(t){return t._id===e._id}))||t.push(Object(E.a)(Object(E.a)({},e),{},{isNew:!0}))})),t}(),name:(null===(n=o.store)||void 0===n?void 0:n.name)||"",notes:(null===(a=o.store)||void 0===a?void 0:a.notes)||""},validationSchema:h.d({categories:h.a(),name:h.e().required("Required"),notes:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L?I(t):R(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return i.a.createElement(m.a,{disableGutters:!0},i.a.createElement(D.b,null,i.a.createElement(S.a,null,L?"Update store":"Add store"),i.a.createElement(N.a,null,i.a.createElement(G,{errors:l}),i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{autoFocus:!L,component:A.b,disabled:s,id:"name",label:"Store Name",name:"name",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{component:A.b,disabled:s,id:"notes",label:"Store Notes",name:"notes",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h6"},"Categories"),i.a.createElement(Zt,{categories:e.values.categories,name:"categories",onChange:e.setFieldValue})))),i.a.createElement(C.a,null,i.a.createElement(g.a,{color:"primary",disabled:s,type:"submit",variant:"contained"},L?s?"Updating...":"Update":s?"Adding...":"Add"),i.a.createElement(g.a,{disabled:s,onClick:w,variant:"contained"},"Cancel"))))})))})),en=Object(r.c)((function(e){return{defaultStore:e.common.settings.defaultStore,stores:e.stores.stores}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_STORE",payload:M.a.Stores.delete(t),snackbar:{message:"Store deleted",variant:"success"}})},onLoadUpdate:function(t){return e({type:"STORE_DIALOG_LOADED",store:t})},onSetDefault:function(t){return e({type:"SET_DEFAULT_STORE",payload:M.a.Settings.update(t),snackbar:{message:"Default store saved",variant:"success"}})}}}))((function(e){var t=e.defaultStore,n=e.onDelete,a=e.onLoadUpdate,r=e.onSetDefault,o=e.stores,l=Object(c.useState)([]),s=Object(v.a)(l,2),u=s[0],d=s[1],p=Object(c.useState)([{title:"Name",field:"name"},{title:"Notes",field:"notes"}]),m=Object(v.a)(p,1)[0],E=function(e){a(e)};return Object(c.useEffect)((function(){d(o)}),[o]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Xt,null),i.a.createElement(z.a,{title:"Manage Stores",columns:m,data:u,localization:{body:{emptyDataSourceMessage:"No stores found",editRow:{deleteText:"Delete store? This action cannot be undone."}}},actions:[{action:function(e){return{icon:e._id===t?"star":function(){return i.a.createElement(Pt.a,null)},onClick:function(e,t){r({defaultStore:t})},position:"row",tooltip:e._id===t?"Default store":"Set as default store"}}},{action:function(e){return{icon:"edit",onClick:function(e,t){return E(t)},position:"row",tooltip:"Update store"}}},{icon:function(){return i.a.createElement(Kt.a,null)},isFreeAction:!0,onClick:function(){return E({})},position:"toolbar",tooltip:"Add store"}],options:{actionsColumnIndex:-1,paging:!1,toolbar:!0},editable:{onRowDelete:function(e){return new Promise((function(t,a){var r=Object(B.a)(u),c=e.tableData.id;r.splice(c,1),d(Object(B.a)(r)),n(e),t()}))}},style:{boxShadow:"none"}}))})),tn=Object(r.c)((function(e){return Object(E.a)({},e.stores)}),(function(e){return{onLoad:function(){return e({type:"STORES_PAGE_LOADED",payload:Promise.all([M.a.Stores.getAll(),M.a.Categories.getAll()])})},onUnload:function(){return e({type:"STORES_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,n=e.onUnload,a=e.pageLoaded;return Object(c.useEffect)((function(){return t(),function(){n()}}),[]),i.a.createElement(i.a.Fragment,null,a?i.a.createElement(en,null):i.a.createElement(ee,null))})),nn=Object(b.a)((function(e){return{icon:{marginRight:e.spacing(1)},paper:{padding:e.spacing(2),marginBottom:e.spacing(4)}}})),an=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.settings),{},{currentUser:e.common.currentUser,settings:e.common.settings})}),(function(e){return{onSubmitForm:function(t){return e({type:"SETTINGS_SAVED",payload:Promise.all([M.a.Auth.save(t),M.a.Settings.update(t)]),snackbar:{message:"Settings saved",variant:"success"}})},onUnload:function(){return e({type:"SETTINGS_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.errors,a=e.inProgress,r=e.onSubmitForm,o=e.onUnload,l=(e.settings,nn());return Object(c.useEffect)((function(){return function(){o()}}),[]),i.a.createElement(D.c,{enableReinitialize:!0,initialValues:{firstName:t.firstName,lastName:t.lastName,password:""},validationSchema:h.d({firstName:h.e(),lastName:h.e(),password:h.e()}),onSubmit:function(){var e=Object(j.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object(E.a)({},t)).password||delete a.password,r(a),n.resetForm({values:Object(E.a)(Object(E.a)({},a),{},{password:""})});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},i.a.createElement(D.b,null,i.a.createElement(Q,{title:"Manage Account"},i.a.createElement(w.a,{color:"primary",disabled:a,type:"sumbit",variant:"extended"},i.a.createElement(Jt.a,{className:l.icon}),a?"Saving...":"Save settings")),i.a.createElement(G,{errors:n}),"admin"!==t.role&&i.a.createElement(ft.a,{className:l.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(tn,null)))),i.a.createElement(ft.a,{className:l.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h5",gutterBottom:!0},"Account Details")),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(D.a,{component:A.b,label:"First name",name:"firstName",type:"text",variant:"outlined",fullWidth:!0})),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(D.a,{component:A.b,label:"Last name",name:"lastName",type:"text",variant:"outlined",fullWidth:!0})))),i.a.createElement(ft.a,{className:l.paper},i.a.createElement(T.a,{container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{variant:"h5",gutterBottom:!0},"Account Security")),i.a.createElement(T.a,{item:!0,xs:12,md:6},i.a.createElement(D.a,{component:A.b,label:"New password",name:"password",type:"password",variant:"outlined",fullWidth:!0}))))))})),rn=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),null)((function(e){var t=e.currentUser;return t?i.a.createElement(i.a.Fragment,null,i.a.createElement(se,{currentUser:t}),i.a.createElement(tt,null,i.a.createElement(m.a,null,i.a.createElement(s.d,null,i.a.createElement(xt,{component:kt,path:"/plans"}),i.a.createElement(xt,{component:He,path:"/meals"}),i.a.createElement(xt,{component:Yt,path:"/recipes"}),i.a.createElement(xt,{component:ne,path:"/ingredients/categories"}),i.a.createElement(xt,{component:be,path:"/ingredients"}),i.a.createElement(xt,{component:an,path:"/settings"}),i.a.createElement(xt,{component:Ie,path:"/users"}),i.a.createElement(s.b,{component:nt}))),i.a.createElement(Xe,null))):i.a.createElement(s.a,{to:"/login"})})),cn=n(282),on=n.n(cn),ln=n(283),sn=n.n(ln),un=Object(b.a)((function(e){return{background:{alignItems:"center",backgroundImage:"url(".concat(sn.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},logo:{marginBottom:e.spacing(4),width:160},panel:{alignItems:"center",borderRadius:"1rem",display:"flex",flexFlow:"column nowrap",overflowY:"scroll",padding:"2rem 4rem",position:"relative"},text:{color:e.palette.primary.main,fontStyle:"italic"}}})),dn=function(e){var t=un();return i.a.createElement(on.a,{className:t.background},i.a.createElement(ft.a,{elevation:12,className:t.panel},i.a.createElement(oe,{className:t.logo}),i.a.createElement(K.a,{className:t.text,variant:"h4"},"Loading...")))},pn=n(406),mn=n(736),En=n(737),fn=n(407),bn=n(478),gn=n.n(bn),On=Object(b.a)((function(e){return{page:{"& p:not(:last-of-type)":{marginBottom:e.spacing(2)}},profile:{borderRadius:"100%",boxShadow:e.shadows[10],float:"right",marginBottom:e.spacing(2),marginLeft:e.spacing(2),width:"120px"}}})),yn=function(){var e=On();return i.a.createElement(T.a,{className:e.page,container:!0,spacing:2},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(K.a,{align:"center",gutterBottom:!0,variant:"h5"},"What is Plate?"),i.a.createElement("img",{className:e.profile,src:gn.a}),i.a.createElement(K.a,{variant:"body2"},"Hello, I'm Joseph May, a high school chemistry teacher from Las Vegas. While I love teaching chemistry, I also love programming for the web, so why not combine the two."),i.a.createElement(K.a,{variant:"body2"},"Plate is a web-based app I created to help my wife and I manage our meals and shopping list for each week. It allows you to create weekly meal plans from recipes you input into the system. It can then generate and push a shopping list to your iPhone or Android device."),i.a.createElement(K.a,{variant:"body2"},"While this app can support multiple users, I am running it on no-cost servers, so it was not intended to be a public program. Although, if you are interested in learning more, please reach out to me"," ",i.a.createElement(fn.a,{href:"mailto:jwmay87+plate@gmail.com"},"here"),".")))},jn=Object(r.c)((function(e){return Object(E.a)({},e.auth)}),(function(e){return{onSubmit:function(t,n){return e({type:F,payload:M.a.Auth.login(t,n)})}}}))((function(e){return i.a.createElement(D.c,{initialValues:{username:"",password:""},validationSchema:h.d({username:h.e().required("Required"),password:h.e().required("Required")}),onSubmit:function(t){!function(t,n){e.onSubmit(t,n)}(t.username,t.password)}},i.a.createElement(D.b,null,i.a.createElement(T.a,{container:!0,spacing:4},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(G,{errors:e.errors}),i.a.createElement(D.a,{component:A.b,disabled:e.inProgress,fullWidth:!0,label:"Username",name:"username",type:"text",variant:"outlined"})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(D.a,{component:A.b,disabled:e.inProgress,fullWidth:!0,label:"Password",name:"password",type:"password",variant:"outlined"})),i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(g.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},e.inProgress?"Loading...":"Login")))))})),vn=Object(b.a)((function(e){return{aboutLink:{bottom:e.spacing(2),position:"absolute",right:e.spacing(4)},loginLink:{marginBottom:e.spacing(2),"& > a":{textDecoration:"none"}},logo:{display:"block",margin:"0 auto",width:120},page:Object(ue.a)({alignItems:"center",backgroundImage:"url(".concat(sn.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},e.breakpoints.up("lg"),{backgroundSize:"initial",justifyContent:"flex-end"}),panel:Object(ue.a)({borderRadius:"1rem",maxHeight:"90%",overflowY:"scroll",padding:"4rem 2rem",position:"relative",width:"80%"},e.breakpoints.up("lg"),{borderRadius:"0",height:"100%",maxHeight:"100%",width:"40%"}),progress:{height:10,left:"0",position:"absolute",top:"0",width:"100%"}}})),Dn=function(){var e=vn();return i.a.createElement("span",{className:e.aboutLink},i.a.createElement(Oe.a,{arrow:!0,enterTouchDelay:0,title:"Learn more"},i.a.createElement(f.a,{to:"/about"},i.a.createElement(mn.a,{color:"secondary",fontSize:"small"}))))},An=function(){var e=vn();return i.a.createElement("div",{className:e.loginLink},i.a.createElement(f.a,{to:"/login"},i.a.createElement(g.a,{color:"secondary",startIcon:i.a.createElement(En.a,null)},"Login")))},hn=Object(r.c)((function(e){return Object(E.a)(Object(E.a)({},e.auth),{},{currentUser:e.common.currentUser,pathname:e.router.location.pathname})}),(function(e){return{onUnload:function(){return e({type:"LOGIN_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,n=e.inProgress,a=e.onUnload,r=e.pathname,o=vn();return Object(c.useEffect)((function(){return function(){return a()}}),[]),t?i.a.createElement(s.a,{to:"/"}):i.a.createElement(on.a,null,i.a.createElement("div",{className:o.page},i.a.createElement(ft.a,{elevation:12,className:o.panel},n&&i.a.createElement(pn.a,{className:o.progress}),i.a.createElement(T.a,{container:!0,spacing:4},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(oe,{className:o.logo})),i.a.createElement(T.a,{item:!0,xs:12},r.includes("about")?i.a.createElement(i.a.Fragment,null,i.a.createElement(An,null),i.a.createElement(yn,null)):i.a.createElement(i.a.Fragment,null,i.a.createElement(Dn,null),i.a.createElement(jn,null)))))))})),_n=n(340),Ln=function(e){var t=e.snackbar,n=Object(_n.b)().enqueueSnackbar;return Object(c.useEffect)((function(){t&&n(t.message,{variant:t.variant})}),[t]),e.children},Pn=Object(r.c)((function(e){return{snackbar:e.notifier.snackbar}}),(function(e){return{onSnackbarClose:function(){return e({type:"SNACKBAR_CLOSED"})}}}))((function(e){return i.a.createElement(_n.a,{maxSnack:1,onClose:function(){e.onSnackbarClose()}},i.a.createElement(Ln,{snackbar:e.snackbar},e.children))})),Sn=n(143),Nn=n(401),Tn=n(171),Cn=Object(Sn.b)({breakpoints:{values:{md:768,lg:1024}},palette:{primary:{main:Nn.a[400]},secondary:{main:Tn.a[200]}},overrides:{MuiDialogActions:{root:{padding:"16px 24px"}},MUIRichTextEditor:{placeHolder:{position:"relative"},toolbar:{"& button.MuiIconButton-colorPrimary":{color:Tn.a[200]}},editor:{"& li":{borderBottom:"1px solid #ccc",marginBottom:"32px",paddingBottom:"16px"}}}}}),wn=n(74),Rn=n(479),In=n(75),Un=(n(681),n(461)),kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:if(t.subtype===F||"REGISTER"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0});break;case F:case"REGISTER":return Object(E.a)(Object(E.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return{};default:return e}return e},xn={errors:null,categories:[],inProgress:!1,pageLoaded:!1},Gn=function(e,t){return e.name.localeCompare(t.name)},Mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:[].concat(Object(B.a)(e.categories),[t.payload.category]).sort((function(e,t){return Gn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_CATEGORY"===t.subtype||"UPDATE_CATEGORY"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("CATEGORIES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.filter((function(e){return e.slug!==t.payload.category.slug}))});case"DELETE_CATEGORIES":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.filter((function(e){return!t.payload.categories.includes(e.slug)}))});case"CATEGORY_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"CATEGORIES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,categories:t.error?[]:t.payload.categories,inProgress:!1,pageLoaded:!0});case"CATEGORIES_PAGE_UNLOADED":case"INGREDIENTS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":case"STORES_PAGE_UNLOADED":return xn;case"INGREDIENTS_PAGE_LOADED":case"STORES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[1].categories});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[4].categories});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?[]:t.payload[2].categories});case"UPDATE_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{categories:t.error?e.categories:e.categories.map((function(e){return e._id===t.payload.category._id?t.payload.category:e})).sort((function(e,t){return Gn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},Vn={token:null,viewChangeCounter:0},Fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOAD":return Object(E.a)(Object(E.a)({},e),{},{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null,settings:t.payload?t.payload.settings:null});case"LOGOUT":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:"/login",token:null,currentUser:null});case F:case"REGISTER":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:t.error?null:"admin"===t.payload.user.role?"/users":"/plans",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user,settings:t.error?null:t.payload.settings});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":case"SETTINGS_PAGE_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewChangeCounter:e.viewChangeCounter+1});case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:t.redirectTo});case"REDIRECT":return Object(E.a)(Object(E.a)({},e),{},{redirectTo:null});case"SET_DEFAULT_STORE":case"SET_STARRED_PLAN":return Object(E.a)(Object(E.a)({},e),{},{settings:t.error?e.settings:t.payload.settings});case"SETTINGS_SAVED":return Object(E.a)(Object(E.a)({},e),{},{currentUser:t.error?e.currentUser:t.payload[0].user,settings:t.error?e.settings:t.payload[1].settings});case"UPDATE_PLAN_ARCHIVE_STATUS":return Object(E.a)(Object(E.a)({},e),{},{settings:t.error?e.settings:t.payload[1].settings});default:return e}},Wn={errors:null,ingredients:[],inProgress:!1,pageLoaded:!1},qn=function(e,t){return e.name.localeCompare(t.name)},Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:[].concat(Object(B.a)(e.ingredients),[t.payload.ingredient]).sort((function(e,t){return qn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_INGREDIENT"===t.subtype||"UPDATE_INGREDIENT"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("INGREDIENTS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.filter((function(e){return e.slug!==t.payload.ingredient.slug}))});case"DELETE_INGREDIENTS":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.filter((function(e){return!t.payload.ingredients.includes(e.slug)}))});case"INGREDIENT_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"INGREDIENTS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,ingredients:t.error?[]:t.payload[0].ingredients,inProgress:!1,pageLoaded:!0});case"INGREDIENTS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return Wn;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?[]:t.payload[3].ingredients});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?[]:t.payload[1].ingredients});case"UPDATE_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{ingredients:t.error?e.ingredients:e.ingredients.map((function(e){return e._id===t.payload.ingredient._id?t.payload.ingredient:e})).sort((function(e,t){return qn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},Hn={editor:{meal:null},errors:null,inProgress:!1,meals:[],pageLoaded:!1},zn=function(e,t){return e.title.localeCompare(t.title)},Yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MEAL":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?e.meals:[].concat(Object(B.a)(e.meals),[t.payload.meal]).sort((function(e,t){return zn(e,t)}))});case V:if("ADD_MEAL"===t.subtype||"UPDATE_MEAL"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("MEALS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_MEAL":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?e.meals:e.meals.filter((function(e){return e.slug!==t.payload.meal.slug}))});case"DELETE_MEALS":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?e.meals:e.meals.filter((function(e){return!t.payload.meals.includes(e.slug)}))});case"MEAL_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{meal:t.meal})});case"MEAL_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{meal:null}),errors:null});case"MEALS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?[]:t.payload[0].meals,pageLoaded:!0});case"MEALS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return Hn;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{meals:t.error?[]:t.payload[1].meals});case"UPDATE_MEAL":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,meals:t.error?e.meals:e.meals.map((function(e){return e._id===t.payload.meal._id?t.payload.meal:e})).sort((function(e,t){return zn(e,t)}))});default:return e}return e},Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(E.a)(Object(E.a)({},e),{},{navTabValue:t.value});case"NAV_UNLOADED":return{};default:return e}},Kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY":case"ADD_INGREDIENT":case"ADD_MEAL":case"ADD_PLAN":case"ADD_RECIPE":case"ADD_STORE":case"ADD_USER":case"DELETE_CATEGORY":case"DELETE_CATEGORIES":case"DELETE_INGREDIENT":case"DELETE_INGREDIENTS":case"DELETE_MEAL":case"DELETE_MEALS":case"DELETE_PLAN":case"DELETE_RECIPE":case"DELETE_RECIPES":case"DELETE_STORE":case"DELETE_USER":case"PLAN_LIST_COPIED":case"SET_DEFAULT_STORE":case"SET_STARRED_PLAN":case"SETTINGS_SAVED":case"UPDATE_CATEGORY":case"UPDATE_INGREDIENT":case"UPDATE_MEAL":case"UPDATE_PLAN":case"UPDATE_PLAN_ARCHIVE_STATUS":case"UPDATE_RECIPE":case"UPDATE_STORE":case"UPDATE_USER":return Object(E.a)(Object(E.a)({},e),{},{snackbar:t.error?null:t.snackbar});case"SNACKBAR_CLOSED":return Object(E.a)(Object(E.a)({},e),{},{snackbar:null});default:return e}},$n={editor:{plan:null},errors:null,inProgress:!1,pageLoaded:!1,plans:[],viewer:{plan:null,type:null}},Qn=function(e,t){return e.title.localeCompare(t.title)},Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:[].concat(Object(B.a)(e.plans),[t.payload.plan]).sort((function(e,t){return Qn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_PLAN"===t.subtype||"UPDATE_PLAN"===t.subtype||"UPDATE_PLAN_ARCHIVE_STATUS"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("PLANS_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.filter((function(e){return e.slug!==t.payload.plan.slug}))});case"PLAN_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{plan:t.plan})});case"PLAN_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{plan:null}),errors:null});case"PLAN_LIST_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:t.plan,type:"list"})});case"PLAN_LIST_DIALOG_UNLOADED":case"PLAN_VIEW_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:null,type:null})});case"PLAN_VIEW_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{plan:t.plan,type:"plan"})});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{pageLoaded:!0,plans:t.payload[0].plans});case"PLANS_PAGE_UNLOADED":return $n;case"UPDATE_PLAN":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.map((function(e){return e._id===t.payload.plan._id?t.payload.plan:e})).sort((function(e,t){return Qn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case"UPDATE_PLAN_ARCHIVE_STATUS":return Object(E.a)(Object(E.a)({},e),{},{plans:t.error?e.plans:e.plans.map((function(e){return e._id===t.payload[0].plan._id?t.payload[0].plan:e})).sort((function(e,t){return Qn(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},Xn={editor:{recipe:null,ingredient:null},errors:null,recipes:[],inProgress:!1,pageLoaded:!1,viewer:{recipe:null}},ea=function(e,t){return e.title.localeCompare(t.title)},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREDIENT":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{ingredient:t.payload.ingredient})});case"ADD_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:[].concat(Object(B.a)(e.recipes),[t.payload.recipe]).sort((function(e,t){return ea(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_RECIPE"===t.subtype||"UPDATE_RECIPE"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("RECIPES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:e.recipes.filter((function(e){return e.slug!==t.payload.recipe.slug}))});case"DELETE_RECIPES":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?e.recipes:e.recipes.filter((function(e){return!t.payload.recipes.includes(e.slug)}))});case"MEALS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?[]:t.payload[1].recipes});case"MEALS_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":case"RECIPES_PAGE_UNLOADED":return Xn;case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{recipes:t.error?[]:t.payload[2].recipes});case"RECIPE_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:t.recipe})});case"RECIPE_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:null,ingredient:null}),errors:null});case"RECIPE_INGREDIENT_ONBLUR":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{ingredient:null})});case"RECIPES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,recipes:t.error?[]:t.payload[0].recipes,inProgress:!1,pageLoaded:!0});case"RECIPE_VIEW_LOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{recipe:t.recipe})});case"RECIPE_VIEW_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{viewer:Object(E.a)(Object(E.a)({},e.viewer),{},{recipe:null})});case"UPDATE_RECIPE":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{recipe:null}),errors:t.error?t.payload.errors:null,inProgress:!1,recipes:t.error?e.recipes:e.recipes.map((function(e){return e._id===t.payload.recipe._id?t.payload.recipe:e})).sort((function(e,t){return ea(e,t)}))});default:return e}return e},na={errors:null,inProgress:!1},aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:if("SETTINGS_SAVED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0});break;case"SETTINGS_PAGE_UNLOADED":return na;case"SETTINGS_SAVED":return Object(E.a)(Object(E.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});default:return e}return e},ra={editor:{store:null},errors:null,inProgress:!1,pageLoaded:!1,stores:[]},ca=function(e,t){return e.name.localeCompare(t.name)},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:[].concat(Object(B.a)(e.stores),[t.payload.store]).sort((function(e,t){return ca(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case V:if("ADD_STORE"===t.subtype||"UPDATE_STORE"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,inProgress:!0});if("STORES_PAGE_LOADED"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{errors:null,pageLoaded:!1});break;case"DELETE_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:e.stores.filter((function(e){return e.slug!==t.payload.store.slug}))});case"PLANS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?[]:t.payload[5].stores});case"STORE_DIALOG_LOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{store:t.store})});case"STORE_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{editor:Object(E.a)(Object(E.a)({},e.editor),{},{store:null}),errors:null});case"STORES_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{pageLoaded:!0,stores:t.payload[0].stores});case"STORES_PAGE_UNLOADED":case"PLANS_PAGE_UNLOADED":return ra;case"UPDATE_STORE":return Object(E.a)(Object(E.a)({},e),{},{stores:t.error?e.stores:e.stores.map((function(e){return e._id===t.payload.store._id?t.payload.store:e})).sort((function(e,t){return ca(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},oa={errors:null,inProgress:!1,users:[]},la=function(e,t){return e.lastName.localeCompare(t.lastName)},sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,users:t.error?e.users:[].concat(Object(B.a)(e.users),[t.payload.user]).sort((function(e,t){return la(e,t)}))});case V:if("ADD_USER"===t.subtype||"UPDATE_USER"===t.subtype)return Object(E.a)(Object(E.a)({},e),{},{inProgress:!0,errors:null});break;case"DELETE_USER":return Object(E.a)(Object(E.a)({},e),{},{users:t.error?e.users:e.users.filter((function(e){return e.username!==t.payload.user.username}))});case"MANAGE_USERS_PAGE_LOADED":return Object(E.a)(Object(E.a)({},e),{},{users:t.payload.users});case"MANAGE_USERS_PAGE_UNLOADED":return oa;case"USER_DIALOG_UNLOADED":return Object(E.a)(Object(E.a)({},e),{},{errors:null});case"UPDATE_USER":return Object(E.a)(Object(E.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,users:t.error?e.users:e.users.map((function(e){return e.username===t.payload.user.username?t.payload.user:e})).sort((function(e,t){return la(e,t)}))});default:return e}return e},ua=function(e){return function(t){return function(n){if((c=n.payload)&&"function"===typeof c.then){e.dispatch({type:V,subtype:n.type});var a=e.getState().viewChangeCounter,r=n.skipTracking;n.payload.then((function(t){var c=e.getState();(r||c.viewChangeCounter===a)&&(n.payload=t,e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}),(function(t){var c=e.getState();(r||c.viewChangeCounter===a)&&(n.error=!0,n.payload=t.response.body,n.skipTracking||e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}))}else{var c;t(n)}}}},da=function(e){return function(e){return function(t){"REGISTER"===t.type||t.type===F?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),M.a.setToken(t.payload.user.token)):"LOGOUT"===t.type&&(window.localStorage.setItem("jwt",""),M.a.setToken(null)),e(t)}}};var pa,ma=Object(In.a)(),Ea=Object(Un.a)(ma),fa=Object(wn.createStore)((pa=ma,Object(wn.combineReducers)({auth:kn,categories:Mn,common:Fn,ingredients:Bn,meals:Yn,nav:Jn,notifier:Kn,plans:Zn,recipes:ta,settings:aa,stores:ia,users:sa,router:Object(a.b)(pa)})),Object(Rn.composeWithDevTools)(Object(wn.applyMiddleware)(Ea,ua,da))),ba=Object(r.c)((function(e){return{appLoaded:e.common.appLoaded,redirectTo:e.common.redirectTo}}),(function(e){return{onLoad:function(t,n){return e({type:"APP_LOAD",payload:t,token:n,skipTracking:!0})},onRedirect:function(){return e({type:"REDIRECT"})}}}))((function(e){var t=e.appLoaded,n=e.redirectTo;return Object(c.useEffect)((function(){n&&(fa.dispatch(Object(u.d)(n)),e.onRedirect())}),[n]),Object(c.useEffect)((function(){var t=window.localStorage.getItem("jwt");t&&M.a.setToken(t),e.onLoad(t?M.a.Auth.current():null,t)}),[]),t?i.a.createElement(d.a,{theme:Cn},i.a.createElement(p.a,null),i.a.createElement(Pn,null,i.a.createElement(c.Suspense,{fallback:i.a.createElement("p",null,"Loading...")},i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/login",component:hn}),i.a.createElement(s.b,{exact:!0,path:"/about",component:hn}),i.a.createElement(s.b,{path:"/",component:rn}))))):i.a.createElement(d.a,{theme:Cn},i.a.createElement(p.a,null),i.a.createElement(dn,null))}));l.a.render(i.a.createElement(r.a,{store:fa},i.a.createElement(a.a,{history:ma},i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"/",component:ba})))),document.getElementById("root"))}},[[493,1,2]]]);
//# sourceMappingURL=main.320cd4bc.chunk.js.map